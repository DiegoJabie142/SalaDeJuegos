import{E as L,c as U,e as W,i as q,v as H}from"./chunk-RA5UQWQ2.js";import"./chunk-WXI33M2S.js";import{C as I,I as j,J as f,K as D,L as B,M as z,N as A,O as N}from"./chunk-EAWJ4BSG.js";import{Eb as d,Fb as l,Gb as _,Hb as y,Ib as O,Jb as w,Lb as P,Pb as k,Rb as T,Va as r,Wa as b,aa as h,g as u,hb as M,ic as S,jb as m,ka as x,mc as F,nc as E,ob as s,pb as a,qb as C,vb as v}from"./chunk-HPN74DU2.js";var V=(()=>{let e=class e{constructor(){this.db=D(),this.auth=I()}sendMessage(o){return u(this,null,function*(){try{let t=this.auth.currentUser;if(!t)throw new Error("Usuario no autenticado");yield A(f(this.db,"messages"),{user:t.email,message:o,timestamp:j.now()}),console.log("Mensaje enviado")}catch(t){console.error("Error al enviar el mensaje:",t)}})}getMessages(o){let t=B(f(this.db,"messages"),z("timestamp"));N(t,i=>{let g=i.docs.map(c=>c.data());o(g)})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function K(n,e){if(n&1&&(s(0,"div",8)(1,"strong"),d(2),a(),s(3,"span"),d(4),a(),s(5,"small"),d(6),k(7,"date"),a()()),n&2){let p=e.$implicit;r(2),_("",p.user,":"),r(2),l(p.message),r(2),l(T(7,3,p.timestamp.toDate(),"short"))}}var oe=(()=>{let e=class e{constructor(o){this.chatService=o,this.messages=[],this.messageText=""}ngOnInit(){this.chatService.getMessages(o=>{this.messages=o})}sendMessage(){this.messageText.trim()&&(this.chatService.sendMessage(this.messageText),this.messageText="")}};e.\u0275fac=function(t){return new(t||e)(b(V))},e.\u0275cmp=x({type:e,selectors:[["app-chat"]],standalone:!0,features:[P],decls:9,vars:4,consts:[["title","CHAT",3,"back","whereToBack"],[1,"bg"],[1,"chat-container"],[1,"messages"],["class","message",4,"ngFor","ngForOf"],[1,"message-input"],["type","text","placeholder","Escribe tu mensaje...",3,"ngModelChange","ngModel"],[3,"click"],[1,"message"]],template:function(t,i){t&1&&(C(0,"app-header",0),s(1,"div",1)(2,"div",2)(3,"div",3),M(4,K,8,6,"div",4),a(),s(5,"div",5)(6,"input",6),w("ngModelChange",function(c){return O(i.messageText,c)||(i.messageText=c),c}),a(),s(7,"button",7),v("click",function(){return i.sendMessage()}),d(8,"Enviar"),a()()()()),t&2&&(m("back",!0)("whereToBack","main/home"),r(4),m("ngForOf",i.messages),r(2),y("ngModel",i.messageText))},dependencies:[E,S,F,H,U,W,q,L],styles:['@charset "UTF-8";.chat-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto;padding:20px;background-color:#f7f8fa;border-radius:10px;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column;height:500px;overflow:hidden;position:relative;top:100px}.messages[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding-right:10px;margin-bottom:20px}.message[_ngcontent-%COMP%]{background-color:#fff;margin:10px 0;padding:12px;border-radius:8px;box-shadow:0 2px 6px #0000001a;font-family:Arial,sans-serif;font-size:14px;line-height:1.5;color:#333}.message[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#007bff;font-weight:700}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-top:6px}.message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:8px;color:#888;font-size:.8em}.message-input[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-top:1px solid #ddd}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%;padding:12px 16px;border:2px solid #ddd;border-radius:25px;font-size:16px;color:#333;background-color:#f9f9f9;transition:border-color .3s ease-in-out;outline:none}.message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;background-color:#fff}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%;padding:12px 20px;background-color:#007bff;color:#fff;border:none;border-radius:25px;font-size:16px;cursor:pointer;transition:background-color .3s ease-in-out}.message-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);height:90vh;padding-top:30px}']});let n=e;return n})();export{oe as ChatComponent};
