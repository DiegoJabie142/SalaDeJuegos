import{$b as Gm,A as Al,Aa as kl,B as _t,C as ym,Ca as Ws,D as Sl,Da as Cm,Ea as Nl,Fa as Pm,G as Hn,Ga as pn,H as Ti,I as Or,Ia as xl,Ja as Ri,K as Rl,Ka as Ci,L as bi,La as Dm,Lb as jm,M as wm,Ma as km,Na as Nm,O as Ai,Oa as xm,P as Qn,Pa as Om,Q as Cl,Qa as Mm,R as vm,Ra as Lm,S as _m,Sa as Mr,Tb as Ya,Ua as Ks,Ub as qm,Vb as Xa,W as Im,Wb as zm,X as It,Xb as Ol,Y as Em,Yb as Za,Z as Be,Za as Vm,Zb as Ml,_ as be,_b as Ll,a as q,aa as ae,ab as We,b as xe,ba as hn,bb as Fm,bc as Vl,ca as Tm,cc as Wm,d as J_,da as _e,dc as Km,e as Y_,ea as Pl,eb as Um,ec as dt,f as Wn,fa as ue,fb as Bm,fc as ec,g as E,ga as G,gb as Ja,gc as tc,h as hm,ha as at,i as dm,ia as zs,j as ln,k as _l,ka as bm,l as Il,la as dn,m as xr,ma as Am,n as vt,na as Gs,o as fm,oc as Hm,p as pm,pa as Sm,q as Kn,qa as Si,qb as $m,qc as nc,r as El,ra as fn,rc,s as Tl,sa as Rm,t as bl,u as ot,v as K,w as qs,x as mm,xa as Dl,y as gm,z as pe,za as Jn}from"./chunk-HPN74DU2.js";var Gg=J_((Jt,Mh)=>{(function(n,e){typeof Jt=="object"&&typeof Mh<"u"?Mh.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(Jt,function(){"use strict";function n(u,l,m){if(typeof u=="function"?u===l:u.has(l))return arguments.length<3?l:m;throw new TypeError("Private element is not present on this object")}function e(u,l){if(l.has(u))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(u,l){return u.get(n(u,l))}function r(u,l,m){e(u,l),l.set(u,m)}function i(u,l,m){return u.set(n(u,l),m),m}let s=100,o={},c=()=>{o.previousActiveElement instanceof HTMLElement?(o.previousActiveElement.focus(),o.previousActiveElement=null):document.body&&document.body.focus()},d=u=>new Promise(l=>{if(!u)return l();let m=window.scrollX,v=window.scrollY;o.restoreFocusTimeout=setTimeout(()=>{c(),l()},s),window.scrollTo(m,v)}),f="swal2-",g=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((u,l)=>(u[l]=f+l,u),{}),N=["success","warning","info","question","error"].reduce((u,l)=>(u[l]=f+l,u),{}),V="SweetAlert2:",B=u=>u.charAt(0).toUpperCase()+u.slice(1),x=u=>{console.warn(`${V} ${typeof u=="object"?u.join(" "):u}`)},F=u=>{console.error(`${V} ${u}`)},W=[],te=u=>{W.includes(u)||(W.push(u),x(u))},J=function(u){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;te(`"${u}" is deprecated and will be removed in the next major release.${l?` Use "${l}" instead.`:""}`)},Ie=u=>typeof u=="function"?u():u,se=u=>u&&typeof u.toPromise=="function",C=u=>se(u)?u.toPromise():Promise.resolve(u),_=u=>u&&Promise.resolve(u)===u,I=()=>document.body.querySelector(`.${g.container}`),A=u=>{let l=I();return l?l.querySelector(u):null},S=u=>A(`.${u}`),R=()=>S(g.popup),T=()=>S(g.icon),At=()=>S(g["icon-content"]),Cn=()=>S(g.title),gs=()=>S(g["html-container"]),Pn=()=>S(g.image),cn=()=>S(g["progress-steps"]),Dn=()=>S(g["validation-message"]),ct=()=>A(`.${g.actions} .${g.confirm}`),kn=()=>A(`.${g.actions} .${g.cancel}`),Xe=()=>A(`.${g.actions} .${g.deny}`),qe=()=>S(g["input-label"]),Nn=()=>A(`.${g.loader}`),St=()=>S(g.actions),ia=()=>S(g.footer),Ut=()=>S(g["timer-progress-bar"]),ys=()=>S(g.close),tl=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,xn=()=>{let u=R();if(!u)return[];let l=u.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),m=Array.from(l).sort((U,ee)=>{let ce=parseInt(U.getAttribute("tabindex")||"0"),Te=parseInt(ee.getAttribute("tabindex")||"0");return ce>Te?1:ce<Te?-1:0}),v=u.querySelectorAll(tl),D=Array.from(v).filter(U=>U.getAttribute("tabindex")!=="-1");return[...new Set(m.concat(D))].filter(U=>Je(U))},On=()=>ut(document.body,g.shown)&&!ut(document.body,g["toast-shown"])&&!ut(document.body,g["no-backdrop"]),Mn=()=>{let u=R();return u?ut(u,g.toast):!1},ws=()=>{let u=R();return u?u.hasAttribute("data-loading"):!1},Qe=(u,l)=>{if(u.textContent="",l){let v=new DOMParser().parseFromString(l,"text/html"),D=v.querySelector("head");D&&Array.from(D.childNodes).forEach(ee=>{u.appendChild(ee)});let U=v.querySelector("body");U&&Array.from(U.childNodes).forEach(ee=>{ee instanceof HTMLVideoElement||ee instanceof HTMLAudioElement?u.appendChild(ee.cloneNode(!0)):u.appendChild(ee)})}},ut=(u,l)=>{if(!l)return!1;let m=l.split(/\s+/);for(let v=0;v<m.length;v++)if(!u.classList.contains(m[v]))return!1;return!0},sa=(u,l)=>{Array.from(u.classList).forEach(m=>{!Object.values(g).includes(m)&&!Object.values(N).includes(m)&&!Object.values(l.showClass||{}).includes(m)&&u.classList.remove(m)})},Ze=(u,l,m)=>{if(sa(u,l),!l.customClass)return;let v=l.customClass[m];if(v){if(typeof v!="string"&&!v.forEach){x(`Invalid type of customClass.${m}! Expected string or iterable object, got "${typeof v}"`);return}ne(u,v)}},ui=(u,l)=>{if(!l)return null;switch(l){case"select":case"textarea":case"file":return u.querySelector(`.${g.popup} > .${g[l]}`);case"checkbox":return u.querySelector(`.${g.popup} > .${g.checkbox} input`);case"radio":return u.querySelector(`.${g.popup} > .${g.radio} input:checked`)||u.querySelector(`.${g.popup} > .${g.radio} input:first-child`);case"range":return u.querySelector(`.${g.popup} > .${g.range} input`);default:return u.querySelector(`.${g.popup} > .${g.input}`)}},vs=u=>{if(u.focus(),u.type!=="file"){let l=u.value;u.value="",u.value=l}},_s=(u,l,m)=>{!u||!l||(typeof l=="string"&&(l=l.split(/\s+/).filter(Boolean)),l.forEach(v=>{Array.isArray(u)?u.forEach(D=>{m?D.classList.add(v):D.classList.remove(v)}):m?u.classList.add(v):u.classList.remove(v)}))},ne=(u,l)=>{_s(u,l,!0)},lt=(u,l)=>{_s(u,l,!1)},Bt=(u,l)=>{let m=Array.from(u.children);for(let v=0;v<m.length;v++){let D=m[v];if(D instanceof HTMLElement&&ut(D,l))return D}},Rt=(u,l,m)=>{m===`${parseInt(m)}`&&(m=parseInt(m)),m||parseInt(m)===0?u.style.setProperty(l,typeof m=="number"?`${m}px`:m):u.style.removeProperty(l)},Se=function(u){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";u&&(u.style.display=l)},De=u=>{u&&(u.style.display="none")},ke=function(u){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";u&&new MutationObserver(()=>{$t(u,u.innerHTML,l)}).observe(u,{childList:!0,subtree:!0})},ze=(u,l,m,v)=>{let D=u.querySelector(l);D&&D.style.setProperty(m,v)},$t=function(u,l){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";l?Se(u,m):De(u)},Je=u=>!!(u&&(u.offsetWidth||u.offsetHeight||u.getClientRects().length)),oa=()=>!Je(ct())&&!Je(Xe())&&!Je(kn()),aa=u=>u.scrollHeight>u.clientHeight,Ln=u=>{let l=window.getComputedStyle(u),m=parseFloat(l.getPropertyValue("animation-duration")||"0"),v=parseFloat(l.getPropertyValue("transition-duration")||"0");return m>0||v>0},li=function(u){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,m=Ut();m&&Je(m)&&(l&&(m.style.transition="none",m.style.width="100%"),setTimeout(()=>{m.style.transition=`width ${u/1e3}s linear`,m.style.width="0%"},10))},ca=()=>{let u=Ut();if(!u)return;let l=parseInt(window.getComputedStyle(u).width);u.style.removeProperty("transition"),u.style.width="100%";let m=parseInt(window.getComputedStyle(u).width),v=l/m*100;u.style.width=`${v}%`},Is=()=>typeof window>"u"||typeof document>"u",nl=`
 <div aria-labelledby="${g.title}" aria-describedby="${g["html-container"]}" class="${g.popup}" tabindex="-1">
   <button type="button" class="${g.close}"></button>
   <ul class="${g["progress-steps"]}"></ul>
   <div class="${g.icon}"></div>
   <img class="${g.image}" />
   <h2 class="${g.title}" id="${g.title}"></h2>
   <div class="${g["html-container"]}" id="${g["html-container"]}"></div>
   <input class="${g.input}" id="${g.input}" />
   <input type="file" class="${g.file}" />
   <div class="${g.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${g.select}" id="${g.select}"></select>
   <div class="${g.radio}"></div>
   <label class="${g.checkbox}">
     <input type="checkbox" id="${g.checkbox}" />
     <span class="${g.label}"></span>
   </label>
   <textarea class="${g.textarea}" id="${g.textarea}"></textarea>
   <div class="${g["validation-message"]}" id="${g["validation-message"]}"></div>
   <div class="${g.actions}">
     <div class="${g.loader}"></div>
     <button type="button" class="${g.confirm}"></button>
     <button type="button" class="${g.deny}"></button>
     <button type="button" class="${g.cancel}"></button>
   </div>
   <div class="${g.footer}"></div>
   <div class="${g["timer-progress-bar-container"]}">
     <div class="${g["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),rl=()=>{let u=I();return u?(u.remove(),lt([document.documentElement,document.body],[g["no-backdrop"],g["toast-shown"],g["has-column"]]),!0):!1},Ct=()=>{o.currentInstance.resetValidationMessage()},ua=()=>{let u=R(),l=Bt(u,g.input),m=Bt(u,g.file),v=u.querySelector(`.${g.range} input`),D=u.querySelector(`.${g.range} output`),U=Bt(u,g.select),ee=u.querySelector(`.${g.checkbox} input`),ce=Bt(u,g.textarea);l.oninput=Ct,m.onchange=Ct,U.onchange=Ct,ee.onchange=Ct,ce.oninput=Ct,v.oninput=()=>{Ct(),D.value=v.value},v.onchange=()=>{Ct(),D.value=v.value}},la=u=>typeof u=="string"?document.querySelector(u):u,yr=u=>{let l=R();l.setAttribute("role",u.toast?"alert":"dialog"),l.setAttribute("aria-live",u.toast?"polite":"assertive"),u.toast||l.setAttribute("aria-modal","true")},Es=u=>{window.getComputedStyle(u).direction==="rtl"&&ne(I(),g.rtl)},Ts=u=>{let l=rl();if(Is()){F("SweetAlert2 requires document to initialize");return}let m=document.createElement("div");m.className=g.container,l&&ne(m,g["no-transition"]),Qe(m,nl);let v=la(u.target);v.appendChild(m),yr(u),Es(v),ua()},Pt=(u,l)=>{u instanceof HTMLElement?l.appendChild(u):typeof u=="object"?ha(u,l):u&&Qe(l,u)},ha=(u,l)=>{u.jquery?hi(l,u):Qe(l,u.toString())},hi=(u,l)=>{if(u.textContent="",0 in l)for(let m=0;m in l;m++)u.appendChild(l[m].cloneNode(!0));else u.appendChild(l.cloneNode(!0))},da=(u,l)=>{let m=St(),v=Nn();!m||!v||(!l.showConfirmButton&&!l.showDenyButton&&!l.showCancelButton?De(m):Se(m),Ze(m,l,"actions"),wr(m,v,l),Qe(v,l.loaderHtml||""),Ze(v,l,"loader"))};function wr(u,l,m){let v=ct(),D=Xe(),U=kn();!v||!D||!U||(Ve(v,"confirm",m),Ve(D,"deny",m),Ve(U,"cancel",m),fa(v,D,U,m),m.reverseButtons&&(m.toast?(u.insertBefore(U,v),u.insertBefore(D,v)):(u.insertBefore(U,l),u.insertBefore(D,l),u.insertBefore(v,l))))}function fa(u,l,m,v){if(!v.buttonsStyling){lt([u,l,m],g.styled);return}ne([u,l,m],g.styled),v.confirmButtonColor&&(u.style.backgroundColor=v.confirmButtonColor,ne(u,g["default-outline"])),v.denyButtonColor&&(l.style.backgroundColor=v.denyButtonColor,ne(l,g["default-outline"])),v.cancelButtonColor&&(m.style.backgroundColor=v.cancelButtonColor,ne(m,g["default-outline"]))}function Ve(u,l,m){let v=B(l);$t(u,m[`show${v}Button`],"inline-block"),Qe(u,m[`${l}ButtonText`]||""),u.setAttribute("aria-label",m[`${l}ButtonAriaLabel`]||""),u.className=g[l],Ze(u,m,`${l}Button`)}let pa=(u,l)=>{let m=ys();m&&(Qe(m,l.closeButtonHtml||""),Ze(m,l,"closeButton"),$t(m,l.showCloseButton),m.setAttribute("aria-label",l.closeButtonAriaLabel||""))},vr=(u,l)=>{let m=I();m&&(_r(m,l.backdrop),il(m,l.position),sl(m,l.grow),Ze(m,l,"container"))};function _r(u,l){typeof l=="string"?u.style.background=l:l||ne([document.documentElement,document.body],g["no-backdrop"])}function il(u,l){l&&(l in g?ne(u,g[l]):(x('The "position" parameter is not valid, defaulting to "center"'),ne(u,g.center)))}function sl(u,l){l&&ne(u,g[`grow-${l}`])}var he={innerParams:new WeakMap,domCache:new WeakMap};let ol=["input","file","range","select","radio","checkbox","textarea"],al=(u,l)=>{let m=R();if(!m)return;let v=he.innerParams.get(u),D=!v||l.input!==v.input;ol.forEach(U=>{let ee=Bt(m,g[U]);ee&&(bs(U,l.inputAttributes),ee.className=g[U],D&&De(ee))}),l.input&&(D&&di(l),fi(l))},di=u=>{if(!u.input)return;if(!we[u.input]){F(`Unexpected type of input! Expected ${Object.keys(we).join(" | ")}, got "${u.input}"`);return}let l=As(u.input);if(!l)return;let m=we[u.input](l,u);Se(l),u.inputAutoFocus&&setTimeout(()=>{vs(m)})},ma=u=>{for(let l=0;l<u.attributes.length;l++){let m=u.attributes[l].name;["id","type","value","style"].includes(m)||u.removeAttribute(m)}},bs=(u,l)=>{let m=R();if(!m)return;let v=ui(m,u);if(v){ma(v);for(let D in l)v.setAttribute(D,l[D])}},fi=u=>{if(!u.input)return;let l=As(u.input);l&&Ze(l,u,"input")},yt=(u,l)=>{!u.placeholder&&l.inputPlaceholder&&(u.placeholder=l.inputPlaceholder)},Vn=(u,l,m)=>{if(m.inputLabel){let v=document.createElement("label"),D=g["input-label"];v.setAttribute("for",u.id),v.className=D,typeof m.customClass=="object"&&ne(v,m.customClass.inputLabel),v.innerText=m.inputLabel,l.insertAdjacentElement("beforebegin",v)}},As=u=>{let l=R();if(l)return Bt(l,g[u]||g.input)},Fn=(u,l)=>{["string","number"].includes(typeof l)?u.value=`${l}`:_(l)||x(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof l}"`)},we={};we.text=we.email=we.password=we.number=we.tel=we.url=we.search=we.date=we["datetime-local"]=we.time=we.week=we.month=(u,l)=>(Fn(u,l.inputValue),Vn(u,u,l),yt(u,l),u.type=l.input,u),we.file=(u,l)=>(Vn(u,u,l),yt(u,l),u),we.range=(u,l)=>{let m=u.querySelector("input"),v=u.querySelector("output");return Fn(m,l.inputValue),m.type=l.input,Fn(v,l.inputValue),Vn(m,u,l),u},we.select=(u,l)=>{if(u.textContent="",l.inputPlaceholder){let m=document.createElement("option");Qe(m,l.inputPlaceholder),m.value="",m.disabled=!0,m.selected=!0,u.appendChild(m)}return Vn(u,u,l),u},we.radio=u=>(u.textContent="",u),we.checkbox=(u,l)=>{let m=ui(R(),"checkbox");m.value="1",m.checked=!!l.inputValue;let v=u.querySelector("span");return Qe(v,l.inputPlaceholder||l.inputLabel),m},we.textarea=(u,l)=>{Fn(u,l.inputValue),yt(u,l),Vn(u,u,l);let m=v=>parseInt(window.getComputedStyle(v).marginLeft)+parseInt(window.getComputedStyle(v).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let v=parseInt(window.getComputedStyle(R()).width),D=()=>{if(!document.body.contains(u))return;let U=u.offsetWidth+m(u);U>v?R().style.width=`${U}px`:Rt(R(),"width",l.width)};new MutationObserver(D).observe(u,{attributes:!0,attributeFilter:["style"]})}}),u};let ga=(u,l)=>{let m=gs();m&&(ke(m),Ze(m,l,"htmlContainer"),l.html?(Pt(l.html,m),Se(m,"block")):l.text?(m.textContent=l.text,Se(m,"block")):De(m),al(u,l))},ya=(u,l)=>{let m=ia();m&&(ke(m),$t(m,l.footer,"block"),l.footer&&Pt(l.footer,m),Ze(m,l,"footer"))},cl=(u,l)=>{let m=he.innerParams.get(u),v=T();if(v){if(m&&l.icon===m.icon){jt(v,l),Ir(v,l);return}if(!l.icon&&!l.iconHtml){De(v);return}if(l.icon&&Object.keys(N).indexOf(l.icon)===-1){F(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${l.icon}"`),De(v);return}Se(v),jt(v,l),Ir(v,l),ne(v,l.showClass&&l.showClass.icon)}},Ir=(u,l)=>{for(let[m,v]of Object.entries(N))l.icon!==m&&lt(u,v);ne(u,l.icon&&N[l.icon]),Rs(u,l),wa(),Ze(u,l,"icon")},wa=()=>{let u=R();if(!u)return;let l=window.getComputedStyle(u).getPropertyValue("background-color"),m=u.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let v=0;v<m.length;v++)m[v].style.backgroundColor=l},Ss=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Er=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,jt=(u,l)=>{if(!l.icon&&!l.iconHtml)return;let m=u.innerHTML,v="";l.iconHtml?v=va(l.iconHtml):l.icon==="success"?(v=Ss,m=m.replace(/ style=".*?"/g,"")):l.icon==="error"?v=Er:l.icon&&(v=va({question:"?",warning:"!",info:"i"}[l.icon])),m.trim()!==v.trim()&&Qe(u,v)},Rs=(u,l)=>{if(l.iconColor){u.style.color=l.iconColor,u.style.borderColor=l.iconColor;for(let m of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])ze(u,m,"background-color",l.iconColor);ze(u,".swal2-success-ring","border-color",l.iconColor)}},va=u=>`<div class="${g["icon-content"]}">${u}</div>`,_a=(u,l)=>{let m=Pn();if(m){if(!l.imageUrl){De(m);return}Se(m,""),m.setAttribute("src",l.imageUrl),m.setAttribute("alt",l.imageAlt||""),Rt(m,"width",l.imageWidth),Rt(m,"height",l.imageHeight),m.className=g.image,Ze(m,l,"image")}},Ia=(u,l)=>{let m=I(),v=R();if(!(!m||!v)){if(l.toast){Rt(m,"width",l.width),v.style.width="100%";let D=Nn();D&&v.insertBefore(D,T())}else Rt(v,"width",l.width);Rt(v,"padding",l.padding),l.color&&(v.style.color=l.color),l.background&&(v.style.background=l.background),De(Dn()),Ea(v,l)}},Ea=(u,l)=>{let m=l.showClass||{};u.className=`${g.popup} ${Je(u)?m.popup:""}`,l.toast?(ne([document.documentElement,document.body],g["toast-shown"]),ne(u,g.toast)):ne(u,g.modal),Ze(u,l,"popup"),typeof l.customClass=="string"&&ne(u,l.customClass),l.icon&&ne(u,g[`icon-${l.icon}`])},Cs=(u,l)=>{let m=cn();if(!m)return;let{progressSteps:v,currentProgressStep:D}=l;if(!v||v.length===0||D===void 0){De(m);return}Se(m),m.textContent="",D>=v.length&&x("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),v.forEach((U,ee)=>{let ce=Ps(U);if(m.appendChild(ce),ee===D&&ne(ce,g["active-progress-step"]),ee!==v.length-1){let Te=Ta(l);m.appendChild(Te)}})},Ps=u=>{let l=document.createElement("li");return ne(l,g["progress-step"]),Qe(l,u),l},Ta=u=>{let l=document.createElement("li");return ne(l,g["progress-step-line"]),u.progressStepsDistance&&Rt(l,"width",u.progressStepsDistance),l},ba=(u,l)=>{let m=Cn();m&&(ke(m),$t(m,l.title||l.titleText,"block"),l.title&&Pt(l.title,m),l.titleText&&(m.innerText=l.titleText),Ze(m,l,"title"))},Aa=(u,l)=>{Ia(u,l),vr(u,l),Cs(u,l),cl(u,l),_a(u,l),ba(u,l),pa(u,l),ga(u,l),da(u,l),ya(u,l);let m=R();typeof l.didRender=="function"&&m&&l.didRender(m),o.eventEmitter.emit("didRender",m)},ul=()=>Je(R()),Ds=()=>{var u;return(u=ct())===null||u===void 0?void 0:u.click()},Sa=()=>{var u;return(u=Xe())===null||u===void 0?void 0:u.click()},ll=()=>{var u;return(u=kn())===null||u===void 0?void 0:u.click()},it=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),wt=u=>{u.keydownTarget&&u.keydownHandlerAdded&&(u.keydownTarget.removeEventListener("keydown",u.keydownHandler,{capture:u.keydownListenerCapture}),u.keydownHandlerAdded=!1)},pi=(u,l,m)=>{wt(u),l.toast||(u.keydownHandler=v=>mi(l,v,m),u.keydownTarget=l.keydownListenerCapture?window:R(),u.keydownListenerCapture=l.keydownListenerCapture,u.keydownTarget.addEventListener("keydown",u.keydownHandler,{capture:u.keydownListenerCapture}),u.keydownHandlerAdded=!0)},Un=(u,l)=>{var m;let v=xn();if(v.length){u=u+l,u===v.length?u=0:u===-1&&(u=v.length-1),v[u].focus();return}(m=R())===null||m===void 0||m.focus()},ks=["ArrowRight","ArrowDown"],ge=["ArrowLeft","ArrowUp"],mi=(u,l,m)=>{u&&(l.isComposing||l.keyCode===229||(u.stopKeydownPropagation&&l.stopPropagation(),l.key==="Enter"?Tr(l,u):l.key==="Tab"?br(l):[...ks,...ge].includes(l.key)?hl(l.key):l.key==="Escape"&&Ra(l,u,m)))},Tr=(u,l)=>{if(!Ie(l.allowEnterKey))return;let m=ui(R(),l.input);if(u.target&&m&&u.target instanceof HTMLElement&&u.target.outerHTML===m.outerHTML){if(["textarea","file"].includes(l.input))return;Ds(),u.preventDefault()}},br=u=>{let l=u.target,m=xn(),v=-1;for(let D=0;D<m.length;D++)if(l===m[D]){v=D;break}u.shiftKey?Un(v,-1):Un(v,1),u.stopPropagation(),u.preventDefault()},hl=u=>{let l=St(),m=ct(),v=Xe(),D=kn();if(!l||!m||!v||!D)return;let U=[m,v,D];if(document.activeElement instanceof HTMLElement&&!U.includes(document.activeElement))return;let ee=ks.includes(u)?"nextElementSibling":"previousElementSibling",ce=document.activeElement;if(ce){for(let Te=0;Te<l.children.length;Te++){if(ce=ce[ee],!ce)return;if(ce instanceof HTMLButtonElement&&Je(ce))break}ce instanceof HTMLButtonElement&&ce.focus()}},Ra=(u,l,m)=>{Ie(l.allowEscapeKey)&&(u.preventDefault(),m(it.esc))};var Bn={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let dl=()=>{let u=I();Array.from(document.body.children).forEach(m=>{m.contains(u)||(m.hasAttribute("aria-hidden")&&m.setAttribute("data-previous-aria-hidden",m.getAttribute("aria-hidden")||""),m.setAttribute("aria-hidden","true"))})},Ca=()=>{Array.from(document.body.children).forEach(l=>{l.hasAttribute("data-previous-aria-hidden")?(l.setAttribute("aria-hidden",l.getAttribute("data-previous-aria-hidden")||""),l.removeAttribute("data-previous-aria-hidden")):l.removeAttribute("aria-hidden")})},Pa=typeof window<"u"&&!!window.GestureEvent,Ar=()=>{if(Pa&&!ut(document.body,g.iosfix)){let u=document.body.scrollTop;document.body.style.top=`${u*-1}px`,ne(document.body,g.iosfix),qt()}},qt=()=>{let u=I();if(!u)return;let l;u.ontouchstart=m=>{l=Da(m)},u.ontouchmove=m=>{l&&(m.preventDefault(),m.stopPropagation())}},Da=u=>{let l=u.target,m=I(),v=gs();return!m||!v||ka(u)||Na(u)?!1:l===m||!aa(m)&&l instanceof HTMLElement&&l.tagName!=="INPUT"&&l.tagName!=="TEXTAREA"&&!(aa(v)&&v.contains(l))},ka=u=>u.touches&&u.touches.length&&u.touches[0].touchType==="stylus",Na=u=>u.touches&&u.touches.length>1,$n=()=>{if(ut(document.body,g.iosfix)){let u=parseInt(document.body.style.top,10);lt(document.body,g.iosfix),document.body.style.top="",document.body.scrollTop=u*-1}},fl=()=>{let u=document.createElement("div");u.className=g["scrollbar-measure"],document.body.appendChild(u);let l=u.getBoundingClientRect().width-u.clientWidth;return document.body.removeChild(u),l},jn=null,pl=u=>{jn===null&&(document.body.scrollHeight>window.innerHeight||u==="scroll")&&(jn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${jn+fl()}px`)},zt=()=>{jn!==null&&(document.body.style.paddingRight=`${jn}px`,jn=null)};function xa(u,l,m,v){Mn()?ve(u,v):(d(m).then(()=>ve(u,v)),wt(o)),Pa?(l.setAttribute("style","display:none !important"),l.removeAttribute("class"),l.innerHTML=""):l.remove(),On()&&(zt(),$n(),Ca()),ml()}function ml(){lt([document.documentElement,document.body],[g.shown,g["height-auto"],g["no-backdrop"],g["toast-shown"]])}function st(u){u=Sr(u);let l=Bn.swalPromiseResolve.get(this),m=gi(this);this.isAwaitingPromise?u.isDismissed||(Dt(this),l(u)):m&&l(u)}let gi=u=>{let l=R();if(!l)return!1;let m=he.innerParams.get(u);if(!m||ut(l,m.hideClass.popup))return!1;lt(l,m.showClass.popup),ne(l,m.hideClass.popup);let v=I();return lt(v,m.showClass.backdrop),ne(v,m.hideClass.backdrop),Oa(u,l,m),!0};function Ns(u){let l=Bn.swalPromiseReject.get(this);Dt(this),l&&l(u)}let Dt=u=>{u.isAwaitingPromise&&(delete u.isAwaitingPromise,he.innerParams.get(u)||u._destroy())},Sr=u=>typeof u>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},u),Oa=(u,l,m)=>{var v;let D=I(),U=Ln(l);typeof m.willClose=="function"&&m.willClose(l),(v=o.eventEmitter)===null||v===void 0||v.emit("willClose",l),U?xs(u,l,D,m.returnFocus,m.didClose):xa(u,D,m.returnFocus,m.didClose)},xs=(u,l,m,v,D)=>{o.swalCloseEventFinishedCallback=xa.bind(null,u,m,v,D);let U=function(ee){if(ee.target===l){var ce;(ce=o.swalCloseEventFinishedCallback)===null||ce===void 0||ce.call(o),delete o.swalCloseEventFinishedCallback,l.removeEventListener("animationend",U),l.removeEventListener("transitionend",U)}};l.addEventListener("animationend",U),l.addEventListener("transitionend",U)},ve=(u,l)=>{setTimeout(()=>{var m;typeof l=="function"&&l.bind(u.params)(),(m=o.eventEmitter)===null||m===void 0||m.emit("didClose"),u._destroy&&u._destroy()})},qn=u=>{let l=R();if(l||new Qa,l=R(),!l)return;let m=Nn();Mn()?De(T()):gl(l,u),Se(m),l.setAttribute("data-loading","true"),l.setAttribute("aria-busy","true"),l.focus()},gl=(u,l)=>{let m=St(),v=Nn();!m||!v||(!l&&Je(ct())&&(l=ct()),Se(m),l&&(De(l),v.setAttribute("data-button-to-replace",l.className),m.insertBefore(v,l)),ne([u,m],g.loading))},Ma=(u,l)=>{l.input==="select"||l.input==="radio"?kt(u,l):["text","email","number","tel","textarea"].some(m=>m===l.input)&&(se(l.inputValue)||_(l.inputValue))&&(qn(ct()),Ua(u,l))},La=(u,l)=>{let m=u.getInput();if(!m)return null;switch(l.input){case"checkbox":return Va(m);case"radio":return yi(m);case"file":return Fa(m);default:return l.inputAutoTrim?m.value.trim():m.value}},Va=u=>u.checked?1:0,yi=u=>u.checked?u.value:null,Fa=u=>u.files&&u.files.length?u.getAttribute("multiple")!==null?u.files:u.files[0]:null,kt=(u,l)=>{let m=R();if(!m)return;let v=D=>{l.input==="select"?yl(m,Cr(D),l):l.input==="radio"&&Rr(m,Cr(D),l)};se(l.inputOptions)||_(l.inputOptions)?(qn(ct()),C(l.inputOptions).then(D=>{u.hideLoading(),v(D)})):typeof l.inputOptions=="object"?v(l.inputOptions):F(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof l.inputOptions}`)},Ua=(u,l)=>{let m=u.getInput();m&&(De(m),C(l.inputValue).then(v=>{m.value=l.input==="number"?`${parseFloat(v)||0}`:`${v}`,Se(m),m.focus(),u.hideLoading()}).catch(v=>{F(`Error in inputValue promise: ${v}`),m.value="",Se(m),m.focus(),u.hideLoading()}))};function yl(u,l,m){let v=Bt(u,g.select);if(!v)return;let D=(U,ee,ce)=>{let Te=document.createElement("option");Te.value=ce,Qe(Te,ee),Te.selected=wi(ce,m.inputValue),U.appendChild(Te)};l.forEach(U=>{let ee=U[0],ce=U[1];if(Array.isArray(ce)){let Te=document.createElement("optgroup");Te.label=ee,Te.disabled=!1,v.appendChild(Te),ce.forEach(Ei=>D(Te,Ei[1],Ei[0]))}else D(v,ce,ee)}),v.focus()}function Rr(u,l,m){let v=Bt(u,g.radio);if(!v)return;l.forEach(U=>{let ee=U[0],ce=U[1],Te=document.createElement("input"),Ei=document.createElement("label");Te.type="radio",Te.name=g.radio,Te.value=ee,wi(ee,m.inputValue)&&(Te.checked=!0);let vl=document.createElement("span");Qe(vl,ce),vl.className=g.label,Ei.appendChild(Te),Ei.appendChild(vl),v.appendChild(Ei)});let D=v.querySelectorAll("input");D.length&&D[0].focus()}let Cr=u=>{let l=[];return u instanceof Map?u.forEach((m,v)=>{let D=m;typeof D=="object"&&(D=Cr(D)),l.push([v,D])}):Object.keys(u).forEach(m=>{let v=u[m];typeof v=="object"&&(v=Cr(v)),l.push([m,v])}),l},wi=(u,l)=>!!l&&l.toString()===u.toString(),vi=u=>{let l=he.innerParams.get(u);u.disableButtons(),l.input?$a(u,"confirm"):Pr(u,!0)},Ba=u=>{let l=he.innerParams.get(u);u.disableButtons(),l.returnInputValueOnDeny?$a(u,"deny"):un(u,!1)},_i=(u,l)=>{u.disableButtons(),l(it.cancel)},$a=(u,l)=>{let m=he.innerParams.get(u);if(!m.input){F(`The "input" parameter is needed to be set when using returnInputValueOn${B(l)}`);return}let v=u.getInput(),D=La(u,m);m.inputValidator?ja(u,D,l):v&&!v.checkValidity()?(u.enableButtons(),u.showValidationMessage(m.validationMessage||v.validationMessage)):l==="deny"?un(u,D):Pr(u,D)},ja=(u,l,m)=>{let v=he.innerParams.get(u);u.disableInput(),Promise.resolve().then(()=>C(v.inputValidator(l,v.validationMessage))).then(U=>{u.enableButtons(),u.enableInput(),U?u.showValidationMessage(U):m==="deny"?un(u,l):Pr(u,l)})},un=(u,l)=>{let m=he.innerParams.get(u||void 0);m.showLoaderOnDeny&&qn(Xe()),m.preDeny?(u.isAwaitingPromise=!0,Promise.resolve().then(()=>C(m.preDeny(l,m.validationMessage))).then(D=>{D===!1?(u.hideLoading(),Dt(u)):u.close({isDenied:!0,value:typeof D>"u"?l:D})}).catch(D=>Ms(u||void 0,D))):u.close({isDenied:!0,value:l})},Os=(u,l)=>{u.close({isConfirmed:!0,value:l})},Ms=(u,l)=>{u.rejectPromise(l)},Pr=(u,l)=>{let m=he.innerParams.get(u||void 0);m.showLoaderOnConfirm&&qn(),m.preConfirm?(u.resetValidationMessage(),u.isAwaitingPromise=!0,Promise.resolve().then(()=>C(m.preConfirm(l,m.validationMessage))).then(D=>{Je(Dn())||D===!1?(u.hideLoading(),Dt(u)):Os(u,typeof D>"u"?l:D)}).catch(D=>Ms(u||void 0,D))):Os(u,l)};function zn(){let u=he.innerParams.get(this);if(!u)return;let l=he.domCache.get(this);De(l.loader),Mn()?u.icon&&Se(T()):qa(l),lt([l.popup,l.actions],g.loading),l.popup.removeAttribute("aria-busy"),l.popup.removeAttribute("data-loading"),l.confirmButton.disabled=!1,l.denyButton.disabled=!1,l.cancelButton.disabled=!1}let qa=u=>{let l=u.popup.getElementsByClassName(u.loader.getAttribute("data-button-to-replace"));l.length?Se(l[0],"inline-block"):oa()&&De(u.actions)};function Dr(){let u=he.innerParams.get(this),l=he.domCache.get(this);return l?ui(l.popup,u.input):null}function Ls(u,l,m){let v=he.domCache.get(u);l.forEach(D=>{v[D].disabled=m})}function Vs(u,l){let m=R();if(!(!m||!u))if(u.type==="radio"){let v=m.querySelectorAll(`[name="${g.radio}"]`);for(let D=0;D<v.length;D++)v[D].disabled=l}else u.disabled=l}function Gt(){Ls(this,["confirmButton","denyButton","cancelButton"],!1)}function Fs(){Ls(this,["confirmButton","denyButton","cancelButton"],!0)}function Us(){Vs(this.getInput(),!1)}function Bs(){Vs(this.getInput(),!0)}function $s(u){let l=he.domCache.get(this),m=he.innerParams.get(this);Qe(l.validationMessage,u),l.validationMessage.className=g["validation-message"],m.customClass&&m.customClass.validationMessage&&ne(l.validationMessage,m.customClass.validationMessage),Se(l.validationMessage);let v=this.getInput();v&&(v.setAttribute("aria-invalid","true"),v.setAttribute("aria-describedby",g["validation-message"]),vs(v),ne(v,g.inputerror))}function kr(){let u=he.domCache.get(this);u.validationMessage&&De(u.validationMessage);let l=this.getInput();l&&(l.removeAttribute("aria-invalid"),l.removeAttribute("aria-describedby"),lt(l,g.inputerror))}let Ne={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},za=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ga={allowEnterKey:void 0},Gn=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],a=u=>Object.prototype.hasOwnProperty.call(Ne,u),h=u=>za.indexOf(u)!==-1,p=u=>Ga[u],w=u=>{a(u)||x(`Unknown parameter "${u}"`)},P=u=>{Gn.includes(u)&&x(`The parameter "${u}" is incompatible with toasts`)},k=u=>{let l=p(u);l&&J(u,l)},L=u=>{u.backdrop===!1&&u.allowOutsideClick&&x('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let l in u)w(l),u.toast&&P(l),k(l)};function fe(u){let l=R(),m=he.innerParams.get(this);if(!l||ut(l,m.hideClass.popup)){x("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let v=Fe(u),D=Object.assign({},m,v);Aa(this,D),he.innerParams.set(this,D),Object.defineProperties(this,{params:{value:Object.assign({},this.params,u),writable:!1,enumerable:!0}})}let Fe=u=>{let l={};return Object.keys(u).forEach(m=>{h(m)?l[m]=u[m]:x(`Invalid parameter to update: ${m}`)}),l};function oe(){let u=he.domCache.get(this),l=he.innerParams.get(this);if(!l){Ue(this);return}u.popup&&o.swalCloseEventFinishedCallback&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback),typeof l.didDestroy=="function"&&l.didDestroy(),o.eventEmitter.emit("didDestroy"),Ge(this)}let Ge=u=>{Ue(u),delete u.params,delete o.keydownHandler,delete o.keydownTarget,delete o.currentInstance},Ue=u=>{u.isAwaitingPromise?(Wt(he,u),u.isAwaitingPromise=!0):(Wt(Bn,u),Wt(he,u),delete u.isAwaitingPromise,delete u.disableButtons,delete u.enableButtons,delete u.getInput,delete u.disableInput,delete u.enableInput,delete u.hideLoading,delete u.disableLoading,delete u.showValidationMessage,delete u.resetValidationMessage,delete u.close,delete u.closePopup,delete u.closeModal,delete u.closeToast,delete u.rejectPromise,delete u.update,delete u._destroy)},Wt=(u,l)=>{for(let m in u)u[m].delete(l)};var ht=Object.freeze({__proto__:null,_destroy:oe,close:st,closeModal:st,closePopup:st,closeToast:st,disableButtons:Fs,disableInput:Bs,disableLoading:zn,enableButtons:Gt,enableInput:Us,getInput:Dr,handleAwaitingPromise:Dt,hideLoading:zn,rejectPromise:Ns,resetValidationMessage:kr,showValidationMessage:$s,update:fe});let Ii=(u,l,m)=>{u.toast?js(u,l,m):(l_(l),h_(l),d_(u,l,m))},js=(u,l,m)=>{l.popup.onclick=()=>{u&&(u_(u)||u.timer||u.input)||m(it.close)}},u_=u=>!!(u.showConfirmButton||u.showDenyButton||u.showCancelButton||u.showCloseButton),Wa=!1,l_=u=>{u.popup.onmousedown=()=>{u.container.onmouseup=function(l){u.container.onmouseup=()=>{},l.target===u.container&&(Wa=!0)}}},h_=u=>{u.container.onmousedown=l=>{l.target===u.container&&l.preventDefault(),u.popup.onmouseup=function(m){u.popup.onmouseup=()=>{},(m.target===u.popup||m.target instanceof HTMLElement&&u.popup.contains(m.target))&&(Wa=!0)}}},d_=(u,l,m)=>{l.container.onclick=v=>{if(Wa){Wa=!1;return}v.target===l.container&&Ie(u.allowOutsideClick)&&m(it.backdrop)}},f_=u=>typeof u=="object"&&u.jquery,im=u=>u instanceof Element||f_(u),p_=u=>{let l={};return typeof u[0]=="object"&&!im(u[0])?Object.assign(l,u[0]):["title","html","icon"].forEach((m,v)=>{let D=u[v];typeof D=="string"||im(D)?l[m]=D:D!==void 0&&F(`Unexpected type of ${m}! Expected "string" or "Element", got ${typeof D}`)}),l};function m_(){for(var u=arguments.length,l=new Array(u),m=0;m<u;m++)l[m]=arguments[m];return new this(...l)}function g_(u){class l extends this{_main(v,D){return super._main(v,Object.assign({},u,D))}}return l}let y_=()=>o.timeout&&o.timeout.getTimerLeft(),sm=()=>{if(o.timeout)return ca(),o.timeout.stop()},om=()=>{if(o.timeout){let u=o.timeout.start();return li(u),u}},w_=()=>{let u=o.timeout;return u&&(u.running?sm():om())},v_=u=>{if(o.timeout){let l=o.timeout.increase(u);return li(l,!0),l}},__=()=>!!(o.timeout&&o.timeout.isRunning()),am=!1,wl={};function I_(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";wl[u]=this,am||(document.body.addEventListener("click",E_),am=!0)}let E_=u=>{for(let l=u.target;l&&l!==document;l=l.parentNode)for(let m in wl){let v=l.getAttribute(m);if(v){wl[m].fire({template:v});return}}};class T_{constructor(){this.events={}}_getHandlersByEventName(l){return typeof this.events[l]>"u"&&(this.events[l]=[]),this.events[l]}on(l,m){let v=this._getHandlersByEventName(l);v.includes(m)||v.push(m)}once(l,m){var v=this;let D=function(){v.removeListener(l,D);for(var U=arguments.length,ee=new Array(U),ce=0;ce<U;ce++)ee[ce]=arguments[ce];m.apply(v,ee)};this.on(l,D)}emit(l){for(var m=arguments.length,v=new Array(m>1?m-1:0),D=1;D<m;D++)v[D-1]=arguments[D];this._getHandlersByEventName(l).forEach(U=>{try{U.apply(this,v)}catch(ee){console.error(ee)}})}removeListener(l,m){let v=this._getHandlersByEventName(l),D=v.indexOf(m);D>-1&&v.splice(D,1)}removeAllListeners(l){this.events[l]!==void 0&&(this.events[l].length=0)}reset(){this.events={}}}o.eventEmitter=new T_;var b_=Object.freeze({__proto__:null,argsToParams:p_,bindClickHandler:I_,clickCancel:ll,clickConfirm:Ds,clickDeny:Sa,enableLoading:qn,fire:m_,getActions:St,getCancelButton:kn,getCloseButton:ys,getConfirmButton:ct,getContainer:I,getDenyButton:Xe,getFocusableElements:xn,getFooter:ia,getHtmlContainer:gs,getIcon:T,getIconContent:At,getImage:Pn,getInputLabel:qe,getLoader:Nn,getPopup:R,getProgressSteps:cn,getTimerLeft:y_,getTimerProgressBar:Ut,getTitle:Cn,getValidationMessage:Dn,increaseTimer:v_,isDeprecatedParameter:p,isLoading:ws,isTimerRunning:__,isUpdatableParameter:h,isValidParameter:a,isVisible:ul,mixin:g_,off:(u,l)=>{if(!u){o.eventEmitter.reset();return}l?o.eventEmitter.removeListener(u,l):o.eventEmitter.removeAllListeners(u)},on:(u,l)=>{o.eventEmitter.on(u,l)},once:(u,l)=>{o.eventEmitter.once(u,l)},resumeTimer:om,showLoading:qn,stopTimer:sm,toggleTimer:w_});class A_{constructor(l,m){this.callback=l,this.remaining=m,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(l){let m=this.running;return m&&this.stop(),this.remaining+=l,m&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let cm=["swal-title","swal-html","swal-footer"],S_=u=>{let l=typeof u.template=="string"?document.querySelector(u.template):u.template;if(!l)return{};let m=l.content;return O_(m),Object.assign(R_(m),C_(m),P_(m),D_(m),k_(m),N_(m),x_(m,cm))},R_=u=>{let l={};return Array.from(u.querySelectorAll("swal-param")).forEach(v=>{Nr(v,["name","value"]);let D=v.getAttribute("name"),U=v.getAttribute("value");!D||!U||(typeof Ne[D]=="boolean"?l[D]=U!=="false":typeof Ne[D]=="object"?l[D]=JSON.parse(U):l[D]=U)}),l},C_=u=>{let l={};return Array.from(u.querySelectorAll("swal-function-param")).forEach(v=>{let D=v.getAttribute("name"),U=v.getAttribute("value");!D||!U||(l[D]=new Function(`return ${U}`)())}),l},P_=u=>{let l={};return Array.from(u.querySelectorAll("swal-button")).forEach(v=>{Nr(v,["type","color","aria-label"]);let D=v.getAttribute("type");!D||!["confirm","cancel","deny"].includes(D)||(l[`${D}ButtonText`]=v.innerHTML,l[`show${B(D)}Button`]=!0,v.hasAttribute("color")&&(l[`${D}ButtonColor`]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(l[`${D}ButtonAriaLabel`]=v.getAttribute("aria-label")))}),l},D_=u=>{let l={},m=u.querySelector("swal-image");return m&&(Nr(m,["src","width","height","alt"]),m.hasAttribute("src")&&(l.imageUrl=m.getAttribute("src")||void 0),m.hasAttribute("width")&&(l.imageWidth=m.getAttribute("width")||void 0),m.hasAttribute("height")&&(l.imageHeight=m.getAttribute("height")||void 0),m.hasAttribute("alt")&&(l.imageAlt=m.getAttribute("alt")||void 0)),l},k_=u=>{let l={},m=u.querySelector("swal-icon");return m&&(Nr(m,["type","color"]),m.hasAttribute("type")&&(l.icon=m.getAttribute("type")),m.hasAttribute("color")&&(l.iconColor=m.getAttribute("color")),l.iconHtml=m.innerHTML),l},N_=u=>{let l={},m=u.querySelector("swal-input");m&&(Nr(m,["type","label","placeholder","value"]),l.input=m.getAttribute("type")||"text",m.hasAttribute("label")&&(l.inputLabel=m.getAttribute("label")),m.hasAttribute("placeholder")&&(l.inputPlaceholder=m.getAttribute("placeholder")),m.hasAttribute("value")&&(l.inputValue=m.getAttribute("value")));let v=Array.from(u.querySelectorAll("swal-input-option"));return v.length&&(l.inputOptions={},v.forEach(D=>{Nr(D,["value"]);let U=D.getAttribute("value");if(!U)return;let ee=D.innerHTML;l.inputOptions[U]=ee})),l},x_=(u,l)=>{let m={};for(let v in l){let D=l[v],U=u.querySelector(D);U&&(Nr(U,[]),m[D.replace(/^swal-/,"")]=U.innerHTML.trim())}return m},O_=u=>{let l=cm.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(u.children).forEach(m=>{let v=m.tagName.toLowerCase();l.includes(v)||x(`Unrecognized element <${v}>`)})},Nr=(u,l)=>{Array.from(u.attributes).forEach(m=>{l.indexOf(m.name)===-1&&x([`Unrecognized attribute "${m.name}" on <${u.tagName.toLowerCase()}>.`,`${l.length?`Allowed attributes are: ${l.join(", ")}`:"To set the value, use HTML within the element."}`])})},um=10,M_=u=>{let l=I(),m=R();typeof u.willOpen=="function"&&u.willOpen(m),o.eventEmitter.emit("willOpen",m);let D=window.getComputedStyle(document.body).overflowY;F_(l,m,u),setTimeout(()=>{L_(l,m)},um),On()&&(V_(l,u.scrollbarPadding,D),dl()),!Mn()&&!o.previousActiveElement&&(o.previousActiveElement=document.activeElement),typeof u.didOpen=="function"&&setTimeout(()=>u.didOpen(m)),o.eventEmitter.emit("didOpen",m),lt(l,g["no-transition"])},Ka=u=>{let l=R();if(u.target!==l)return;let m=I();l.removeEventListener("animationend",Ka),l.removeEventListener("transitionend",Ka),m.style.overflowY="auto"},L_=(u,l)=>{Ln(l)?(u.style.overflowY="hidden",l.addEventListener("animationend",Ka),l.addEventListener("transitionend",Ka)):u.style.overflowY="auto"},V_=(u,l,m)=>{Ar(),l&&m!=="hidden"&&pl(m),setTimeout(()=>{u.scrollTop=0})},F_=(u,l,m)=>{ne(u,m.showClass.backdrop),m.animation?(l.style.setProperty("opacity","0","important"),Se(l,"grid"),setTimeout(()=>{ne(l,m.showClass.popup),l.style.removeProperty("opacity")},um)):Se(l,"grid"),ne([document.documentElement,document.body],g.shown),m.heightAuto&&m.backdrop&&!m.toast&&ne([document.documentElement,document.body],g["height-auto"])};var lm={email:(u,l)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(u)?Promise.resolve():Promise.resolve(l||"Invalid email address"),url:(u,l)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(u)?Promise.resolve():Promise.resolve(l||"Invalid URL")};function U_(u){u.inputValidator||(u.input==="email"&&(u.inputValidator=lm.email),u.input==="url"&&(u.inputValidator=lm.url))}function B_(u){(!u.target||typeof u.target=="string"&&!document.querySelector(u.target)||typeof u.target!="string"&&!u.target.appendChild)&&(x('Target parameter is not valid, defaulting to "body"'),u.target="body")}function $_(u){U_(u),u.showLoaderOnConfirm&&!u.preConfirm&&x(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),B_(u),typeof u.title=="string"&&(u.title=u.title.split(`
`).join("<br />")),Ts(u)}let Kt;var Ha=new WeakMap;class Pe{constructor(){if(r(this,Ha,void 0),typeof window>"u")return;Kt=this;for(var l=arguments.length,m=new Array(l),v=0;v<l;v++)m[v]=arguments[v];let D=Object.freeze(this.constructor.argsToParams(m));this.params=D,this.isAwaitingPromise=!1,i(Ha,this,this._main(Kt.params))}_main(l){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L(Object.assign({},m,l)),o.currentInstance){let U=Bn.swalPromiseResolve.get(o.currentInstance),{isAwaitingPromise:ee}=o.currentInstance;o.currentInstance._destroy(),ee||U({isDismissed:!0}),On()&&Ca()}o.currentInstance=Kt;let v=q_(l,m);$_(v),Object.freeze(v),o.timeout&&(o.timeout.stop(),delete o.timeout),clearTimeout(o.restoreFocusTimeout);let D=z_(Kt);return Aa(Kt,v),he.innerParams.set(Kt,v),j_(Kt,D,v)}then(l){return t(Ha,this).then(l)}finally(l){return t(Ha,this).finally(l)}}let j_=(u,l,m)=>new Promise((v,D)=>{let U=ee=>{u.close({isDismissed:!0,dismiss:ee})};Bn.swalPromiseResolve.set(u,v),Bn.swalPromiseReject.set(u,D),l.confirmButton.onclick=()=>{vi(u)},l.denyButton.onclick=()=>{Ba(u)},l.cancelButton.onclick=()=>{_i(u,U)},l.closeButton.onclick=()=>{U(it.close)},Ii(m,l,U),pi(o,m,U),Ma(u,m),M_(m),G_(o,m,U),W_(l,m),setTimeout(()=>{l.container.scrollTop=0})}),q_=(u,l)=>{let m=S_(u),v=Object.assign({},Ne,l,m,u);return v.showClass=Object.assign({},Ne.showClass,v.showClass),v.hideClass=Object.assign({},Ne.hideClass,v.hideClass),v.animation===!1&&(v.showClass={backdrop:"swal2-noanimation"},v.hideClass={}),v},z_=u=>{let l={popup:R(),container:I(),actions:St(),confirmButton:ct(),denyButton:Xe(),cancelButton:kn(),loader:Nn(),closeButton:ys(),validationMessage:Dn(),progressSteps:cn()};return he.domCache.set(u,l),l},G_=(u,l,m)=>{let v=Ut();De(v),l.timer&&(u.timeout=new A_(()=>{m("timer"),delete u.timeout},l.timer),l.timerProgressBar&&(Se(v),Ze(v,l,"timerProgressBar"),setTimeout(()=>{u.timeout&&u.timeout.running&&li(l.timer)})))},W_=(u,l)=>{if(!l.toast){if(!Ie(l.allowEnterKey)){J("allowEnterKey"),Q_();return}K_(u)||H_(u,l)||Un(-1,1)}},K_=u=>{let l=Array.from(u.popup.querySelectorAll("[autofocus]"));for(let m of l)if(m instanceof HTMLElement&&Je(m))return m.focus(),!0;return!1},H_=(u,l)=>l.focusDeny&&Je(u.denyButton)?(u.denyButton.focus(),!0):l.focusCancel&&Je(u.cancelButton)?(u.cancelButton.focus(),!0):l.focusConfirm&&Je(u.confirmButton)?(u.confirmButton.focus(),!0):!1,Q_=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let u=new Date,l=localStorage.getItem("swal-initiation");l?(u.getTime()-Date.parse(l))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let m=document.createElement("audio");m.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",m.loop=!0,document.body.appendChild(m),setTimeout(()=>{m.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${u}`)}Pe.prototype.disableButtons=Fs,Pe.prototype.enableButtons=Gt,Pe.prototype.getInput=Dr,Pe.prototype.disableInput=Bs,Pe.prototype.enableInput=Us,Pe.prototype.hideLoading=zn,Pe.prototype.disableLoading=zn,Pe.prototype.showValidationMessage=$s,Pe.prototype.resetValidationMessage=kr,Pe.prototype.close=st,Pe.prototype.closePopup=st,Pe.prototype.closeModal=st,Pe.prototype.closeToast=st,Pe.prototype.rejectPromise=Ns,Pe.prototype.update=fe,Pe.prototype._destroy=oe,Object.assign(Pe,b_),Object.keys(ht).forEach(u=>{Pe[u]=function(){return Kt&&Kt[u]?Kt[u](...arguments):null}}),Pe.DismissReason=it,Pe.version="11.14.5";let Qa=Pe;return Qa.default=Qa,Qa});typeof Jt<"u"&&Jt.Sweetalert2&&(Jt.swal=Jt.sweetAlert=Jt.Swal=Jt.SweetAlert=Jt.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var Qs=class{},sc=class{},Lr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ul=class{encodeKey(e){return Qm(e)}encodeValue(e){return Qm(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function tI(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],d=t.get(o)||[];d.push(c),t.set(o,d)}),t}var nI=/%(\d[a-f0-9])/gi,rI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Qm(n){return encodeURIComponent(n).replace(nI,(e,t)=>rI[t]??e)}function ic(n){return`${n}`}var Yn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ul,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=tI(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ic):[ic(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ic(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ic(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Bl=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function iI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Jm(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ym(n){return typeof Blob<"u"&&n instanceof Blob}function Xm(n){return typeof FormData<"u"&&n instanceof FormData}function sI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Hs=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(iI(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Lr,this.context??=new Bl,!this.params)this.params=new Yn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),d=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+d+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Jm(this.body)||Ym(this.body)||Xm(this.body)||sI(this.body)?this.body:this.body instanceof Yn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Xm(this.body)?null:Ym(this.body)?this.body.type||null:Jm(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Yn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,d=e.reportProgress??this.reportProgress,f=e.headers||this.headers,y=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(f=Object.keys(e.setHeaders).reduce((b,N)=>b.set(N,e.setHeaders[N]),f)),e.setParams&&(y=Object.keys(e.setParams).reduce((b,N)=>b.set(N,e.setParams[N]),y)),new n(t,r,o,{params:y,headers:f,context:g,reportProgress:d,responseType:i,withCredentials:c,transferCache:s})}},Pi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Pi||{}),Js=class{constructor(e,t=cc.Ok,r="OK"){this.headers=e.headers||new Lr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},$l=class n extends Js{constructor(e={}){super(e),this.type=Pi.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},oc=class n extends Js{constructor(e={}){super(e),this.type=Pi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ac=class extends Js{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},cc=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(cc||{});function Fl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var oI=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Hs)o=r;else{let f;s.headers instanceof Lr?f=s.headers:f=new Lr(s.headers);let y;s.params&&(s.params instanceof Yn?y=s.params:y=new Yn({fromObject:s.params})),o=new Hs(r,i,s.body!==void 0?s.body:null,{headers:f,context:s.context,params:y,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=K(o).pipe(Or(f=>this.handler.handle(f)));if(r instanceof Hs||s.observe==="events")return c;let d=c.pipe(Hn(f=>f instanceof oc));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe(pe(f=>{if(f.body!==null&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe(pe(f=>{if(f.body!==null&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe(pe(f=>{if(f.body!==null&&typeof f.body!="string")throw new Error("Response is not a string.");return f.body}));case"json":default:return d.pipe(pe(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Yn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Fl(s,i))}post(r,i,s={}){return this.request("POST",r,Fl(s,i))}put(r,i,s={}){return this.request("PUT",r,Fl(s,i))}};e.\u0275fac=function(i){return new(i||e)(ue(Qs))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})();function aI(n,e){return e(n)}function cI(n,e,t){return(r,i)=>fn(t,()=>e(r,s=>n(s,i)))}var tg=new _e(""),uI=new _e(""),lI=new _e("");var Zm=(()=>{let e=class e extends Qs{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=G(Ja);let s=G(lI,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(tg),...this.injector.get(uI,[])]));this.chain=s.reduceRight((o,c)=>cI(o,c,this.injector),aI)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Ai(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(ue(sc),ue(Si))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})();var hI=/^\)\]\}',?\n/;function dI(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var eg=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new be(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ot(i.\u0275loadImpl()):K(null)).pipe(It(()=>new ln(o=>{let c=i.build();if(c.open(r.method,r.urlWithParams),r.withCredentials&&(c.withCredentials=!0),r.headers.forEach((x,F)=>c.setRequestHeader(x,F.join(","))),r.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let x=r.detectContentTypeHeader();x!==null&&c.setRequestHeader("Content-Type",x)}if(r.responseType){let x=r.responseType.toLowerCase();c.responseType=x!=="json"?x:"text"}let d=r.serializeBody(),f=null,y=()=>{if(f!==null)return f;let x=c.statusText||"OK",F=new Lr(c.getAllResponseHeaders()),W=dI(c)||r.url;return f=new $l({headers:F,status:c.status,statusText:x,url:W}),f},g=()=>{let{headers:x,status:F,statusText:W,url:te}=y(),J=null;F!==cc.NoContent&&(J=typeof c.response>"u"?c.responseText:c.response),F===0&&(F=J?cc.Ok:0);let Ie=F>=200&&F<300;if(r.responseType==="json"&&typeof J=="string"){let se=J;J=J.replace(hI,"");try{J=J!==""?JSON.parse(J):null}catch(C){J=se,Ie&&(Ie=!1,J={error:C,text:J})}}Ie?(o.next(new oc({body:J,headers:x,status:F,statusText:W,url:te||void 0})),o.complete()):o.error(new ac({error:J,headers:x,status:F,statusText:W,url:te||void 0}))},b=x=>{let{url:F}=y(),W=new ac({error:x,status:c.status||0,statusText:c.statusText||"Unknown Error",url:F||void 0});o.error(W)},N=!1,V=x=>{N||(o.next(y()),N=!0);let F={type:Pi.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(F.total=x.total),r.responseType==="text"&&c.responseText&&(F.partialText=c.responseText),o.next(F)},B=x=>{let F={type:Pi.UploadProgress,loaded:x.loaded};x.lengthComputable&&(F.total=x.total),o.next(F)};return c.addEventListener("load",g),c.addEventListener("error",b),c.addEventListener("timeout",b),c.addEventListener("abort",b),r.reportProgress&&(c.addEventListener("progress",V),d!==null&&c.upload&&c.upload.addEventListener("progress",B)),c.send(d),o.next({type:Pi.Sent}),()=>{c.removeEventListener("error",b),c.removeEventListener("abort",b),c.removeEventListener("load",g),c.removeEventListener("timeout",b),r.reportProgress&&(c.removeEventListener("progress",V),d!==null&&c.upload&&c.upload.removeEventListener("progress",B)),c.readyState!==c.DONE&&c.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(ue(rc))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})(),ng=new _e(""),fI="XSRF-TOKEN",pI=new _e("",{providedIn:"root",factory:()=>fI}),mI="X-XSRF-TOKEN",gI=new _e("",{providedIn:"root",factory:()=>mI}),uc=class{},yI=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=tc(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(ue(dt),ue(pn),ue(pI))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})();function wI(n,e){let t=n.url.toLowerCase();if(!G(ng)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=G(uc).getToken(),i=G(gI);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function KC(...n){let e=[oI,eg,Zm,{provide:Qs,useExisting:Zm},{provide:sc,useExisting:eg},{provide:tg,useValue:wI,multi:!0},{provide:ng,useValue:!0},{provide:uc,useClass:yI}];for(let t of n)e.push(...t.\u0275providers);return Gs(e)}var zl=class extends Km{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gl=class n extends zl{static makeCurrent(){Wm(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_I();return t==null?null:II(t)}resetBaseElement(){Ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tc(document.cookie,e)}},Ys=null;function _I(){return Ys=Ys||document.querySelector("base"),Ys?Ys.getAttribute("href"):null}function II(n){return new URL(n,document.baseURI).pathname}var EI=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})(),Wl=new _e(""),og=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new be(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(ue(Wl),ue(We))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})(),lc=class{constructor(e){this._doc=e}},jl="ng-app-id",ag=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nc(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${jl}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(jl),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(jl,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,c=o.get(i)?.elements;c?c.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(ue(dt),ue(Nl),ue(xl,8),ue(pn))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})(),ql={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hl=/%COMP%/g,cg="%COMP%",TI=`_nghost-${cg}`,bI=`_ngcontent-${cg}`,AI=!0,SI=new _e("",{providedIn:"root",factory:()=>AI});function RI(n){return bI.replace(Hl,n)}function CI(n){return TI.replace(Hl,n)}function ug(n,e){return e.map(t=>t.replace(Hl,n))}var rg=(()=>{let e=class e{constructor(r,i,s,o,c,d,f,y=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=d,this.ngZone=f,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=nc(d),this.defaultRenderer=new Xs(r,c,f,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===zs.ShadowDom&&(i=xe(q({},i),{encapsulation:zs.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof hc?s.applyToHost(r):s instanceof Zs&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let c=this.doc,d=this.ngZone,f=this.eventManager,y=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(i.encapsulation){case zs.Emulated:o=new hc(f,y,i,this.appId,g,c,d,b);break;case zs.ShadowDom:return new Kl(f,y,r,i,c,d,this.nonce,b);default:o=new Zs(f,y,i,g,c,d,b);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(ue(og),ue(ag),ue(Nl),ue(SI),ue(dt),ue(pn),ue(We),ue(xl))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})(),Xs=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ql[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ig(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ig(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new be(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=ql[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ql[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ks.DashCase|Ks.Important)?e.style.setProperty(t,r,i&Ks.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ks.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Vl().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ig(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Kl=class extends Xs{constructor(e,t,r,i,s,o,c,d){super(e,s,o,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=ug(i.id,i.styles);for(let y of f){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=y,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zs=class extends Xs{constructor(e,t,r,i,s,o,c,d){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=d?ug(d,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hc=class extends Zs{constructor(e,t,r,i,s,o,c,d){let f=i+"-"+r.id;super(e,t,r,s,o,c,d,f),this.contentAttr=RI(f),this.hostAttr=CI(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},PI=(()=>{let e=class e extends lc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(ue(dt))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})(),sg=["alt","control","meta","shift"],DI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},NI=(()=>{let e=class e extends lc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(r,o.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),sg.forEach(y=>{let g=i.indexOf(y);g>-1&&(i.splice(g,1),c+=y+".")}),c+=o,i.length!=0||o.length===0)return null;let f={};return f.domEventName=s,f.fullKey=c,f}static matchEventFullKeyCode(r,i){let s=DI[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),sg.forEach(c=>{if(c!==s){let d=kI[c];d(r)&&(o+=c+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(ue(dt))},e.\u0275prov=ae({token:e,factory:e.\u0275fac});let n=e;return n})();function pP(n,e){return Gm(q({rootComponent:n},xI(e)))}function xI(n){return{appProviders:[...FI,...n?.providers??[]],platformProviders:VI}}function OI(){Gl.makeCurrent()}function MI(){return new kl}function LI(){return Cm(document),document}var VI=[{provide:pn,useValue:Hm},{provide:Pm,useValue:OI,multi:!0},{provide:dt,useFactory:LI,deps:[]}];var FI=[{provide:Sm,useValue:"root"},{provide:kl,useFactory:MI,deps:[]},{provide:Wl,useClass:PI,multi:!0,deps:[dt,We,pn]},{provide:Wl,useClass:NI,multi:!0,deps:[dt]},rg,ag,og,{provide:Vm,useExisting:rg},{provide:rc,useClass:EI,deps:[]},[]];var lg=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(ue(dt))},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var UI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=ue(BI),s},providedIn:"root"});let n=e;return n})(),BI=(()=>{let e=class e extends UI{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Mr.NONE:return i;case Mr.HTML:return Ci(i,"HTML")?Ri(i):Lm(this._doc,String(i)).toString();case Mr.STYLE:return Ci(i,"Style")?Ri(i):i;case Mr.SCRIPT:if(Ci(i,"Script"))return Ri(i);throw new be(5200,!1);case Mr.URL:return Ci(i,"URL")?Ri(i):Mm(String(i));case Mr.RESOURCE_URL:if(Ci(i,"ResourceURL"))return Ri(i);throw new be(5201,!1);default:throw new be(5202,!1)}}bypassSecurityTrustHtml(r){return Dm(r)}bypassSecurityTrustStyle(r){return km(r)}bypassSecurityTrustScript(r){return Nm(r)}bypassSecurityTrustUrl(r){return xm(r)}bypassSecurityTrustResourceUrl(r){return Om(r)}};e.\u0275fac=function(i){return new(i||e)(ue(dt))},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Z="primary",mo=Symbol("RouteTitle"),Zl=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oi(n){return new Zl(n)}function jI(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o.startsWith(":"))i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function qI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ht(n[t],e[t]))return!1;return!0}function Ht(n,e){let t=n?eh(n):void 0,r=e?eh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!gg(n[i],e[i]))return!1;return!0}function eh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function gg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function yg(n){return n.length>0?n[n.length-1]:null}function tr(n){return mm(n)?n:zm(n)?ot(Promise.resolve(n)):K(n)}var zI={exact:vg,subset:_g},wg={exact:GI,subset:WI,ignored:()=>!0};function hg(n,e,t){return zI[t.paths](n.root,e.root,t.matrixParams)&&wg[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function GI(n,e){return Ht(n,e)}function vg(n,e,t){if(!Fr(n.segments,e.segments)||!pc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!vg(n.children[r],e.children[r],t))return!1;return!0}function WI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gg(n[t],e[t]))}function _g(n,e,t){return Ig(n,e,e.segments,t)}function Ig(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fr(i,t)||e.hasChildren()||!pc(i,t,r))}else if(n.segments.length===t.length){if(!Fr(n.segments,t)||!pc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!_g(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Fr(n.segments,i)||!pc(n.segments,i,r)||!n.children[Z]?!1:Ig(n.children[Z],e,s,r)}}function pc(n,e,t){return e.every((r,i)=>wg[t](n[i].parameters,r.parameters))}var Zn=class{constructor(e=new me([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){return QI.serialize(this)}},me=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mc(this)}},Vr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oi(this.parameters),this._parameterMap}toString(){return Tg(this)}};function KI(n,e){return Fr(n,e)&&n.every((t,r)=>Ht(t.parameters,e[r].parameters))}function Fr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function HI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Z&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Z&&(t=t.concat(e(i,r)))}),t}var Sh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:()=>new yc,providedIn:"root"});let n=e;return n})(),yc=class{parse(e){let t=new nh(e);return new Zn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${eo(e.root,!0)}`,r=XI(e.queryParams),i=typeof e.fragment=="string"?`#${JI(e.fragment)}`:"";return`${t}${r}${i}`}},QI=new yc;function mc(n){return n.segments.map(e=>Tg(e)).join("/")}function eo(n,e){if(!n.hasChildren())return mc(n);if(e){let t=n.children[Z]?eo(n.children[Z],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Z&&r.push(`${i}:${eo(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=HI(n,(r,i)=>i===Z?[eo(n.children[Z],!1)]:[`${i}:${eo(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Z]!=null?`${mc(n)}/${t[0]}`:`${mc(n)}/(${t.join("//")})`}}function Eg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dc(n){return Eg(n).replace(/%3B/gi,";")}function JI(n){return encodeURI(n)}function th(n){return Eg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gc(n){return decodeURIComponent(n)}function dg(n){return gc(n.replace(/\+/g,"%20"))}function Tg(n){return`${th(n.path)}${YI(n.parameters)}`}function YI(n){return Object.entries(n).map(([e,t])=>`;${th(e)}=${th(t)}`).join("")}function XI(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${dc(t)}=${dc(i)}`).join("&"):`${dc(t)}=${dc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ZI=/^[^\/()?;#]+/;function Ql(n){let e=n.match(ZI);return e?e[0]:""}var eE=/^[^\/()?;=#]+/;function tE(n){let e=n.match(eE);return e?e[0]:""}var nE=/^[^=?&#]+/;function rE(n){let e=n.match(nE);return e?e[0]:""}var iE=/^[^&#]+/;function sE(n){let e=n.match(iE);return e?e[0]:""}var nh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Z]=new me(e,t)),r}parseSegment(){let e=Ql(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new be(4009,!1);return this.capture(e),new Vr(gc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=tE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ql(this.remaining);i&&(r=i,this.capture(r))}e[gc(t)]=gc(r)}parseQueryParam(e){let t=rE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=sE(this.remaining);o&&(r=o,this.capture(r))}let i=dg(t),s=dg(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ql(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new be(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Z);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Z]:new me([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new be(4011,!1)}};function bg(n){return n.segments.length>0?new me([],{[Z]:n}):n}function Ag(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Ag(i);if(r===Z&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new me(n.segments,e);return oE(t)}function oE(n){if(n.numberOfChildren===1&&n.children[Z]){let e=n.children[Z];return new me(n.segments.concat(e.segments),e.children)}return n}function Mi(n){return n instanceof Zn}function aE(n,e,t=null,r=null){let i=Sg(n);return Rg(i,e,t,r)}function Sg(n){let e;function t(s){let o={};for(let d of s.children){let f=t(d);o[d.outlet]=f}let c=new me(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=bg(r);return e??i}function Rg(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jl(i,i,i,t,r);let s=cE(e);if(s.toRoot())return Jl(i,i,new me([],{}),t,r);let o=uE(s,i,n),c=o.processChildren?ro(o.segmentGroup,o.index,s.commands):Pg(o.segmentGroup,o.index,s.commands);return Jl(i,o.segmentGroup,c,t,r)}function wc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function oo(n){return typeof n=="object"&&n!=null&&n.outlets}function Jl(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([d,f])=>{s[d]=Array.isArray(f)?f.map(y=>`${y}`):`${f}`});let o;n===e?o=t:o=Cg(n,e,t);let c=bg(Ag(o));return new Zn(c,s,i)}function Cg(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Cg(s,e,t)}),new me(n.segments,r)}var vc=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wc(r[0]))throw new be(4003,!1);let i=r.find(oo);if(i&&i!==yg(r))throw new be(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cE(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new vc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([d,f])=>{c[d]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,d)=>{d==0&&c==="."||(d==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new vc(t,e,r)}var Ni=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function uE(n,e,t){if(n.isAbsolute)return new Ni(e,!0,0);if(!t)return new Ni(e,!1,NaN);if(t.parent===null)return new Ni(t,!0,0);let r=wc(n.commands[0])?0:1,i=t.segments.length-1+r;return lE(t,i,n.numberOfDoubleDots)}function lE(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new be(4005,!1);i=r.segments.length}return new Ni(r,!1,i-s)}function hE(n){return oo(n[0])?n[0].outlets:{[Z]:n}}function Pg(n,e,t){if(n??=new me([],{}),n.segments.length===0&&n.hasChildren())return ro(n,e,t);let r=dE(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new me(n.segments.slice(0,r.pathIndex),{});return s.children[Z]=new me(n.segments.slice(r.pathIndex),n.children),ro(s,0,i)}else return r.match&&i.length===0?new me(n.segments,{}):r.match&&!n.hasChildren()?rh(n,e,t):r.match?ro(n,0,i):rh(n,e,t)}function ro(n,e,t){if(t.length===0)return new me(n.segments,{});{let r=hE(t),i={};if(Object.keys(r).some(s=>s!==Z)&&n.children[Z]&&n.numberOfChildren===1&&n.children[Z].segments.length===0){let s=ro(n.children[Z],e,t);return new me(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Pg(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new me(n.segments,i)}}function dE(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(oo(c))break;let d=`${c}`,f=r<t.length-1?t[r+1]:null;if(i>0&&d===void 0)break;if(d&&f&&typeof f=="object"&&f.outlets===void 0){if(!pg(d,f,o))return s;r+=2}else{if(!pg(d,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function rh(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(oo(s)){let d=fE(s.outlets);return new me(r,d)}if(i===0&&wc(t[0])){let d=n.segments[e];r.push(new Vr(d.path,fg(t[0]))),i++;continue}let o=oo(s)?s.outlets[Z]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&wc(c)?(r.push(new Vr(o,fg(c))),i+=2):(r.push(new Vr(o,{})),i++)}return new me(r,{})}function fE(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=rh(new me([],{}),0,r))}),e}function fg(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function pg(n,e,t){return n==t.path&&Ht(e,t.parameters)}var io="imperative",Ye=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ye||{}),Et=class{constructor(e,t){this.id=e,this.url=t}},ao=class extends Et{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ye.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ur=class extends Et{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ye.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(pt||{}),ih=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ih||{}),er=class extends Et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ye.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Br=class extends Et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ye.NavigationSkipped}},co=class extends Et{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ye.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_c=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ye.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sh=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ye.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oh=class extends Et{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ye.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ah=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ye.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ch=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ye.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uh=class{constructor(e){this.route=e,this.type=Ye.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lh=class{constructor(e){this.route=e,this.type=Ye.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hh=class{constructor(e){this.snapshot=e,this.type=Ye.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dh=class{constructor(e){this.snapshot=e,this.type=Ye.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fh=class{constructor(e){this.snapshot=e,this.type=Ye.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ph=class{constructor(e){this.snapshot=e,this.type=Ye.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var uo=class{},lo=class{constructor(e){this.url=e}};var mh=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sc,this.attachRef=null}},Sc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new mh,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ic=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=gh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=yh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yh(e,this._root).map(t=>t.value)}};function gh(n,e){if(n===e.value)return e;for(let t of e.children){let r=gh(n,t);if(r)return r}return null}function yh(n,e){if(n===e.value)return[e];for(let t of e.children){let r=yh(n,t);if(r.length)return r.unshift(e),r}return[]}var ft=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ki(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ec=class extends Ic{constructor(e,t){super(e),this.snapshot=t,Ch(this,e)}toString(){return this.snapshot.toString()}};function Dg(n){let e=pE(n),t=new vt([new Vr("",{})]),r=new vt({}),i=new vt({}),s=new vt({}),o=new vt(""),c=new Li(t,r,s,o,i,Z,n,e.root);return c.snapshot=e.root,new Ec(new ft(c,[]),e)}function pE(n){let e={},t={},r={},i="",s=new ho([],e,r,i,t,Z,n,null,{});return new Tc("",new ft(s,[]))}var Li=class{constructor(e,t,r,i,s,o,c,d){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(pe(f=>f[mo]))??K(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Oi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Oi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},i&&Ng(i)&&(r.resolve[mo]=i.title),r}var ho=class{get title(){return this.data?.[mo]}constructor(e,t,r,i,s,o,c,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Tc=class extends Ic{constructor(e,t){super(t),this.url=e,Ch(this,t)}toString(){return kg(this._root)}};function Ch(n,e){e.value._routerState=n,e.children.forEach(t=>Ch(n,t))}function kg(n){let e=n.children.length>0?` { ${n.children.map(kg).join(", ")} } `:"";return`${n.value}${e}`}function Yl(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ht(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ht(e.params,t.params)||n.paramsSubject.next(t.params),qI(e.url,t.url)||n.urlSubject.next(t.url),Ht(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function wh(n,e){let t=Ht(n.params,e.params)&&KI(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||wh(n.parent,e.parent))}function Ng(n){return typeof n.title=="string"||n.title===null}var mE=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new Ws,this.deactivateEvents=new Ws,this.attachEvents=new Ws,this.detachEvents=new Ws,this.parentContexts=G(Sc),this.location=G(Fm),this.changeDetector=G(Ll),this.environmentInjector=G(Si),this.inputBinder=G(Ph,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new be(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new be(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new vh(r,d,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:f,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Am({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rm]});let n=e;return n})(),vh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Li?this.route:e===Sc?this.childContexts:this.parent.get(e,t)}},Ph=new _e("");function gE(n,e,t){let r=fo(n,e._root,t?t._root:void 0);return new Ec(r,e)}function fo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=yE(n,e,t);return new ft(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>fo(n,c)),o}}let r=wE(e.value),i=e.children.map(s=>fo(n,s));return new ft(r,i)}}function yE(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fo(n,r,i);return fo(n,r)})}function wE(n){return new Li(new vt(n.url),new vt(n.params),new vt(n.queryParams),new vt(n.fragment),new vt(n.data),n.outlet,n.component,n)}var xg="ngNavigationCancelingError";function Og(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Mi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Mg(!1,pt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Mg(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[xg]=!0,t.cancellationCode=e,t}function vE(n){return Lg(n)&&Mi(n.url)}function Lg(n){return!!n&&n[xg]}var _E=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=bm({type:e,selectors:[["ng-component"]],standalone:!0,features:[jm],decls:1,vars:0,template:function(i,s){i&1&&$m(0,"router-outlet")},dependencies:[mE],encapsulation:2});let n=e;return n})();function IE(n,e){return n.providers&&!n._injector&&(n._injector=Bm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dh(n){let e=n.children&&n.children.map(Dh),t=e?xe(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Z&&(t.component=_E),t}function Qt(n){return n.outlet||Z}function EE(n,e){let t=n.filter(r=>Qt(r)===e);return t.push(...n.filter(r=>Qt(r)!==e)),t}function go(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var TE=(n,e,t,r)=>pe(i=>(new _h(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),_h=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ki(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ki(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ki(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ki(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ph(s.value.snapshot))}),e.children.length&&this.forwardEvent(new dh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Yl(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Yl(c.route.value),this.activateChildRoutes(e,null,o.children)}else{let c=go(i.snapshot);o.attachRef=null,o.route=i,o.injector=c,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},bc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xi=class{constructor(e,t){this.component=e,this.route=t}};function bE(n,e,t){let r=n._root,i=e?e._root:null;return to(r,i,t,[r.value])}function AE(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fi(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Tm(n)?n:e.get(n):r}function to(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ki(e);return n.children.forEach(o=>{SE(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>so(c,t.getContext(o),i)),i}function SE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let d=RE(o,s,s.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new bc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?to(n,e,c?c.children:null,r,i):to(n,e,t,r,i),d&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new xi(c.outlet.component,o))}else o&&so(e,c,i),i.canActivateChecks.push(new bc(r)),s.component?to(n,null,c?c.children:null,r,i):to(n,null,t,r,i);return i}function RE(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fr(n.url,e.url)||!Ht(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wh(n,e)||!Ht(n.queryParams,e.queryParams);case"paramsChange":default:return!wh(n,e)}}function so(n,e,t){let r=ki(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?so(o,e.children.getContext(s),t):so(o,null,t):so(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new xi(e.outlet.component,i)):t.canDeactivateChecks.push(new xi(null,i)):t.canDeactivateChecks.push(new xi(null,i))}function yo(n){return typeof n=="function"}function CE(n){return typeof n=="boolean"}function PE(n){return n&&yo(n.canLoad)}function DE(n){return n&&yo(n.canActivate)}function kE(n){return n&&yo(n.canActivateChild)}function NE(n){return n&&yo(n.canDeactivate)}function xE(n){return n&&yo(n.canMatch)}function Vg(n){return n instanceof gm||n?.name==="EmptyError"}var fc=Symbol("INITIAL_VALUE");function Vi(){return It(n=>Al(n.map(e=>e.pipe(bi(1),Im(fc)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===fc)return fc;if(t===!1||t instanceof Zn)return t}return!0}),Hn(e=>e!==fc),bi(1)))}function OE(n,e){return _t(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?K(xe(q({},t),{guardsResult:!0})):ME(o,r,i,n).pipe(_t(c=>c&&CE(c)?LE(r,s,n,e):K(c)),pe(c=>xe(q({},t),{guardsResult:c})))})}function ME(n,e,t,r){return ot(n).pipe(_t(i=>$E(i.component,i.route,t,e,r)),Qn(i=>i!==!0,!0))}function LE(n,e,t,r){return ot(e).pipe(Or(i=>ym(FE(i.route.parent,r),VE(i.route,r),BE(n,i.path,t),UE(n,i.route,t))),Qn(i=>i!==!0,!0))}function VE(n,e){return n!==null&&e&&e(new fh(n)),K(!0)}function FE(n,e){return n!==null&&e&&e(new hh(n)),K(!0)}function UE(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(s=>Sl(()=>{let o=go(e)??t,c=Fi(s,o),d=DE(c)?c.canActivate(e,n):fn(o,()=>c(e,n));return tr(d).pipe(Qn())}));return K(i).pipe(Vi())}function BE(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>AE(o)).filter(o=>o!==null).map(o=>Sl(()=>{let c=o.guards.map(d=>{let f=go(o.node)??t,y=Fi(d,f),g=kE(y)?y.canActivateChild(r,n):fn(f,()=>y(r,n));return tr(g).pipe(Qn())});return K(c).pipe(Vi())}));return K(s).pipe(Vi())}function $E(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(c=>{let d=go(e)??i,f=Fi(c,d),y=NE(f)?f.canDeactivate(n,e,t,r):fn(d,()=>f(n,e,t,r));return tr(y).pipe(Qn())});return K(o).pipe(Vi())}function jE(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let s=i.map(o=>{let c=Fi(o,n),d=PE(c)?c.canLoad(e,t):fn(n,()=>c(e,t));return tr(d)});return K(s).pipe(Vi(),Fg(r))}function Fg(n){return dm(Be(e=>{if(Mi(e))throw Og(n,e)}),pe(e=>e===!0))}function qE(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let s=i.map(o=>{let c=Fi(o,n),d=xE(c)?c.canMatch(e,t):fn(n,()=>c(e,t));return tr(d)});return K(s).pipe(Vi(),Fg(r))}var po=class{constructor(e){this.segmentGroup=e||null}},Ac=class extends Error{constructor(e){super(),this.urlTree=e}};function Di(n){return qs(new po(n))}function zE(n){return qs(new be(4e3,!1))}function GE(n){return qs(Mg(!1,pt.GuardRejected))}var Ih=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[Z])return zE(e.redirectTo);i=i.children[Z]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Ac(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Zn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,d])=>{o[c]=this.createSegmentGroup(e,d,r,i)}),new me(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new be(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Eh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WE(n,e,t,r,i){let s=kh(n,e,t);return s.matched?(r=IE(e,r),qE(r,e,t,i).pipe(pe(o=>o===!0?s:q({},Eh)))):K(s)}function kh(n,e,t){if(e.path==="**")return KE(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},Eh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||jI)(t,n,e);if(!i)return q({},Eh);let s={};Object.entries(i.posParams??{}).forEach(([c,d])=>{s[c]=d.path});let o=i.consumed.length>0?q(q({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function KE(n){return{matched:!0,parameters:n.length>0?yg(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mg(n,e,t,r){return t.length>0&&JE(n,t,r)?{segmentGroup:new me(e,QE(r,new me(t,n.children))),slicedSegments:[]}:t.length===0&&YE(n,t,r)?{segmentGroup:new me(n.segments,HE(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new me(n.segments,n.children),slicedSegments:t}}function HE(n,e,t,r){let i={};for(let s of t)if(Rc(n,e,s)&&!r[Qt(s)]){let o=new me([],{});i[Qt(s)]=o}return q(q({},r),i)}function QE(n,e){let t={};t[Z]=e;for(let r of n)if(r.path===""&&Qt(r)!==Z){let i=new me([],{});t[Qt(r)]=i}return t}function JE(n,e,t){return t.some(r=>Rc(n,e,r)&&Qt(r)!==Z)}function YE(n,e,t){return t.some(r=>Rc(n,e,r))}function Rc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function XE(n,e,t,r){return Qt(n)!==r&&(r===Z||!Rc(e,t,n))?!1:kh(e,n,t).matched}function ZE(n,e,t){return e.length===0&&!n.children[t]}var Th=class{};function eT(n,e,t,r,i,s,o="emptyOnly"){return new bh(n,e,t,r,i,o,s).recognize()}var tT=31,bh=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Ih(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new be(4002,`'${e.segmentGroup}'`)}recognize(){let e=mg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(t=>{let r=new ho([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,{},Z,this.rootComponentType,null,{}),i=new ft(r,t),s=new Tc("",i),o=aE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Z).pipe(Ti(r=>{if(r instanceof Ac)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof po?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=Rh(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(pe(s=>s instanceof ft?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ot(i).pipe(Or(s=>{let o=r.children[s],c=EE(t,s);return this.processSegmentGroup(e,c,o,s)}),_m((s,o)=>(s.push(...o),s)),Rl(null),vm(),_t(s=>{if(s===null)return Di(r);let o=Ug(s);return nT(o),K(o)}))}processSegment(e,t,r,i,s,o){return ot(t).pipe(Or(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o).pipe(Ti(d=>{if(d instanceof po)return K(null);throw d}))),Qn(c=>!!c),Ti(c=>{if(Vg(c))return ZE(r,i,s)?K(new Th):Di(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,c){return XE(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Di(i):Di(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){let{matched:c,consumedSegments:d,positionalParamSegments:f,remainingSegments:y}=kh(t,i,s);if(!c)return Di(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>tT&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f);return this.applyRedirects.lineralizeSegments(i,g).pipe(_t(b=>this.processSegment(e,r,t,b.concat(y),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let o=WE(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),o.pipe(It(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(It(({routes:d})=>{let f=r._loadedInjector??e,{consumedSegments:y,remainingSegments:g,parameters:b}=c,N=new ho(y,b,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,iT(r),Qt(r),r.component??r._loadedComponent??null,r,sT(r)),{segmentGroup:V,slicedSegments:B}=mg(t,y,g,d);if(B.length===0&&V.hasChildren())return this.processChildren(f,d,V).pipe(pe(F=>F===null?null:new ft(N,F)));if(d.length===0&&B.length===0)return K(new ft(N,[]));let x=Qt(r)===s;return this.processSegment(f,d,V,B,x?Z:s,!0).pipe(pe(F=>new ft(N,F instanceof ft?[F]:[])))}))):Di(t)))}getChildConfig(e,t,r){return t.children?K({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?K({routes:t._loadedRoutes,injector:t._loadedInjector}):jE(e,t,r,this.urlSerializer).pipe(_t(i=>i?this.configLoader.loadChildren(e,t).pipe(Be(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):GE(t))):K({routes:[],injector:e})}};function nT(n){n.sort((e,t)=>e.value.outlet===Z?-1:t.value.outlet===Z?1:e.value.outlet.localeCompare(t.value.outlet))}function rT(n){let e=n.value.routeConfig;return e&&e.path===""}function Ug(n){let e=[],t=new Set;for(let r of n){if(!rT(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Ug(r.children);e.push(new ft(r.value,i))}return e.filter(r=>!t.has(r))}function iT(n){return n.data||{}}function sT(n){return n.resolve||{}}function oT(n,e,t,r,i,s){return _t(o=>eT(n,e,t,r,o.extractedUrl,i,s).pipe(pe(({state:c,tree:d})=>xe(q({},o),{targetSnapshot:c,urlAfterRedirects:d}))))}function aT(n,e){return _t(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return K(t);let s=new Set(i.map(d=>d.route)),o=new Set;for(let d of s)if(!o.has(d))for(let f of Bg(d))o.add(f);let c=0;return ot(o).pipe(Or(d=>s.has(d)?cT(d,r,n,e):(d.data=Rh(d,d.parent,n).resolve,K(void 0))),Be(()=>c++),Cl(1),_t(d=>c===o.size?K(t):Kn))})}function Bg(n){let e=n.children.map(t=>Bg(t)).flat();return[n,...e]}function cT(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Ng(i)&&(s[mo]=i.title),uT(s,n,e,r).pipe(pe(o=>(n._resolvedData=o,n.data=Rh(n,n.parent,t).resolve,null)))}function uT(n,e,t,r){let i=eh(n);if(i.length===0)return K({});let s={};return ot(i).pipe(_t(o=>lT(n[o],e,t,r).pipe(Qn(),Be(c=>{s[o]=c}))),Cl(1),wm(s),Ti(o=>Vg(o)?Kn:qs(o)))}function lT(n,e,t,r){let i=go(e)??r,s=Fi(n,i),o=s.resolve?s.resolve(e,t):fn(i,()=>s(e,t));return tr(o)}function Xl(n){return It(e=>{let t=n(e);return t?ot(t).pipe(pe(()=>e)):K(e)})}var $g=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Z);return i}getResolvedTitleForRoute(r){return r.data[mo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:()=>G(hT),providedIn:"root"});let n=e;return n})(),hT=(()=>{let e=class e extends $g{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(ue(lg))},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Nh=new _e("",{providedIn:"root",factory:()=>({})}),xh=new _e(""),dT=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Ml)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=tr(r.loadComponent()).pipe(pe(jg),Be(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ai(()=>{this.componentLoaders.delete(r)})),s=new Il(i,()=>new xr).pipe(_l());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return K({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=fT(i,this.compiler,r,this.onLoadEndListener).pipe(Ai(()=>{this.childrenLoaders.delete(i)})),c=new Il(o,()=>new xr).pipe(_l());return this.childrenLoaders.set(i,c),c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function fT(n,e,t,r){return tr(n.loadChildren()).pipe(pe(jg),_t(i=>i instanceof Um||Array.isArray(i)?K(i):ot(e.compileModuleAsync(i))),pe(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(xh,[],{optional:!0,self:!0}).flat()),{routes:o.map(Dh),injector:s}}))}function pT(n){return n&&typeof n=="object"&&"default"in n}function jg(n){return pT(n)?n.default:n}var Oh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:()=>G(mT),providedIn:"root"});let n=e;return n})(),mT=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),gT=new _e("");var yT=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xr,this.transitionAbortSubject=new xr,this.configLoader=G(dT),this.environmentInjector=G(Si),this.urlSerializer=G(Sh),this.rootContexts=G(Sc),this.location=G(ec),this.inputBindingEnabled=G(Ph,{optional:!0})!==null,this.titleStrategy=G($g),this.options=G(Nh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(Oh),this.createViewTransition=G(gT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let r=s=>this.events.next(new uh(s)),i=s=>this.events.next(new lh(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(xe(q(q({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new vt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:io,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Hn(o=>o.id!==0),pe(o=>xe(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),It(o=>{let c=!1,d=!1;return K(o).pipe(It(f=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",pt.SupersededByNewNavigation),Kn;this.currentTransition=o,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?xe(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let y=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=f.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!y&&g!=="reload"){let b="";return this.events.next(new Br(f.id,this.urlSerializer.serialize(f.rawUrl),b,ih.IgnoredSameUrlNavigation)),f.resolve(null),Kn}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return K(f).pipe(It(b=>{let N=this.transitions?.getValue();return this.events.next(new ao(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),N!==this.transitions?.getValue()?Kn:Promise.resolve(b)}),oT(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Be(b=>{o.targetSnapshot=b.targetSnapshot,o.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=xe(q({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let N=new _c(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(N)}));if(y&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:b,extractedUrl:N,source:V,restoredState:B,extras:x}=f,F=new ao(b,this.urlSerializer.serialize(N),V,B);this.events.next(F);let W=Dg(this.rootComponentType).snapshot;return this.currentTransition=o=xe(q({},f),{targetSnapshot:W,urlAfterRedirects:N,extras:xe(q({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=N,K(o)}else{let b="";return this.events.next(new Br(f.id,this.urlSerializer.serialize(f.extractedUrl),b,ih.IgnoredByUrlHandlingStrategy)),f.resolve(null),Kn}}),Be(f=>{let y=new sh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}),pe(f=>(this.currentTransition=o=xe(q({},f),{guards:bE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),o)),OE(this.environmentInjector,f=>this.events.next(f)),Be(f=>{if(o.guardsResult=f.guardsResult,Mi(f.guardsResult))throw Og(this.urlSerializer,f.guardsResult);let y=new oh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(y)}),Hn(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",pt.GuardRejected),!1)),Xl(f=>{if(f.guards.canActivateChecks.length)return K(f).pipe(Be(y=>{let g=new ah(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(g)}),It(y=>{let g=!1;return K(y).pipe(aT(this.paramsInheritanceStrategy,this.environmentInjector),Be({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(y,"",pt.NoDataFromResolver)}}))}),Be(y=>{let g=new ch(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(g)}))}),Xl(f=>{let y=g=>{let b=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(g.routeConfig).pipe(Be(N=>{g.component=N}),pe(()=>{})));for(let N of g.children)b.push(...y(N));return b};return Al(y(f.targetSnapshot.root)).pipe(Rl(null),bi(1))}),Xl(()=>this.afterPreactivation()),It(()=>{let{currentSnapshot:f,targetSnapshot:y}=o,g=this.createViewTransition?.(this.environmentInjector,f.root,y.root);return g?ot(g).pipe(pe(()=>o)):K(o)}),pe(f=>{let y=gE(r.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=o=xe(q({},f),{targetRouterState:y}),this.currentNavigation.targetRouterState=y,o}),Be(()=>{this.events.next(new uo)}),TE(this.rootContexts,r.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),bi(1),Be({next:f=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ur(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{c=!0}}),Em(this.transitionAbortSubject.pipe(Be(f=>{throw f}))),Ai(()=>{!c&&!d&&this.cancelNavigationTransition(o,"",pt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ti(f=>{if(d=!0,Lg(f))this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),f.message,f.cancellationCode)),vE(f)?this.events.next(new lo(f.url)):o.resolve(!1);else{this.events.next(new co(o.id,this.urlSerializer.serialize(o.extractedUrl),f,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(f))}catch(y){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(y)}}return Kn}))}))}cancelNavigationTransition(r,i,s){let o=new er(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function wT(n){return n!==io}var vT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:()=>G(_T),providedIn:"root"});let n=e;return n})(),Ah=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},_T=(()=>{let e=class e extends Ah{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Dl(e)))(s||e)}})(),e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),qg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:()=>G(IT),providedIn:"root"});let n=e;return n})(),IT=(()=>{let e=class e extends qg{constructor(){super(...arguments),this.location=G(ec),this.urlSerializer=G(Sh),this.options=G(Nh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(Oh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Zn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Dg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ao)this.stateMemento=this.createStateMemento();else if(r instanceof Br)this.rawUrlTree=i.initialUrl;else if(r instanceof _c){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof uo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof er&&(r.code===pt.GuardRejected||r.code===pt.NoDataFromResolver)?this.restoreHistory(i):r instanceof co?this.restoreHistory(i,!0):r instanceof Ur&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,c=q(q({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",c)}else{let o=q(q({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Dl(e)))(s||e)}})(),e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),no=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(no||{});function ET(n,e){n.events.pipe(Hn(t=>t instanceof Ur||t instanceof er||t instanceof co||t instanceof Br),pe(t=>t instanceof Ur||t instanceof Br?no.COMPLETE:(t instanceof er?t.code===pt.Redirect||t.code===pt.SupersededByNewNavigation:!1)?no.REDIRECTING:no.FAILED),Hn(t=>t!==no.REDIRECTING),bi(1)).subscribe(()=>{e()})}function TT(n){throw n}var bT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cc=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=G(Xa),this.stateManager=G(qg),this.options=G(Nh,{optional:!0})||{},this.pendingTasks=G(Ja),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(yT),this.urlSerializer=G(Sh),this.location=G(ec),this.urlHandlingStrategy=G(Oh),this._events=new xr,this.errorHandler=this.options.errorHandler||TT,this.navigated=!1,this.routeReuseStrategy=G(vT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(xh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(Ph,{optional:!0}),this.eventsSubscription=new hm,this.isNgZoneEnabled=G(We)instanceof We&&We.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof er&&i.code!==pt.Redirect&&i.code!==pt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ur)this.navigated=!0;else if(i instanceof lo){let c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),d={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||wT(s.source)};this.scheduleNavigation(c,io,null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}RT(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),io,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let f=q({},s);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(o.state=f)}let d=this.parseUrl(r);this.scheduleNavigation(d,i,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Dh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:d,preserveFragment:f}=i,y=f?this.currentUrlTree.fragment:c,g=null;switch(d){case"merge":g=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let b;try{let N=s?s.snapshot:this.routerState.snapshot.root;b=Sg(N)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),b=this.currentUrlTree.root}return Rg(b,r,g,y??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Mi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,io,null,i)}navigate(r,i={skipLocationChange:!1}){return ST(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=q({},bT):i===!1?s=q({},AT):s=i,Mi(r))return hg(this.currentUrlTree,r,s);let o=this.parseUrl(r);return hg(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,c){if(this.disposed)return Promise.resolve(!1);let d,f,y;c?(d=c.resolve,f=c.reject,y=c.promise):y=new Promise((b,N)=>{d=b,f=N});let g=this.pendingTasks.add();return ET(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:d,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(b=>Promise.reject(b))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function ST(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new be(4008,!1)}function RT(n){return!(n instanceof uo)&&!(n instanceof lo)}var CT=new _e("");function rD(n,...e){return Gs([{provide:xh,multi:!0,useValue:n},[],{provide:Li,useFactory:PT,deps:[Cc]},{provide:Ol,multi:!0,useFactory:DT},e.map(t=>t.\u0275providers)])}function PT(n){return n.routerState.root}function DT(){let n=G(Jn);return e=>{let t=n.get(Za);if(e!==t.components[0])return;let r=n.get(Cc),i=n.get(kT);n.get(NT)===1&&r.initialNavigation(),n.get(xT,null,Pl.Optional)?.setUpPreloading(),n.get(CT,null,Pl.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var kT=new _e("",{factory:()=>new xr}),NT=new _e("",{providedIn:"root",factory:()=>1});var xT=new _e("");var zg=(()=>{let e=class e{constructor(){this.router=G(Cc)}saveInLocalStorage(r,i){return localStorage.setItem(r,JSON.stringify(i))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Kg=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},OT=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],d=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Hg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,d=i+2<n.length,f=d?n[i+2]:0,y=s>>2,g=(s&3)<<4|c>>4,b=(c&15)<<2|f>>6,N=f&63;d||(N=64,o||(b=64)),r.push(t[y],t[g],t[b],t[N])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Kg(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):OT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||f==null||g==null)throw new Vh;let b=s<<2|c>>4;if(r.push(b),f!==64){let N=c<<4&240|f>>2;if(r.push(N),g!==64){let V=f<<6&192|g;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Vh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},MT=function(n){let e=Kg(n);return Hg.encodeByteArray(e,!0)},wo=function(n){return MT(n).replace(/\./g,"")},Uh=function(n){try{return Hg.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var VT=()=>LT().__FIREBASE_DEFAULTS__,FT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},UT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Uh(n[1]);return e&&JSON.parse(e)},Dc=()=>{try{return VT()||FT()||UT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bh=n=>{var e,t;return(t=(e=Dc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Qg=n=>{let e=Bh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$h=()=>{var n;return(n=Dc())===null||n===void 0?void 0:n.config},jh=n=>{var e;return(e=Dc())===null||e===void 0?void 0:e[`_${n}`]};var Pc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Jg(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wo(JSON.stringify(t)),wo(JSON.stringify(o)),""].join(".")}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function BT(){var n;let e=(n=Dc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xg(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Zg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ey(){let n=$e();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ty(){return!BT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qh(){try{return typeof indexedDB=="object"}catch{return!1}}function ny(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var $T="FirebaseError",mt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$T,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}},mn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jT(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new mt(i,c,r)}};function jT(n,e){return n.replace(qT,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var qT=/\{\$([^}]+)}/g;function ry(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $r(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Wg(s)&&Wg(o)){if(!$r(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Wg(n){return n!==null&&typeof n=="object"}function vo(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ui(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Bi(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function iy(n,e){let t=new Fh(n,e);return t.subscribe.bind(t)}var Fh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zT(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Lh),i.error===void 0&&(i.error=Lh),i.complete===void 0&&(i.complete=Lh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zT(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lh(){}var lD=4*60*60*1e3;function Ke(n){return n&&n._delegate?n._delegate:n}var Tt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var jr="[DEFAULT]";var zh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Pc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WT(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GT(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GT(n){return n===jr?void 0:n}function WT(n){return n.instantiationMode==="EAGER"}var kc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new zh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var KT=[],re=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(re||{}),HT={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},QT=re.INFO,JT={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},YT=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=JT[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nr=class{constructor(e){this.name=e,this._logLevel=QT,this._logHandler=YT,this._userLogHandler=null,KT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var XT=(n,e)=>e.some(t=>n instanceof t),sy,oy;function ZT(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eb(){return oy||(oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ay=new WeakMap,Wh=new WeakMap,cy=new WeakMap,Gh=new WeakMap,Hh=new WeakMap;function tb(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Yt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&ay.set(t,n)}).catch(()=>{}),Hh.set(e,n),e}function nb(n){if(Wh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Wh.set(n,e)}var Kh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uy(n){Kh=n(Kh)}function rb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Nc(this),e,...t);return cy.set(r,e.sort?e.sort():[e]),Yt(r)}:eb().includes(n)?function(...e){return n.apply(Nc(this),e),Yt(ay.get(this))}:function(...e){return Yt(n.apply(Nc(this),e))}}function ib(n){return typeof n=="function"?rb(n):(n instanceof IDBTransaction&&nb(n),XT(n,ZT())?new Proxy(n,Kh):n)}function Yt(n){if(n instanceof IDBRequest)return tb(n);if(Gh.has(n))return Gh.get(n);let e=ib(n);return e!==n&&(Gh.set(n,e),Hh.set(e,n)),e}var Nc=n=>Hh.get(n);function hy(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=Yt(o);return r&&o.addEventListener("upgradeneeded",d=>{r(Yt(o.result),d.oldVersion,d.newVersion,Yt(o.transaction),d)}),t&&o.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}var sb=["get","getKey","getAll","getAllKeys","count"],ob=["put","add","delete","clear"],Qh=new Map;function ly(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qh.get(e))return Qh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ob.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sb.includes(t)))return;let s=function(o,...c){return E(this,null,function*(){let d=this.transaction(o,i?"readwrite":"readonly"),f=d.store;return r&&(f=f.index(c.shift())),(yield Promise.all([f[t](...c),i&&d.done]))[0]})};return Qh.set(e,s),s}uy(n=>xe(q({},n),{get:(e,t,r)=>ly(e,t)||n.get(e,t,r),has:(e,t)=>!!ly(e,t)||n.has(e,t)}));var Yh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ab(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function ab(n){let e=n.getComponent();return e?.type==="VERSION"}var Xh="@firebase/app",dy="0.10.3";var qr=new nr("@firebase/app"),cb="@firebase/app-compat",ub="@firebase/analytics-compat",lb="@firebase/analytics",hb="@firebase/app-check-compat",db="@firebase/app-check",fb="@firebase/auth",pb="@firebase/auth-compat",mb="@firebase/database",gb="@firebase/database-compat",yb="@firebase/functions",wb="@firebase/functions-compat",vb="@firebase/installations",_b="@firebase/installations-compat",Ib="@firebase/messaging",Eb="@firebase/messaging-compat",Tb="@firebase/performance",bb="@firebase/performance-compat",Ab="@firebase/remote-config",Sb="@firebase/remote-config-compat",Rb="@firebase/storage",Cb="@firebase/storage-compat",Pb="@firebase/firestore",Db="@firebase/vertexai-preview",kb="@firebase/firestore-compat",Nb="firebase",xb="10.12.0";var Zh="[DEFAULT]",Ob={[Xh]:"fire-core",[cb]:"fire-core-compat",[lb]:"fire-analytics",[ub]:"fire-analytics-compat",[db]:"fire-app-check",[hb]:"fire-app-check-compat",[fb]:"fire-auth",[pb]:"fire-auth-compat",[mb]:"fire-rtdb",[gb]:"fire-rtdb-compat",[yb]:"fire-fn",[wb]:"fire-fn-compat",[vb]:"fire-iid",[_b]:"fire-iid-compat",[Ib]:"fire-fcm",[Eb]:"fire-fcm-compat",[Tb]:"fire-perf",[bb]:"fire-perf-compat",[Ab]:"fire-rc",[Sb]:"fire-rc-compat",[Rb]:"fire-gcs",[Cb]:"fire-gcs-compat",[Pb]:"fire-fst",[kb]:"fire-fst-compat",[Db]:"fire-vertex","fire-js":"fire-js",[Nb]:"fire-js-all"};var _o=new Map,Mb=new Map,ed=new Map;function fy(n,e){try{n.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ir(n){let e=n.name;if(ed.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;ed.set(e,n);for(let t of _o.values())fy(t,n);for(let t of Mb.values())fy(t,n);return!0}function Eo(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nt(n){return n.settings!==void 0}var Lb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new mn("app","Firebase",Lb);var td=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}};var sr=xb;function yy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Zh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw rr.create("bad-app-name",{appName:String(i)});if(t||(t=$h()),!t)throw rr.create("no-options");let s=_o.get(i);if(s){if($r(t,s.options)&&$r(r,s.config))return s;throw rr.create("duplicate-app",{appName:i})}let o=new kc(i);for(let d of ed.values())o.addComponent(d);let c=new td(t,r,o);return _o.set(i,c),c}function $i(n=Zh){let e=_o.get(n);if(!e&&n===Zh&&$h())return yy();if(!e)throw rr.create("no-app",{appName:n});return e}function xc(){return Array.from(_o.values())}function je(n,e,t){var r;let i=(r=Ob[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(c.join(" "));return}ir(new Tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Vb="firebase-heartbeat-database",Fb=1,Io="firebase-heartbeat-store",Jh=null;function wy(){return Jh||(Jh=hy(Vb,Fb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Io)}catch(t){console.warn(t)}}}}).catch(n=>{throw rr.create("idb-open",{originalErrorMessage:n.message})})),Jh}function Ub(n){return E(this,null,function*(){try{let t=(yield wy()).transaction(Io),r=yield t.objectStore(Io).get(vy(n));return yield t.done,r}catch(e){if(e instanceof mt)qr.warn(e.message);else{let t=rr.create("idb-get",{originalErrorMessage:e?.message});qr.warn(t.message)}}})}function py(n,e){return E(this,null,function*(){try{let r=(yield wy()).transaction(Io,"readwrite");yield r.objectStore(Io).put(e,vy(n)),yield r.done}catch(t){if(t instanceof mt)qr.warn(t.message);else{let r=rr.create("idb-set",{originalErrorMessage:t?.message});qr.warn(r.message)}}})}function vy(n){return`${n.name}!${n.options.appId}`}var Bb=1024,$b=30*24*60*60*1e3,nd=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new rd(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=my();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=$b}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return E(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=my(),{heartbeatsToSend:r,unsentEntries:i}=jb(this._heartbeatsCache.heartbeats),s=wo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function my(){return new Date().toISOString().substring(0,10)}function jb(n,e=Bb){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gy(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gy(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var rd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return qh()?ny().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Ub(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return py(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return py(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function gy(n){return wo(JSON.stringify({version:2,heartbeats:n})).length}function qb(n){ir(new Tt("platform-logger",e=>new Yh(e),"PRIVATE")),ir(new Tt("heartbeat",e=>new nd(e),"PRIVATE")),je(Xh,dy,n),je(Xh,dy,"esm2017"),je("fire-js","")}qb("");var zb="firebase",Gb="10.12.0";je(zb,Gb,"app");var Gr=new Ya("ANGULARFIRE2_VERSION");function Mc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var To=(n,e)=>{let t=e?[e]:xc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},qi=class{constructor(){return To(Wb)}},Wb="app-check";function ji(){}var Oc=class{zone;delegate;constructor(e,t=pm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},id=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ji,{},ji,ji)),t.pipe(Be({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},zi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Oc(Zone.current)),this.insideAngular=t.run(()=>new Oc(Zone.current,fm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ue(We))};static \u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Kb(n){return Lc().ngZone.runOutsideAngular(()=>n())}function zr(n){return Lc().ngZone.run(()=>n())}function Hb(n){return Qb(Lc())(n)}function Qb(n){return function(t){return t=t.lift(new id(n.ngZone)),t.pipe(bl(n.outsideAngular),Tl(n.insideAngular))}}var Jb=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),zr(()=>n.apply(void 0,r))},xt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=zr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ji,{},ji,ji))),r[s]=Jb(r[s],t));let i=Kb(()=>n.apply(this,r));if(!e)if(i instanceof ln){let s=Lc();return i.pipe(bl(s.outsideAngular),Tl(s.insideAngular))}else return zr(()=>i);return i instanceof ln?i.pipe(Hb):i instanceof Promise?zr(()=>new Promise((s,o)=>i.then(c=>zr(()=>s(c)),c=>zr(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:zr(()=>i)};var gn=class{constructor(e){return e}},Wr=class{constructor(){return xc()}};function Yb(n){return n&&n.length===1?n[0]:new gn($i())}var sd=new _e("angularfire2._apps"),Xb={provide:gn,useFactory:Yb,deps:[[new at,sd]]},Zb={provide:Wr,deps:[[new at,sd]]};function e0(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gn(r)}}var t0=(()=>{class n{constructor(t){je("angularfire",Gr.full,"core"),je("angularfire",Gr.full,"app"),je("angular",qm.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ue(pn))};static \u0275mod=dn({type:n});static \u0275inj=hn({providers:[Xb,Zb]})}return n})();function HD(n,...e){return{ngModule:t0,providers:[{provide:sd,useFactory:e0(n),multi:!0,deps:[We,Jn,zi,...e]}]}}function Ly(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Vy=Ly,Fy=new mn("auth","Firebase",Ly());var jc=new nr("@firebase/auth");function n0(n,...e){jc.logLevel<=re.WARN&&jc.warn(`Auth (${sr}): ${n}`,...e)}function Fc(n,...e){jc.logLevel<=re.ERROR&&jc.error(`Auth (${sr}): ${n}`,...e)}function Zt(n,...e){throw Cd(n,...e)}function Kr(n,...e){return Cd(n,...e)}function Uy(n,e,t){let r=Object.assign(Object.assign({},Vy()),{[e]:t});return new mn("auth","Firebase",r).create(e,{appName:n.name})}function vn(n){return Uy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cd(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Fy.create(n,...e)}function H(n,e,...t){if(!n)throw Cd(e,...t)}function yn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Fc(e),new Error(e)}function ar(n,e){n||yn(e)}function ud(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function r0(){return _y()==="http:"||_y()==="https:"}function _y(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function i0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r0()||Xg()||"connection"in navigator)?navigator.onLine:!0}function s0(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Hr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ar(t>e,"Short delay should be less than long delay!"),this.isMobile=Yg()||Zg()}get(){return i0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Pd(n,e){ar(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var o0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var a0=new Hr(3e4,6e4);function cr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function _n(s,o,c,d){return E(this,arguments,function*(n,e,t,r,i={}){return By(n,i,()=>E(this,null,function*(){let f={},y={};r&&(e==="GET"?y=r:f={body:JSON.stringify(r)});let g=vo(Object.assign({key:n.config.apiKey},y)).slice(1),b=yield n._getAdditionalHeaders();return b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode),qc.fetch()($y(n,n.config.apiHost,t,g),Object.assign({method:e,headers:b,referrerPolicy:"no-referrer"},f))}))})}function By(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},o0),e);try{let i=new ld(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Vc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(n,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Vc(n,"email-already-in-use",o);if(d==="USER_DISABLED")throw Vc(n,"user-disabled",o);let y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Uy(n,y,f);Zt(n,y)}}catch(i){if(i instanceof mt)throw i;Zt(n,"network-request-failed",{message:String(i)})}})}function Do(s,o,c,d){return E(this,arguments,function*(n,e,t,r,i={}){let f=yield _n(n,e,t,r,i);return"mfaPendingCredential"in f&&Zt(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function $y(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Pd(n.config,i):`${n.config.apiScheme}://${i}`}function c0(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ld=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kr(this.auth,"network-request-failed")),a0.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Vc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Kr(n,e,r);return i.customData._tokenResponse=t,i}function Iy(n){return n!==void 0&&n.enterprise!==void 0}var hd=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return c0(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function u0(n,e){return E(this,null,function*(){return _n(n,"GET","/v2/recaptchaConfig",cr(n,e))})}function l0(n,e){return E(this,null,function*(){return _n(n,"POST","/v1/accounts:delete",e)})}function jy(n,e){return E(this,null,function*(){return _n(n,"POST","/v1/accounts:lookup",e)})}function bo(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Dd(n,e=!1){return E(this,null,function*(){let t=Ke(n),r=yield t.getIdToken(e),i=kd(r);H(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:bo(od(i.auth_time)),issuedAtTime:bo(od(i.iat)),expirationTime:bo(od(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function od(n){return Number(n)*1e3}function kd(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{let i=Uh(t);return i?JSON.parse(i):(Fc("Failed to decode base64 JWT payload"),null)}catch(i){return Fc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ey(n){let e=kd(n);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gi(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof mt&&h0(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function h0({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var dd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var So=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bo(this.lastLoginAt),this.creationTime=bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function zc(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Gi(n,jy(t,{idToken:r}));H(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qy(s.providerUserInfo):[],c=d0(n.providerData,o),d=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!c?.length,y=d?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new So(s.createdAt,s.lastLoginAt),isAnonymous:y};Object.assign(n,g)})}function Nd(n){return E(this,null,function*(){let e=Ke(n);yield zc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function d0(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qy(n){return n.map(e=>{var{providerId:t}=e,r=El(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function f0(n,e){return E(this,null,function*(){let t=yield By(n,{},()=>E(this,null,function*(){let r=vo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=$y(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",qc.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function p0(n,e){return E(this,null,function*(){return _n(n,"POST","/v2/accounts:revokeToken",cr(n,e))})}var Ao=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){H(e.length!==0,"internal-error");let t=Ey(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield f0(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return yn("not implemented")}};function or(n,e){H(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Wi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=El(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new So(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield Gi(this,this.stsTokenManager.getToken(this.auth,e));return H(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Dd(this,e)}reload(){return Nd(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield zc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Nt(this.auth.app))return Promise.reject(vn(this.auth));let e=yield this.getIdToken();return yield Gi(this,l0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,d,f,y;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(i=t.email)!==null&&i!==void 0?i:void 0,N=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,V=(o=t.photoURL)!==null&&o!==void 0?o:void 0,B=(c=t.tenantId)!==null&&c!==void 0?c:void 0,x=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,F=(f=t.createdAt)!==null&&f!==void 0?f:void 0,W=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:te,emailVerified:J,isAnonymous:Ie,providerData:se,stsTokenManager:C}=t;H(te&&C,e,"internal-error");let _=Ao.fromJSON(this.name,C);H(typeof te=="string",e,"internal-error"),or(g,e.name),or(b,e.name),H(typeof J=="boolean",e,"internal-error"),H(typeof Ie=="boolean",e,"internal-error"),or(N,e.name),or(V,e.name),or(B,e.name),or(x,e.name),or(F,e.name),or(W,e.name);let I=new n({uid:te,auth:e,email:b,emailVerified:J,displayName:g,isAnonymous:Ie,photoURL:V,phoneNumber:N,tenantId:B,stsTokenManager:_,createdAt:F,lastLoginAt:W});return se&&Array.isArray(se)&&(I.providerData=se.map(A=>Object.assign({},A))),x&&(I._redirectEventId=x),I}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Ao;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield zc(s),s})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];H(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?qy(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ao;c.updateFromIdToken(r);let d=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new So(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,f),d})}};var Ty=new Map;function wn(n){ar(n instanceof Function,"Expected a class definition");let e=Ty.get(n);return e?(ar(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ty.set(n,e),e)}var m0=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),fd=m0;function Uc(n,e,t){return`firebase:${n}:${e}:${t}`}var Gc=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Uc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Uc("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Wi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(wn(fd),e,r);let i=(yield Promise.all(t.map(f=>E(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),s=i[0]||wn(fd),o=Uc(r,e.config.apiKey,e.name),c=null;for(let f of t)try{let y=yield f._get(o);if(y){let g=Wi._fromJSON(e,y);f!==s&&(c=g),s=f;break}}catch{}let d=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new n(s,e,r):(s=d[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(f=>E(this,null,function*(){if(f!==s)try{yield f._remove(o)}catch{}}))),new n(s,e,r))})}};function by(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hy(e))return"Blackberry";if(Qy(e))return"Webos";if(xd(e))return"Safari";if((e.includes("chrome/")||Gy(e))&&!e.includes("edge/"))return"Chrome";if(Ky(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function zy(n=$e()){return/firefox\//i.test(n)}function xd(n=$e()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gy(n=$e()){return/crios\//i.test(n)}function Wy(n=$e()){return/iemobile/i.test(n)}function Ky(n=$e()){return/android/i.test(n)}function Hy(n=$e()){return/blackberry/i.test(n)}function Qy(n=$e()){return/webos/i.test(n)}function Zc(n=$e()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function g0(n=$e()){var e;return Zc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function y0(){return ey()&&document.documentMode===10}function Jy(n=$e()){return Zc(n)||Ky(n)||Qy(n)||Hy(n)||/windows phone/i.test(n)||Wy(n)}function w0(){try{return!!(window&&window!==window.top)}catch{return!1}}function Yy(n,e=[]){let t;switch(n){case"Browser":t=by($e());break;case"Worker":t=`${by($e())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sr}/${r}`}var pd=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let d=e(s);o(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function v0(t){return E(this,arguments,function*(n,e={}){return _n(n,"GET","/v2/passwordPolicy",cr(n,e))})}var _0=6,md=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:_0,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var gd=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wc(this),this.idTokenSubscription=new Wc(this),this.beforeStateQueue=new pd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wn(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Gc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield jy(this,{idToken:e}),r=yield Wi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Nt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield zc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=s0()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Nt(this.app))return Promise.reject(vn(this));let t=e?Ke(e):null;return t&&H(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Nt(this.app)?Promise.reject(vn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Nt(this.app)?Promise.reject(vn(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(wn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield v0(this),t=new md(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield p0(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&wn(e)||this._popupRedirectResolver;H(t,this,"argument-error"),this.redirectPersistenceManager=yield Gc.create(this,[wn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,r,i);return()=>{o=!0,d()}}else{let d=e.addObserver(t);return()=>{o=!0,d()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&n0(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Jr(n){return Ke(n)}var Wc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=iy(t=>this.observer=t)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var eu={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I0(n){eu=n}function Xy(n){return eu.loadJS(n)}function E0(){return eu.recaptchaEnterpriseScript}function T0(){return eu.gapiScript}function Zy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var b0="recaptcha-enterprise",A0="NO_RECAPTCHA",yd=class{constructor(e){this.type=b0,this.auth=Jr(e)}verify(e="verify",t=!1){return E(this,null,function*(){function r(s){return E(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>E(this,null,function*(){u0(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let f=new hd(d);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,o(f.siteKey)}}).catch(d=>{c(d)})}))})}function i(s,o,c){let d=window.grecaptcha;Iy(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(f=>{o(f)}).catch(()=>{o(A0)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(c=>{if(!t&&Iy(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=E0();d.length!==0&&(d+=c),Xy(d).then(()=>{i(c,s,o)}).catch(f=>{o(f)})}}).catch(c=>{o(c)})})})}};function Ay(n,e,t,r=!1){return E(this,null,function*(){let i=new yd(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function wd(n,e,t,r){return E(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Ay(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>E(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Ay(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function Od(n,e){let t=Eo(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if($r(s,e??{}))return i;Zt(i,"already-initialized")}return t.initialize({options:e})}function S0(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(wn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Md(n,e,t){let r=Jr(n);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=ew(e),{host:o,port:c}=R0(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||C0()}function ew(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function R0(n){let e=ew(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Sy(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Sy(o)}}}function Sy(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function C0(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ro=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yn("not implemented")}_getIdTokenResponse(e){return yn("not implemented")}_linkToIdToken(e,t){return yn("not implemented")}_getReauthenticationResolver(e){return yn("not implemented")}};function P0(n,e){return E(this,null,function*(){return _n(n,"POST","/v1/accounts:signUp",e)})}function D0(n,e){return E(this,null,function*(){return Do(n,"POST","/v1/accounts:signInWithPassword",cr(n,e))})}function k0(n,e){return E(this,null,function*(){return Do(n,"POST","/v1/accounts:signInWithEmailLink",cr(n,e))})}function N0(n,e){return E(this,null,function*(){return Do(n,"POST","/v1/accounts:signInWithEmailLink",cr(n,e))})}var Co=class n extends Ro{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,t,"signInWithPassword",D0);case"emailLink":return k0(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,r,"signUpPassword",P0);case"emailLink":return N0(e,{idToken:t,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ad(n,e){return E(this,null,function*(){return Do(n,"POST","/v1/accounts:signInWithIdp",cr(n,e))})}function x0(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function O0(n){let e=Ui(Bi(n)).link,t=e?Ui(Bi(e)).deep_link_id:null,r=Ui(Bi(n)).deep_link_id;return(r?Ui(Bi(r)).link:null)||r||t||e||n}var Kc=class n{constructor(e){var t,r,i,s,o,c;let d=Ui(Bi(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,g=x0((i=d.mode)!==null&&i!==void 0?i:null);H(f&&y&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=y,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=d.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=O0(e);try{return new n(t)}catch{return null}}};var tw=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Co._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Kc.parseLink(r);return H(i,"argument-error"),Co._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Hc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var vd=class extends Hc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function M0(n,e){return E(this,null,function*(){return Do(n,"POST","/v1/accounts:signUp",cr(n,e))})}var Ki=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let s=yield Wi._fromIdTokenResponse(e,r,i),o=Ry(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Ry(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Ry(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var _d=class n extends mt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function nw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(n,s,e,r):s})}function L0(n,e,t=!1){return E(this,null,function*(){let r=yield Gi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ki._forOperation(n,"link",r)})}function V0(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Nt(r.app))return Promise.reject(vn(r));let i="reauthenticate";try{let s=yield Gi(n,nw(r,i,e,n),t);H(s.idToken,r,"internal-error");let o=kd(s.idToken);H(o,r,"internal-error");let{sub:c}=o;return H(n.uid===c,r,"user-mismatch"),Ki._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Zt(r,"user-mismatch"),s}})}function rw(n,e,t=!1){return E(this,null,function*(){if(Nt(n.app))return Promise.reject(vn(n));let r="signIn",i=yield nw(n,r,e),s=yield Ki._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Ld(n,e){return E(this,null,function*(){return rw(Jr(n),e)})}function iw(n){return E(this,null,function*(){let e=Jr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Vd(n,e,t){return E(this,null,function*(){if(Nt(n.app))return Promise.reject(vn(n));let r=Jr(n),o=yield wd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",M0).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&iw(n),d}),c=yield Ki._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(c.user),c})}function Fd(n,e,t){return Nt(n.app)?Promise.reject(vn(n)):Ld(Ke(n),tw.credential(e,t)).catch(r=>E(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&iw(n),r}))}function F0(n,e){return E(this,null,function*(){return _n(n,"POST","/v1/accounts:update",e)})}function Ud(r,i){return E(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=Ke(n),c={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=yield Gi(s,F0(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;let f=s.providerData.find(({providerId:y})=>y==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),yield s._updateTokensIfNecessary(d)})}function tu(n,e,t,r){return Ke(n).onIdTokenChanged(e,t,r)}function Bd(n,e,t){return Ke(n).beforeAuthStateChanged(e,t)}function nu(n,e,t,r){return Ke(n).onAuthStateChanged(e,t,r)}var Qc="__sak";var Jc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function U0(){let n=$e();return xd(n)||Zc(n)}var B0=1e3,$0=10,j0=(()=>{class n extends Jc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=U0()&&w0(),this.fallbackToPolling=Jy(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}let i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(i);if(t.newValue!==c)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);y0()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,$0):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},B0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield Wn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield Wn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield Wn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),sw=j0;var q0=(()=>{class n extends Jc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),$d=q0;function z0(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var G0=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let d=Array.from(c).map(y=>E(this,null,function*(){return y(r.origin,o)})),f=yield z0(d);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function ow(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Id=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,d)=>{let f=ow("",20);i.port1.start();let y=setTimeout(()=>{d(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let b=g;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(y),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(b.data.response);break;default:clearTimeout(y),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Xt(){return window}function W0(n){Xt().location.href=n}function aw(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}function K0(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function H0(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Q0(){return aw()?self:null}var cw="firebaseLocalStorageDb",J0=1,Yc="firebaseLocalStorage",uw="fbase_key",Qr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ru(n,e){return n.transaction([Yc],e?"readwrite":"readonly").objectStore(Yc)}function Y0(){let n=indexedDB.deleteDatabase(cw);return new Qr(n).toPromise()}function Ed(){let n=indexedDB.open(cw,J0);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Yc,{keyPath:uw})}catch(i){t(i)}}),n.addEventListener("success",()=>E(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Yc)?e(r):(r.close(),yield Y0(),e(yield Ed()))}))})}function Cy(n,e,t){return E(this,null,function*(){let r=ru(n,!0).put({[uw]:e,value:t});return new Qr(r).toPromise()})}function X0(n,e){return E(this,null,function*(){let t=ru(n,!1).get(e),r=yield new Qr(t).toPromise();return r===void 0?null:r.value})}function Py(n,e){let t=ru(n,!0).delete(e);return new Qr(t).toPromise()}var Z0=800,eA=3,tA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield Ed(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>eA)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return aw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=G0._getInstance(Q0()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield K0(),!this.activeServiceWorker)return;this.sender=new Id(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||H0()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ed();return yield Cy(t,Qc,"1"),yield Py(t,Qc),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>Cy(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>X0(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>Py(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=ru(s,!1).getAll();return new Qr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),Z0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lw=tA;var nk=Zy("rcb"),rk=new Hr(3e4,6e4);function nA(n,e){return e?wn(e):(H(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Po=class extends Ro{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ad(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ad(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ad(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function rA(n){return rw(n.auth,new Po(n),n.bypassAuthState)}function iA(n){let{auth:e,user:t}=n;return H(t,e,"internal-error"),V0(t,new Po(n),n.bypassAuthState)}function sA(n){return E(this,null,function*(){let{auth:e,user:t}=n;return H(t,e,"internal-error"),L0(t,new Po(n),n.bypassAuthState)})}var Td=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(d))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rA;case"linkViaPopup":case"linkViaRedirect":return sA;case"reauthViaPopup":case"reauthViaRedirect":return iA;default:Zt(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ik=new Hr(2e3,1e4);var oA="pendingRedirect",Bc=new Map,bd=class n extends Td{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Bc.get(this.auth._key());if(!e){try{let r=(yield aA(this.resolver,this.auth))?yield Wn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Wn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Wn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function aA(n,e){return E(this,null,function*(){let t=lA(e),r=uA(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function cA(n,e){Bc.set(n._key(),e)}function uA(n){return wn(n._redirectPersistence)}function lA(n){return Uc(oA,n.config.apiKey,n.name)}function hA(n,e,t=!1){return E(this,null,function*(){if(Nt(n.app))return Promise.reject(vn(n));let r=Jr(n),i=nA(r,e),o=yield new bd(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var dA=10*60*1e3,Ad=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hw(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Kr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dy(e))}saveEventToCache(e){this.cachedEventUids.add(Dy(e)),this.lastProcessedEventTime=Date.now()}};function Dy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function fA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hw(n);default:return!1}}function pA(t){return E(this,arguments,function*(n,e={}){return _n(n,"GET","/v1/projects",e)})}var mA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gA=/^https?/;function yA(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield pA(n);for(let t of e)try{if(wA(t))return}catch{}Zt(n,"unauthorized-domain")})}function wA(n){let e=ud(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!gA.test(t))return!1;if(mA.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var vA=new Hr(3e4,6e4);function ky(){let n=Xt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _A(n){return new Promise((e,t)=>{var r,i,s;function o(){ky(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ky(),t(Kr(n,"network-request-failed"))},timeout:vA.get()})}if(!((i=(r=Xt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xt().gapi)===null||s===void 0)&&s.load)o();else{let c=Zy("iframefcb");return Xt()[c]=()=>{gapi.load?o():t(Kr(n,"network-request-failed"))},Xy(`${T0()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw $c=null,e})}var $c=null;function IA(n){return $c=$c||_A(n),$c}var EA=new Hr(5e3,15e3),TA="__/auth/iframe",bA="emulator/auth/iframe",AA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RA(n){let e=n.config;H(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Pd(e,bA):`https://${n.config.authDomain}/${TA}`,r={apiKey:e.apiKey,appName:n.name,v:sr},i=SA.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${vo(r).slice(1)}`}function CA(n){return E(this,null,function*(){let e=yield IA(n),t=Xt().gapi;return H(t,n,"internal-error"),e.open({where:document.body,url:RA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AA,dontclear:!0},r=>new Promise((i,s)=>E(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Kr(n,"network-request-failed"),c=Xt().setTimeout(()=>{s(o)},EA.get());function d(){Xt().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{s(o)})})))})}var PA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DA=500,kA=600,NA="_blank",xA="http://localhost",Xc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function OA(n,e,t,r=DA,i=kA){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",d=Object.assign(Object.assign({},PA),{width:r.toString(),height:i.toString(),top:s,left:o}),f=$e().toLowerCase();t&&(c=Gy(f)?NA:t),zy(f)&&(e=e||xA,d.scrollbars="yes");let y=Object.entries(d).reduce((b,[N,V])=>`${b}${N}=${V},`,"");if(g0(f)&&c!=="_self")return MA(e||"",c),new Xc(null);let g=window.open(e||"",c,y);H(g,n,"popup-blocked");try{g.focus()}catch{}return new Xc(g)}function MA(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var LA="__/auth/handler",VA="emulator/auth/handler",FA=encodeURIComponent("fac");function Ny(n,e,t,r,i,s){return E(this,null,function*(){H(n.config.authDomain,n,"auth-domain-config-required"),H(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:sr,eventId:i};if(e instanceof Hc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ry(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[y,g]of Object.entries(s||{}))o[y]=g}if(e instanceof vd){let y=e.getScopes().filter(g=>g!=="");y.length>0&&(o.scopes=y.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let y of Object.keys(c))c[y]===void 0&&delete c[y];let d=yield n._getAppCheckToken(),f=d?`#${FA}=${encodeURIComponent(d)}`:"";return`${UA(n)}?${vo(c).slice(1)}${f}`})}function UA({config:n}){return n.emulator?Pd(n,VA):`https://${n.authDomain}/${LA}`}var cd="webStorageSupport",Sd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$d,this._completeRedirectFn=hA,this._overrideRedirectResult=cA}_openPopup(e,t,r,i){return E(this,null,function*(){var s;ar((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Ny(e,t,r,ud(),i);return OA(e,o,ow())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let s=yield Ny(e,t,r,ud(),i);return W0(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ar(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield CA(e),r=new Ad(e);return t.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cd,{type:cd},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[cd];o!==void 0&&t(!!o),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jy()||xd()||Zc()}},dw=Sd;var xy="@firebase/auth",Oy="1.7.3";var Rd=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function BA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $A(n){ir(new Tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yy(n)},f=new gd(r,i,s,d);return S0(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ir(new Tt("auth-internal",e=>{let t=Jr(e.getProvider("auth").getImmediate());return(r=>new Rd(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),je(xy,Oy,BA(n)),je(xy,Oy,"esm2017")}var jA=5*60,qA=jh("authIdTokenMaxAge")||jA,My=null,zA=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qA)return;let i=t?.token;My!==i&&(My=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function jd(n=$i()){let e=Eo(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Od(n,{popupRedirectResolver:dw,persistence:[lw,sw,$d]}),r=jh("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=zA(s.toString());Bd(t,o,()=>o(t.currentUser)),tu(t,c=>o(c))}}let i=Bh("auth");return i&&Md(t,`http://${i}`),t}function GA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}I0({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Kr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",GA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$A("Browser");function pw(n){return new ln(function(e){var t=nu(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var mw="auth",Yr=class{constructor(e){return e}},ko=class{constructor(){return To(mw)}};var qd=new _e("angularfire2.auth-instances");function NS(n,e){let t=Mc(mw,n,e);return t&&new Yr(t)}function xS(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Yr(r)}}var OS={provide:ko,deps:[[new at,qd]]},MS={provide:Yr,useFactory:NS,deps:[[new at,qd],gn]},LS=(()=>{class n{constructor(){je("angularfire",Gr.full,"auth")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dn({type:n});static \u0275inj=hn({providers:[MS,OS]})}return n})();function Hk(n,...e){return{ngModule:LS,providers:[{provide:qd,useFactory:xS(n),multi:!0,deps:[We,Jn,zi,Wr,[new at,qi],...e]}]}}var Qk=xt(pw,!0);var gw=xt(Vd,!0);var Hi=xt(jd,!0);var yw=xt(Fd,!0);var ww=xt(Ud,!0);var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_w={};var ur,zd;(function(){var n;function e(C,_){function I(){}I.prototype=_.prototype,C.D=_.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(A,S,R){for(var T=Array(arguments.length-2),At=2;At<arguments.length;At++)T[At-2]=arguments[At];return _.prototype[S].apply(A,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,I){I||(I=0);var A=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)A[S]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(S=0;16>S;++S)A[S]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=C.g[0],I=C.g[1],S=C.g[2];var R=C.g[3],T=_+(R^I&(S^R))+A[0]+3614090360&4294967295;_=I+(T<<7&4294967295|T>>>25),T=R+(S^_&(I^S))+A[1]+3905402710&4294967295,R=_+(T<<12&4294967295|T>>>20),T=S+(I^R&(_^I))+A[2]+606105819&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(_^S&(R^_))+A[3]+3250441966&4294967295,I=S+(T<<22&4294967295|T>>>10),T=_+(R^I&(S^R))+A[4]+4118548399&4294967295,_=I+(T<<7&4294967295|T>>>25),T=R+(S^_&(I^S))+A[5]+1200080426&4294967295,R=_+(T<<12&4294967295|T>>>20),T=S+(I^R&(_^I))+A[6]+2821735955&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(_^S&(R^_))+A[7]+4249261313&4294967295,I=S+(T<<22&4294967295|T>>>10),T=_+(R^I&(S^R))+A[8]+1770035416&4294967295,_=I+(T<<7&4294967295|T>>>25),T=R+(S^_&(I^S))+A[9]+2336552879&4294967295,R=_+(T<<12&4294967295|T>>>20),T=S+(I^R&(_^I))+A[10]+4294925233&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(_^S&(R^_))+A[11]+2304563134&4294967295,I=S+(T<<22&4294967295|T>>>10),T=_+(R^I&(S^R))+A[12]+1804603682&4294967295,_=I+(T<<7&4294967295|T>>>25),T=R+(S^_&(I^S))+A[13]+4254626195&4294967295,R=_+(T<<12&4294967295|T>>>20),T=S+(I^R&(_^I))+A[14]+2792965006&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(_^S&(R^_))+A[15]+1236535329&4294967295,I=S+(T<<22&4294967295|T>>>10),T=_+(S^R&(I^S))+A[1]+4129170786&4294967295,_=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(_^I))+A[6]+3225465664&4294967295,R=_+(T<<9&4294967295|T>>>23),T=S+(_^I&(R^_))+A[11]+643717713&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^_&(S^R))+A[0]+3921069994&4294967295,I=S+(T<<20&4294967295|T>>>12),T=_+(S^R&(I^S))+A[5]+3593408605&4294967295,_=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(_^I))+A[10]+38016083&4294967295,R=_+(T<<9&4294967295|T>>>23),T=S+(_^I&(R^_))+A[15]+3634488961&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^_&(S^R))+A[4]+3889429448&4294967295,I=S+(T<<20&4294967295|T>>>12),T=_+(S^R&(I^S))+A[9]+568446438&4294967295,_=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(_^I))+A[14]+3275163606&4294967295,R=_+(T<<9&4294967295|T>>>23),T=S+(_^I&(R^_))+A[3]+4107603335&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^_&(S^R))+A[8]+1163531501&4294967295,I=S+(T<<20&4294967295|T>>>12),T=_+(S^R&(I^S))+A[13]+2850285829&4294967295,_=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(_^I))+A[2]+4243563512&4294967295,R=_+(T<<9&4294967295|T>>>23),T=S+(_^I&(R^_))+A[7]+1735328473&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^_&(S^R))+A[12]+2368359562&4294967295,I=S+(T<<20&4294967295|T>>>12),T=_+(I^S^R)+A[5]+4294588738&4294967295,_=I+(T<<4&4294967295|T>>>28),T=R+(_^I^S)+A[8]+2272392833&4294967295,R=_+(T<<11&4294967295|T>>>21),T=S+(R^_^I)+A[11]+1839030562&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^_)+A[14]+4259657740&4294967295,I=S+(T<<23&4294967295|T>>>9),T=_+(I^S^R)+A[1]+2763975236&4294967295,_=I+(T<<4&4294967295|T>>>28),T=R+(_^I^S)+A[4]+1272893353&4294967295,R=_+(T<<11&4294967295|T>>>21),T=S+(R^_^I)+A[7]+4139469664&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^_)+A[10]+3200236656&4294967295,I=S+(T<<23&4294967295|T>>>9),T=_+(I^S^R)+A[13]+681279174&4294967295,_=I+(T<<4&4294967295|T>>>28),T=R+(_^I^S)+A[0]+3936430074&4294967295,R=_+(T<<11&4294967295|T>>>21),T=S+(R^_^I)+A[3]+3572445317&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^_)+A[6]+76029189&4294967295,I=S+(T<<23&4294967295|T>>>9),T=_+(I^S^R)+A[9]+3654602809&4294967295,_=I+(T<<4&4294967295|T>>>28),T=R+(_^I^S)+A[12]+3873151461&4294967295,R=_+(T<<11&4294967295|T>>>21),T=S+(R^_^I)+A[15]+530742520&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^_)+A[2]+3299628645&4294967295,I=S+(T<<23&4294967295|T>>>9),T=_+(S^(I|~R))+A[0]+4096336452&4294967295,_=I+(T<<6&4294967295|T>>>26),T=R+(I^(_|~S))+A[7]+1126891415&4294967295,R=_+(T<<10&4294967295|T>>>22),T=S+(_^(R|~I))+A[14]+2878612391&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~_))+A[5]+4237533241&4294967295,I=S+(T<<21&4294967295|T>>>11),T=_+(S^(I|~R))+A[12]+1700485571&4294967295,_=I+(T<<6&4294967295|T>>>26),T=R+(I^(_|~S))+A[3]+2399980690&4294967295,R=_+(T<<10&4294967295|T>>>22),T=S+(_^(R|~I))+A[10]+4293915773&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~_))+A[1]+2240044497&4294967295,I=S+(T<<21&4294967295|T>>>11),T=_+(S^(I|~R))+A[8]+1873313359&4294967295,_=I+(T<<6&4294967295|T>>>26),T=R+(I^(_|~S))+A[15]+4264355552&4294967295,R=_+(T<<10&4294967295|T>>>22),T=S+(_^(R|~I))+A[6]+2734768916&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~_))+A[13]+1309151649&4294967295,I=S+(T<<21&4294967295|T>>>11),T=_+(S^(I|~R))+A[4]+4149444226&4294967295,_=I+(T<<6&4294967295|T>>>26),T=R+(I^(_|~S))+A[11]+3174756917&4294967295,R=_+(T<<10&4294967295|T>>>22),T=S+(_^(R|~I))+A[2]+718787259&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~_))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+R&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var I=_-this.blockSize,A=this.B,S=this.h,R=0;R<_;){if(S==0)for(;R<=I;)i(this,C,R),R+=this.blockSize;if(typeof C=="string"){for(;R<_;)if(A[S++]=C.charCodeAt(R++),S==this.blockSize){i(this,A),S=0;break}}else for(;R<_;)if(A[S++]=C[R++],S==this.blockSize){i(this,A),S=0;break}}this.h=S,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var I=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=I&255,I/=256;for(this.u(C),C=Array(16),_=I=0;4>_;++_)for(var A=0;32>A;A+=8)C[I++]=this.g[_]>>>A&255;return C};function s(C,_){var I=c;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=_(C)}function o(C,_){this.h=_;for(var I=[],A=!0,S=C.length-1;0<=S;S--){var R=C[S]|0;A&&R==_||(I[S]=R,A=!1)}this.g=I}var c={};function d(C){return-128<=C&&128>C?s(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return g;if(0>C)return x(f(-C));for(var _=[],I=1,A=0;C>=I;A++)_[A]=C/I|0,I*=4294967296;return new o(_,0)}function y(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return x(y(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=f(Math.pow(_,8)),A=g,S=0;S<C.length;S+=8){var R=Math.min(8,C.length-S),T=parseInt(C.substring(S,S+R),_);8>R?(R=f(Math.pow(_,R)),A=A.j(R).add(f(T))):(A=A.j(I),A=A.add(f(T)))}return A}var g=d(0),b=d(1),N=d(16777216);n=o.prototype,n.m=function(){if(B(this))return-x(this).m();for(var C=0,_=1,I=0;I<this.g.length;I++){var A=this.i(I);C+=(0<=A?A:4294967296+A)*_,_*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(B(this))return"-"+x(this).toString(C);for(var _=f(Math.pow(C,6)),I=this,A="";;){var S=J(I,_).g;I=F(I,S.j(_));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=S,V(I))return R+A;for(;6>R.length;)R="0"+R;A=R+A}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function B(C){return C.h==-1}n.l=function(C){return C=F(this,C),B(C)?-1:V(C)?0:1};function x(C){for(var _=C.g.length,I=[],A=0;A<_;A++)I[A]=~C.g[A];return new o(I,~C.h).add(b)}n.abs=function(){return B(this)?x(this):this},n.add=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],A=0,S=0;S<=_;S++){var R=A+(this.i(S)&65535)+(C.i(S)&65535),T=(R>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);A=T>>>16,R&=65535,T&=65535,I[S]=T<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function F(C,_){return C.add(x(_))}n.j=function(C){if(V(this)||V(C))return g;if(B(this))return B(C)?x(this).j(x(C)):x(x(this).j(C));if(B(C))return x(this.j(x(C)));if(0>this.l(N)&&0>C.l(N))return f(this.m()*C.m());for(var _=this.g.length+C.g.length,I=[],A=0;A<2*_;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var S=0;S<C.g.length;S++){var R=this.i(A)>>>16,T=this.i(A)&65535,At=C.i(S)>>>16,Cn=C.i(S)&65535;I[2*A+2*S]+=T*Cn,W(I,2*A+2*S),I[2*A+2*S+1]+=R*Cn,W(I,2*A+2*S+1),I[2*A+2*S+1]+=T*At,W(I,2*A+2*S+1),I[2*A+2*S+2]+=R*At,W(I,2*A+2*S+2)}for(A=0;A<_;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=_;A<2*_;A++)I[A]=0;return new o(I,0)};function W(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function te(C,_){this.g=C,this.h=_}function J(C,_){if(V(_))throw Error("division by zero");if(V(C))return new te(g,g);if(B(C))return _=J(x(C),_),new te(x(_.g),x(_.h));if(B(_))return _=J(C,x(_)),new te(x(_.g),_.h);if(30<C.g.length){if(B(C)||B(_))throw Error("slowDivide_ only works with positive integers.");for(var I=b,A=_;0>=A.l(C);)I=Ie(I),A=Ie(A);var S=se(I,1),R=se(A,1);for(A=se(A,2),I=se(I,2);!V(A);){var T=R.add(A);0>=T.l(C)&&(S=S.add(I),R=T),A=se(A,1),I=se(I,1)}return _=F(C,S.j(_)),new te(S,_)}for(S=g;0<=C.l(_);){for(I=Math.max(1,Math.floor(C.m()/_.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),R=f(I),T=R.j(_);B(T)||0<T.l(C);)I-=A,R=f(I),T=R.j(_);V(R)&&(R=b),S=S.add(R),C=F(C,T)}return new te(S,C)}n.A=function(C){return J(this,C).h},n.and=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)&C.i(A);return new o(I,this.h&C.h)},n.or=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)|C.i(A);return new o(I,this.h|C.h)},n.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)^C.i(A);return new o(I,this.h^C.h)};function Ie(C){for(var _=C.g.length+1,I=[],A=0;A<_;A++)I[A]=C.i(A)<<1|C.i(A-1)>>>31;return new o(I,C.h)}function se(C,_){var I=_>>5;_%=32;for(var A=C.g.length-I,S=[],R=0;R<A;R++)S[R]=0<_?C.i(R+I)>>>_|C.i(R+I+1)<<32-_:C.i(R+I);return new o(S,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zd=_w.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=y,ur=_w.Integer=o}).apply(typeof vw<"u"?vw:typeof self<"u"?self:typeof window<"u"?window:{});var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},In={};var Gd,Wd,Qi,Kd,No,su,Hd,Qd,Jd;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof iu=="object"&&iu];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var P=a[w];if(!(P in p))break e;p=p[P]}a=a[a.length-1],w=p[a],h=h(w),h!=w&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var p=0,w=!1,P={next:function(){if(!w&&p<a.length){var k=p++;return{value:h(k,a[k]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,p){return p})}});var o=o||{},c=this||self;function d(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function f(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function y(a,h,p){return a.call.apply(a.bind,arguments)}function g(a,h,p){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),a.apply(h,P)}}return function(){return a.apply(h,arguments)}}function b(a,h,p){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:g,b.apply(null,arguments)}function N(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function V(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(w,P,k){for(var L=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)L[fe-2]=arguments[fe];return h.prototype[P].apply(w,L)}}function B(a){let h=a.length;if(0<h){let p=Array(h);for(let w=0;w<h;w++)p[w]=a[w];return p}return[]}function x(a,h){for(let p=1;p<arguments.length;p++){let w=arguments[p];if(d(w)){let P=a.length||0,k=w.length||0;a.length=P+k;for(let L=0;L<k;L++)a[P+L]=w[L]}else a.push(w)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function W(a){return/^[\s\xa0]*$/.test(a)}function te(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function J(a){return J[" "](a),a}J[" "]=function(){};var Ie=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function se(a,h,p){for(let w in a)h.call(p,a[w],w,a)}function C(a,h){for(let p in a)h.call(void 0,a[p],p,a)}function _(a){let h={};for(let p in a)h[p]=a[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,h){let p,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(p in w)a[p]=w[p];for(let k=0;k<I.length;k++)p=I[k],Object.prototype.hasOwnProperty.call(w,p)&&(a[p]=w[p])}}function S(a){var h=1;a=a.split(":");let p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function R(a){c.setTimeout(()=>{throw a},0)}function T(){var a=Dn;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class At{constructor(){this.h=this.g=null}add(h,p){let w=Cn.get();w.set(h,p),this.h?this.h.next=w:this.g=w,this.h=w}}var Cn=new F(()=>new gs,a=>a.reset());class gs{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Pn,cn=!1,Dn=new At,ct=()=>{let a=c.Promise.resolve(void 0);Pn=()=>{a.then(kn)}};var kn=()=>{for(var a;a=T();){try{a.h.call(a.g)}catch(p){R(p)}var h=Cn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}cn=!1};function Xe(){this.s=this.s,this.C=this.C}Xe.prototype.s=!1,Xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}qe.prototype.h=function(){this.defaultPrevented=!0};var Nn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return a}();function St(a,h){if(qe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(Ie){e:{try{J(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ia[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&St.aa.h.call(this)}}V(St,qe);var ia={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),ys=0;function tl(a,h,p,w,P){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!w,this.ha=P,this.key=++ys,this.da=this.fa=!1}function xn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function On(a){this.src=a,this.g={},this.h=0}On.prototype.add=function(a,h,p,w,P){var k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);var L=ws(a,h,w,P);return-1<L?(h=a[L],p||(h.fa=!1)):(h=new tl(h,this.src,k,!!w,P),h.fa=p,a.push(h)),h};function Mn(a,h){var p=h.type;if(p in a.g){var w=a.g[p],P=Array.prototype.indexOf.call(w,h,void 0),k;(k=0<=P)&&Array.prototype.splice.call(w,P,1),k&&(xn(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function ws(a,h,p,w){for(var P=0;P<a.length;++P){var k=a[P];if(!k.da&&k.listener==h&&k.capture==!!p&&k.ha==w)return P}return-1}var Qe="closure_lm_"+(1e6*Math.random()|0),ut={};function sa(a,h,p,w,P){if(w&&w.once)return vs(a,h,p,w,P);if(Array.isArray(h)){for(var k=0;k<h.length;k++)sa(a,h[k],p,w,P);return null}return p=De(p),a&&a[Ut]?a.K(h,p,f(w)?!!w.capture:!!w,P):Ze(a,h,p,!1,w,P)}function Ze(a,h,p,w,P,k){if(!h)throw Error("Invalid event type");var L=f(P)?!!P.capture:!!P,fe=Rt(a);if(fe||(a[Qe]=fe=new On(a)),p=fe.add(h,p,w,L,k),p.proxy)return p;if(w=ui(),p.proxy=w,w.src=a,w.listener=p,a.addEventListener)Nn||(P=L),P===void 0&&(P=!1),a.addEventListener(h.toString(),w,P);else if(a.attachEvent)a.attachEvent(lt(h.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ui(){function a(p){return h.call(a.src,a.listener,p)}let h=Bt;return a}function vs(a,h,p,w,P){if(Array.isArray(h)){for(var k=0;k<h.length;k++)vs(a,h[k],p,w,P);return null}return p=De(p),a&&a[Ut]?a.L(h,p,f(w)?!!w.capture:!!w,P):Ze(a,h,p,!0,w,P)}function _s(a,h,p,w,P){if(Array.isArray(h))for(var k=0;k<h.length;k++)_s(a,h[k],p,w,P);else w=f(w)?!!w.capture:!!w,p=De(p),a&&a[Ut]?(a=a.i,h=String(h).toString(),h in a.g&&(k=a.g[h],p=ws(k,p,w,P),-1<p&&(xn(k[p]),Array.prototype.splice.call(k,p,1),k.length==0&&(delete a.g[h],a.h--)))):a&&(a=Rt(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ws(h,p,w,P)),(p=-1<a?h[a]:null)&&ne(p))}function ne(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ut])Mn(h.i,a);else{var p=a.type,w=a.proxy;h.removeEventListener?h.removeEventListener(p,w,a.capture):h.detachEvent?h.detachEvent(lt(p),w):h.addListener&&h.removeListener&&h.removeListener(w),(p=Rt(h))?(Mn(p,a),p.h==0&&(p.src=null,h[Qe]=null)):xn(a)}}}function lt(a){return a in ut?ut[a]:ut[a]="on"+a}function Bt(a,h){if(a.da)a=!0;else{h=new St(h,this);var p=a.listener,w=a.ha||a.src;a.fa&&ne(a),a=p.call(w,h)}return a}function Rt(a){return a=a[Qe],a instanceof On?a:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(a){return typeof a=="function"?a:(a[Se]||(a[Se]=function(h){return a.handleEvent(h)}),a[Se])}function ke(){Xe.call(this),this.i=new On(this),this.M=this,this.F=null}V(ke,Xe),ke.prototype[Ut]=!0,ke.prototype.removeEventListener=function(a,h,p,w){_s(this,a,h,p,w)};function ze(a,h){var p,w=a.F;if(w)for(p=[];w;w=w.F)p.push(w);if(a=a.M,w=h.type||h,typeof h=="string")h=new qe(h,a);else if(h instanceof qe)h.target=h.target||a;else{var P=h;h=new qe(w,a),A(h,P)}if(P=!0,p)for(var k=p.length-1;0<=k;k--){var L=h.g=p[k];P=$t(L,w,!0,h)&&P}if(L=h.g=a,P=$t(L,w,!0,h)&&P,P=$t(L,w,!1,h)&&P,p)for(k=0;k<p.length;k++)L=h.g=p[k],P=$t(L,w,!1,h)&&P}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],w=0;w<p.length;w++)xn(p[w]);delete a.g[h],a.h--}}this.F=null},ke.prototype.K=function(a,h,p,w){return this.i.add(String(a),h,!1,p,w)},ke.prototype.L=function(a,h,p,w){return this.i.add(String(a),h,!0,p,w)};function $t(a,h,p,w){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,k=0;k<h.length;++k){var L=h[k];if(L&&!L.da&&L.capture==p){var fe=L.listener,Fe=L.ha||L.src;L.fa&&Mn(a.i,L),P=fe.call(Fe,w)!==!1&&P}}return P&&!w.defaultPrevented}function Je(a,h,p){if(typeof a=="function")p&&(a=b(a,p));else if(a&&typeof a.handleEvent=="function")a=b(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function oa(a){a.g=Je(()=>{a.g=null,a.i&&(a.i=!1,oa(a))},a.l);let h=a.h;a.h=null,a.m.apply(null,h)}class aa extends Xe{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:oa(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(a){Xe.call(this),this.h=a,this.g={}}V(Ln,Xe);var li=[];function ca(a){se(a.g,function(h,p){this.g.hasOwnProperty(p)&&ne(h)},a),a.g={}}Ln.prototype.N=function(){Ln.aa.N.call(this),ca(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=c.JSON.stringify,nl=c.JSON.parse,rl=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ct(){}Ct.prototype.h=null;function ua(a){return a.h||(a.h=a.i())}function la(){}var yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Es(){qe.call(this,"d")}V(Es,qe);function Ts(){qe.call(this,"c")}V(Ts,qe);var Pt={},ha=null;function hi(){return ha=ha||new ke}Pt.La="serverreachability";function da(a){qe.call(this,Pt.La,a)}V(da,qe);function wr(a){let h=hi();ze(h,new da(h))}Pt.STAT_EVENT="statevent";function fa(a,h){qe.call(this,Pt.STAT_EVENT,a),this.stat=h}V(fa,qe);function Ve(a){let h=hi();ze(h,new fa(h,a))}Pt.Ma="timingevent";function pa(a,h){qe.call(this,Pt.Ma,a),this.size=h}V(pa,qe);function vr(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function il(a,h,p,w,P,k){a.info(function(){if(a.g)if(k)for(var L="",fe=k.split("&"),Fe=0;Fe<fe.length;Fe++){var oe=fe[Fe].split("=");if(1<oe.length){var Ge=oe[0];oe=oe[1];var Ue=Ge.split("_");L=2<=Ue.length&&Ue[1]=="type"?L+(Ge+"="+oe+"&"):L+(Ge+"=redacted&")}}else L=null;else L=k;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+h+`
`+p+`
`+L})}function sl(a,h,p,w,P,k,L){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+h+`
`+p+`
`+k+" "+L})}function he(a,h,p,w){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+al(a,p)+(w?" "+w:"")})}function ol(a,h){a.info(function(){return"TIMEOUT: "+h})}_r.prototype.info=function(){};function al(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var w=p[a];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if(k!="noop"&&k!="stop"&&k!="close")for(var L=1;L<P.length;L++)P[L]=""}}}}return Is(p)}catch{return h}}var di={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ma={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function fi(){}V(fi,Ct),fi.prototype.g=function(){return new XMLHttpRequest},fi.prototype.i=function(){return{}},bs=new fi;function yt(a,h,p,w){this.j=a,this.i=h,this.l=p,this.R=w||1,this.U=new Ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vn}function Vn(){this.i=null,this.g="",this.h=!1}var As={},Fn={};function we(a,h,p){a.L=1,a.v=mi(wt(h)),a.m=p,a.P=!0,ga(a,null)}function ga(a,h){a.F=Date.now(),Ir(a),a.A=wt(a.v);var p=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),Na(p.i,"t",w),a.C=0,p=a.j.J,a.h=new Vn,a.g=Bs(a.j,p?h:null,!a.m),0<a.O&&(a.M=new aa(b(a.Y,a,a.g),a.O)),h=a.U,p=a.g,w=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(li[0]=P.toString()),P=li);for(var k=0;k<P.length;k++){var L=sa(p,P[k],w||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),wr(),il(a.i,a.u,a.A,a.l,a.R,a.m)}yt.prototype.ca=function(a){a=a.target;let h=this.M;h&&kt(a)==3?h.j():this.Y(a)},yt.prototype.Y=function(a){try{if(a==this.g)e:{let Ue=kt(this.g);var h=this.g.Ba();let Wt=this.g.Z();if(!(3>Ue)&&(Ue!=3||this.g&&(this.h.h||this.g.oa()||Ua(this.g)))){this.J||Ue!=4||h==7||(h==8||0>=Wt?wr(3):wr(2)),Ss(this);var p=this.g.Z();this.X=p;t:if(ya(this)){var w=Ua(this.g);a="";var P=w.length,k=kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jt(this),Er(this);var L="";break t}this.h.i=new c.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,a+=this.h.i.decode(w[h],{stream:!(k&&h==P-1)});w.length=0,this.h.g+=a,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,sl(this.i,this.u,this.A,this.l,this.R,Ue,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Fe=this.g;if((fe=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(fe)){var oe=fe;break t}}oe=null}if(p=oe)he(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rs(this,p);else{this.o=!1,this.s=3,Ve(12),jt(this),Er(this);break e}}if(this.P){p=!0;let ht;for(;!this.J&&this.C<L.length;)if(ht=cl(this,L),ht==Fn){Ue==4&&(this.s=4,Ve(14),p=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==As){this.s=4,Ve(15),he(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else he(this.i,this.l,ht,null),Rs(this,ht);if(ya(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||L.length!=0||this.h.h||(this.s=1,Ve(16),p=!1),this.o=this.o&&p,!p)he(this.i,this.l,L,"[Invalid Chunked Response]"),jt(this),Er(this);else if(0<L.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),zn(Ge),Ge.M=!0,Ve(11))}}else he(this.i,this.l,L,null),Rs(this,L);Ue==4&&jt(this),this.o&&!this.J&&(Ue==4?Ls(this.j,this):(this.o=!1,Ir(this)))}else yl(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,Ve(12)):(this.s=0,Ve(13)),jt(this),Er(this)}}}catch{}finally{}};function ya(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function cl(a,h){var p=a.C,w=h.indexOf(`
`,p);return w==-1?Fn:(p=Number(h.substring(p,w)),isNaN(p)?As:(w+=1,w+p>h.length?Fn:(h=h.slice(w,w+p),a.C=w+p,h)))}yt.prototype.cancel=function(){this.J=!0,jt(this)};function Ir(a){a.S=Date.now()+a.I,wa(a,a.I)}function wa(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vr(b(a.ba,a),h)}function Ss(a){a.B&&(c.clearTimeout(a.B),a.B=null)}yt.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(ol(this.i,this.A),this.L!=2&&(wr(),Ve(17)),jt(this),this.s=2,Er(this)):wa(this,this.S-a)};function Er(a){a.j.G==0||a.J||Ls(a.j,a)}function jt(a){Ss(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,ca(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Rs(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||Cs(p.h,a))){if(!a.K&&Cs(p.h,a)&&p.G==3){try{var w=p.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Dr(p),vi(p);else break e;Pr(p),Ve(18)}}else p.za=P[1],0<p.za-p.T&&37500>P[2]&&p.F&&p.v==0&&!p.C&&(p.C=vr(b(p.Za,p),6e3));if(1>=Ea(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Gt(p,11)}else if((a.K||p.g==a)&&Dr(p),!W(h))for(P=p.Da.g.parse(h),h=0;h<P.length;h++){let oe=P[h];if(p.T=oe[0],oe=oe[1],p.G==2)if(oe[0]=="c"){p.K=oe[1],p.ia=oe[2];let Ge=oe[3];Ge!=null&&(p.la=Ge,p.j.info("VER="+p.la));let Ue=oe[4];Ue!=null&&(p.Aa=Ue,p.j.info("SVER="+p.Aa));let Wt=oe[5];Wt!=null&&typeof Wt=="number"&&0<Wt&&(w=1.5*Wt,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;let ht=a.g;if(ht){let Ii=ht.g?ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var k=w.h;k.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Ps(k,k.h),k.h=null))}if(w.D){let js=ht.g?ht.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(w.ya=js,ge(w.I,w.D,js))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var L=a;if(w.qa=Us(w,w.J?w.ia:null,w.W),L.K){Ta(w.h,L);var fe=L,Fe=w.L;Fe&&(fe.I=Fe),fe.B&&(Ss(fe),Ir(fe)),w.g=L}else Ms(w);0<p.i.length&&_i(p)}else oe[0]!="stop"&&oe[0]!="close"||Gt(p,7);else p.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?Gt(p,7):wi(p):oe[0]!="noop"&&p.l&&p.l.ta(oe),p.v=0)}}wr(4)}catch{}}var va=class{constructor(a,h){this.g=a,this.map=h}};function _a(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ia(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ea(a){return a.h?1:a.g?a.g.size:0}function Cs(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ps(a,h){a.g?a.g.add(h):a.h=h}function Ta(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}_a.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function ba(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(let p of a.g.values())h=h.concat(p.D);return h}return B(a.i)}function Aa(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(d(a)){for(var h=[],p=a.length,w=0;w<p;w++)h.push(a[w]);return h}h=[],p=0;for(w in a)h[p++]=a[w];return h}function ul(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(d(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(let w in a)h[p++]=w;return h}}}function Ds(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(d(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=ul(a),w=Aa(a),P=w.length,k=0;k<P;k++)h.call(void 0,w[k],p&&p[k],a)}var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ll(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var w=a[p].indexOf("="),P=null;if(0<=w){var k=a[p].substring(0,w);P=a[p].substring(w+1)}else k=a[p];h(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function it(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof it){this.h=a.h,pi(this,a.j),this.o=a.o,this.g=a.g,Un(this,a.s),this.l=a.l;var h=a.i,p=new Ar;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),ks(this,p),this.m=a.m}else a&&(h=String(a).match(Sa))?(this.h=!1,pi(this,h[1]||"",!0),this.o=Tr(h[2]||""),this.g=Tr(h[3]||"",!0),Un(this,h[4]),this.l=Tr(h[5]||"",!0),ks(this,h[6]||"",!0),this.m=Tr(h[7]||"")):(this.h=!1,this.i=new Ar(null,this.h))}it.prototype.toString=function(){var a=[],h=this.j;h&&a.push(br(h,Ra,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(br(h,Ra,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(br(p,p.charAt(0)=="/"?dl:Bn,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",br(p,Pa)),a.join("")};function wt(a){return new it(a)}function pi(a,h,p){a.j=p?Tr(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Un(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ks(a,h,p){h instanceof Ar?(a.i=h,fl(a.i,a.h)):(p||(h=br(h,Ca)),a.i=new Ar(h,a.h))}function ge(a,h,p){a.i.set(h,p)}function mi(a){return ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Tr(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function br(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,hl),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function hl(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ra=/[#\/\?@]/g,Bn=/[#\?:]/g,dl=/[#\?]/g,Ca=/[#\?@]/g,Pa=/#/g;function Ar(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function qt(a){a.g||(a.g=new Map,a.h=0,a.i&&ll(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Ar.prototype,n.add=function(a,h){qt(this),this.i=null,a=$n(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Da(a,h){qt(a),h=$n(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ka(a,h){return qt(a),h=$n(a,h),a.g.has(h)}n.forEach=function(a,h){qt(this),this.g.forEach(function(p,w){p.forEach(function(P){a.call(h,P,w,this)},this)},this)},n.na=function(){qt(this);let a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let w=0;w<h.length;w++){let P=a[w];for(let k=0;k<P.length;k++)p.push(h[w])}return p},n.V=function(a){qt(this);let h=[];if(typeof a=="string")ka(this,a)&&(h=h.concat(this.g.get($n(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},n.set=function(a,h){return qt(this),this.i=null,a=$n(this,a),ka(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Na(a,h,p){Da(a,h),0<p.length&&(a.i=null,a.g.set($n(a,h),B(p)),a.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var w=h[p];let k=encodeURIComponent(String(w)),L=this.V(w);for(w=0;w<L.length;w++){var P=k;L[w]!==""&&(P+="="+encodeURIComponent(String(L[w]))),a.push(P)}}return this.i=a.join("&")};function $n(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function fl(a,h){h&&!a.j&&(qt(a),a.i=null,a.g.forEach(function(p,w){var P=w.toLowerCase();w!=P&&(Da(this,w),Na(this,P,p))},a)),a.j=h}function jn(a,h){let p=new _r;if(c.Image){let w=new Image;w.onload=N(zt,p,"TestLoadImage: loaded",!0,h,w),w.onerror=N(zt,p,"TestLoadImage: error",!1,h,w),w.onabort=N(zt,p,"TestLoadImage: abort",!1,h,w),w.ontimeout=N(zt,p,"TestLoadImage: timeout",!1,h,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else h(!1)}function pl(a,h){let p=new _r,w=new AbortController,P=setTimeout(()=>{w.abort(),zt(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:w.signal}).then(k=>{clearTimeout(P),k.ok?zt(p,"TestPingServer: ok",!0,h):zt(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),zt(p,"TestPingServer: error",!1,h)})}function zt(a,h,p,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(p)}catch{}}function xa(){this.g=new rl}function ml(a,h,p){let w=p||"";try{Ds(a,function(P,k){let L=P;f(P)&&(L=Is(P)),h.push(w+k+"="+encodeURIComponent(L))})}catch(P){throw h.push(w+"type="+encodeURIComponent("_badmap")),P}}function st(a){this.l=a.Ub||null,this.j=a.eb||!1}V(st,Ct),st.prototype.g=function(){return new gi(this.l,this.j)},st.prototype.i=function(a){return function(){return a}}({});function gi(a,h){ke.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(gi,ke),n=gi.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Sr(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dt(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ns(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ns(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Dt(this):Sr(this),this.readyState==3&&Ns(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Dt(this))},n.Qa=function(a){this.g&&(this.response=a,Dt(this))},n.ga=function(){this.g&&Dt(this)};function Dt(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Sr(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Sr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Oa(a){let h="";return se(a,function(p,w){h+=w,h+=":",h+=p,h+=`\r
`}),h}function xs(a,h,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=Oa(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):ge(a,h,p))}function ve(a){ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(ve,ke);var qn=/^https?$/i,gl=["POST","PUT"];n=ve.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?ua(this.o):ua(bs),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(k){Ma(this,k);return}if(a=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)p.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let k of w.keys())p.set(k,w.get(k));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),P=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(gl,h,void 0))||w||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,L]of p)this.g.setRequestHeader(k,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fa(this),this.u=!0,this.g.send(a),this.u=!1}catch(k){Ma(this,k)}};function Ma(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,La(a),yi(a)}function La(a){a.A||(a.A=!0,ze(a,"complete"),ze(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ze(this,"complete"),ze(this,"abort"),yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yi(this,!0)),ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Va(this):this.bb())},n.bb=function(){Va(this)};function Va(a){if(a.h&&typeof o<"u"&&(!a.v[1]||kt(a)!=4||a.Z()!=2)){if(a.u&&kt(a)==4)Je(a.Ea,0,a);else if(ze(a,"readystatechange"),kt(a)==4){a.h=!1;try{let L=a.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var w;if(w=L===0){var P=String(a.D).match(Sa)[1]||null;!P&&c.self&&c.self.location&&(P=c.self.location.protocol.slice(0,-1)),w=!qn.test(P?P.toLowerCase():"")}p=w}if(p)ze(a,"complete"),ze(a,"success");else{a.m=6;try{var k=2<kt(a)?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.Z()+"]",La(a)}}finally{yi(a)}}}}function yi(a,h){if(a.g){Fa(a);let p=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ze(a,"ready");try{p.onreadystatechange=w}catch{}}}function Fa(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function kt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<kt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),nl(h)}};function Ua(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function yl(a){let h={};a=(a.g&&2<=kt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(W(a[w]))continue;var p=S(a[w]);let P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let k=h[P]||[];h[P]=k,k.push(p)}C(h,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Cr(a){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rr("baseRetryDelayMs",5e3,a),this.cb=Rr("retryDelaySeedMs",1e4,a),this.Wa=Rr("forwardChannelMaxRetries",2,a),this.wa=Rr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new _a(a&&a.concurrentRequestLimit),this.Da=new xa,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Cr.prototype,n.la=8,n.G=1,n.connect=function(a,h,p,w){Ve(0),this.W=a,this.H=h||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=Us(this,null,this.W),_i(this)};function wi(a){if(Ba(a),a.G==3){var h=a.U++,p=wt(a.I);if(ge(p,"SID",a.K),ge(p,"RID",h),ge(p,"TYPE","terminate"),un(a,p),h=new yt(a,a.j,h),h.L=2,h.v=mi(wt(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=Bs(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ir(h)}Fs(a)}function vi(a){a.g&&(zn(a),a.g.cancel(),a.g=null)}function Ba(a){vi(a),a.u&&(c.clearTimeout(a.u),a.u=null),Dr(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function _i(a){if(!Ia(a.h)&&!a.s){a.s=!0;var h=a.Ga;Pn||ct(),cn||(Pn(),cn=!0),Dn.add(h,a),a.B=0}}function $a(a,h){return Ea(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vr(b(a.Ga,a,h),Vs(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let P=new yt(this,this.j,a),k=this.o;if(this.S&&(k?(k=_(k),A(k,this.S)):k=this.S),this.m!==null||this.O||(P.H=k,k=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Os(this,P,h),p=wt(this.I),ge(p,"RID",a),ge(p,"CVER",22),this.D&&ge(p,"X-HTTP-Session-Id",this.D),un(this,p),k&&(this.O?h="headers="+encodeURIComponent(String(Oa(k)))+"&"+h:this.m&&xs(p,this.m,k)),Ps(this.h,P),this.Ua&&ge(p,"TYPE","init"),this.P?(ge(p,"$req",h),ge(p,"SID","null"),P.T=!0,we(P,p,null)):we(P,p,h),this.G=2}}else this.G==3&&(a?ja(this,a):this.i.length==0||Ia(this.h)||ja(this))};function ja(a,h){var p;h?p=h.l:p=a.U++;let w=wt(a.I);ge(w,"SID",a.K),ge(w,"RID",p),ge(w,"AID",a.T),un(a,w),a.m&&a.o&&xs(w,a.m,a.o),p=new yt(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Os(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ps(a.h,p),we(p,w,h)}function un(a,h){a.H&&se(a.H,function(p,w){ge(h,w,p)}),a.l&&Ds({},function(p,w){ge(h,w,p)})}function Os(a,h,p){p=Math.min(a.i.length,p);var w=a.l?b(a.l.Na,a.l,a):null;e:{var P=a.i;let k=-1;for(;;){let L=["count="+p];k==-1?0<p?(k=P[0].g,L.push("ofs="+k)):k=0:L.push("ofs="+k);let fe=!0;for(let Fe=0;Fe<p;Fe++){let oe=P[Fe].g,Ge=P[Fe].map;if(oe-=k,0>oe)k=Math.max(0,P[Fe].g-100),fe=!1;else try{ml(Ge,L,"req"+oe+"_")}catch{w&&w(Ge)}}if(fe){w=L.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,w}function Ms(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Pn||ct(),cn||(Pn(),cn=!0),Dn.add(h,a),a.v=0}}function Pr(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vr(b(a.Fa,a),Vs(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,qa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vr(b(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ve(10),vi(this),qa(this))};function zn(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function qa(a){a.g=new yt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=wt(a.qa);ge(h,"RID","rpc"),ge(h,"SID",a.K),ge(h,"AID",a.T),ge(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ge(h,"TO",a.ja),ge(h,"TYPE","xmlhttp"),un(a,h),a.m&&a.o&&xs(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=mi(wt(h)),p.m=null,p.P=!0,ga(p,a)}n.Za=function(){this.C!=null&&(this.C=null,vi(this),Pr(this),Ve(19))};function Dr(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Ls(a,h){var p=null;if(a.g==h){Dr(a),zn(a),a.g=null;var w=2}else if(Cs(a.h,h))p=h.D,Ta(a.h,h),w=1;else return;if(a.G!=0){if(h.o)if(w==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var P=a.B;w=hi(),ze(w,new pa(w,p)),_i(a)}else Ms(a);else if(P=h.s,P==3||P==0&&0<h.X||!(w==1&&$a(a,h)||w==2&&Pr(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),P){case 1:Gt(a,5);break;case 4:Gt(a,10);break;case 3:Gt(a,6);break;default:Gt(a,2)}}}function Vs(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Gt(a,h){if(a.j.info("Error code "+h),h==2){var p=b(a.fb,a),w=a.Xa;let P=!w;w=new it(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||pi(w,"https"),mi(w),P?jn(w.toString(),p):pl(w.toString(),p)}else Ve(2);a.G=0,a.l&&a.l.sa(h),Fs(a),Ba(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function Fs(a){if(a.G=0,a.ka=[],a.l){let h=ba(a.h);(h.length!=0||a.i.length!=0)&&(x(a.ka,h),x(a.ka,a.i),a.h.i.length=0,B(a.i),a.i.length=0),a.l.ra()}}function Us(a,h,p){var w=p instanceof it?wt(p):new it(p);if(w.g!="")h&&(w.g=h+"."+w.g),Un(w,w.s);else{var P=c.location;w=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var k=new it(null);w&&pi(k,w),h&&(k.g=h),P&&Un(k,P),p&&(k.l=p),w=k}return p=a.D,h=a.ya,p&&h&&ge(w,p,h),ge(w,"VER",a.la),un(a,w),w}function Bs(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ve(new st({eb:p})):new ve(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $s(){}n=$s.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function kr(){}kr.prototype.g=function(a,h){return new Ne(a,h)};function Ne(a,h){ke.call(this),this.g=new Cr(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!W(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!W(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Gn(this)}V(Ne,ke),Ne.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ne.prototype.close=function(){wi(this.g)},Ne.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Is(a),a=p);h.i.push(new va(h.Ya++,a)),h.G==3&&_i(h)},Ne.prototype.N=function(){this.g.l=null,delete this.j,wi(this.g),delete this.g,Ne.aa.N.call(this)};function za(a){Es.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(let p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}V(za,Es);function Ga(){Ts.call(this),this.status=1}V(Ga,Ts);function Gn(a){this.g=a}V(Gn,$s),Gn.prototype.ua=function(){ze(this.g,"a")},Gn.prototype.ta=function(a){ze(this.g,new za(a))},Gn.prototype.sa=function(a){ze(this.g,new Ga)},Gn.prototype.ra=function(){ze(this.g,"b")},kr.prototype.createWebChannel=kr.prototype.g,Ne.prototype.send=Ne.prototype.o,Ne.prototype.open=Ne.prototype.m,Ne.prototype.close=Ne.prototype.close,Jd=In.createWebChannelTransport=function(){return new kr},Qd=In.getStatEventTarget=function(){return hi()},Hd=In.Event=Pt,su=In.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,No=In.ErrorCode=di,ma.COMPLETE="complete",Kd=In.EventType=ma,la.EventType=yr,yr.OPEN="a",yr.CLOSE="b",yr.ERROR="c",yr.MESSAGE="d",ke.prototype.listen=ke.prototype.K,Qi=In.WebChannel=la,Wd=In.FetchXmlHttpFactory=st,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,Gd=In.XhrIo=ve}).apply(typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{});var Iw="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var fs="10.12.0";var ti=new nr("@firebase/firestore");function xo(){return ti.logLevel}function j(n,...e){if(ti.logLevel<=re.DEBUG){let t=e.map(Op);ti.debug(`Firestore (${fs}): ${n}`,...t)}}function En(n,...e){if(ti.logLevel<=re.ERROR){let t=e.map(Op);ti.error(`Firestore (${fs}): ${n}`,...t)}}function ns(n,...e){if(ti.logLevel<=re.WARN){let t=e.map(Op);ti.warn(`Firestore (${fs}): ${n}`,...t)}}function Op(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${fs}) INTERNAL ASSERTION FAILED: `+n;throw En(e),new Error(e)}function ye(n,e){n||Q()}function Y(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var lu=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(He.UNAUTHENTICATED))}shutdown(){}},nf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},rf=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve(),s=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let d=s;e.enqueueRetryable(()=>E(this,null,function*(){yield d.promise,yield i(this.currentUser)}))},c=d=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?c(d):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new lu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new He(e)}},sf=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},of=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new sf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},af=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string"),this.R=t.token,new af(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function VS(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var hu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=VS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function de(n,e){return n<e?-1:n>e?1:0}function rs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ee=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ee(0,0))}static max(){return new n(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var du=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ae=class n extends du{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},FS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=class n extends du{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return FS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new $(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new $(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new $(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ae.fromString(e))}static fromName(e){return new n(Ae.fromString(e).popFirst(5))}static empty(){return new n(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ae(e.slice()))}};var uf=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};uf.UNKNOWN_ID=-1;function US(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ee(t+1,0):new Ee(t,r));return new ni(i,z.empty(),e)}function BS(n){return new ni(n.readTime,n.key,-1)}var ni=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),z.empty(),-1)}static max(){return new n(X.max(),z.empty(),-1)}};function $S(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}var jS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Zo(n){return E(this,null,function*(){if(n.code!==O.FAILED_PRECONDITION||n.message!==jS)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},d=>r(d))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let d=0;d<s;d++){let f=d;t(e[f]).next(y=>{o[f]=y,++c,c===s&&r(o)},y=>i(y))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function qS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ea(n){return n.name==="IndexedDbTransactionError"}var Zw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ju(n){return n==null}function Uo(n){return n===0&&1/n==-1/0}function zS(n){return typeof n=="number"&&Number.isInteger(n)&&!Uo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var GS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uN=[...GS,"documentOverlays"],WS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KS=WS,lN=[...KS,"indexConfiguration","indexState","indexEntries"];function Ew(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ps(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ev(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ce=class n{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zi(this.root,e,this.comparator,!0)}},Zi=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,s){return this}insert(e,t,r){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fu(this.data.getIterator())}getIteratorFrom(e){return new fu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},fu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var tn=class n{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(gt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var pu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pu("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var HS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tn(n){if(ye(!!n),typeof n=="string"){let e=0,t=HS.exec(n);if(ye(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(n.seconds),nanos:Re(n.nanos)}}function Re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function dr(n){return typeof n=="string"?rt.fromBase64String(n):rt.fromUint8Array(n)}function Mp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Lp(n){let e=n.mapValue.fields.__previous_value__;return Mp(e)?Lp(e):e}function Bo(n){let e=Tn(n.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}var hf=class{constructor(e,t,r,i,s,o,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}},mu=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ou={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ri(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:tv(n)?9007199254740991:10:Q()}function on(n,e){if(n===e)return!0;let t=ri(n);if(t!==ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bo(n).isEqual(Bo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Tn(i.timestampValue),c=Tn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return dr(i.bytesValue).isEqual(dr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Re(i.geoPointValue.latitude)===Re(s.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Re(i.integerValue)===Re(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Re(i.doubleValue),c=Re(s.doubleValue);return o===c?Uo(o)===Uo(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return rs(n.arrayValue.values||[],e.arrayValue.values||[],on);case 10:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Ew(o)!==Ew(c))return!1;for(let d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!on(o[d],c[d])))return!1;return!0}(n,e);default:return Q()}}function $o(n,e){return(n.values||[]).find(t=>on(t,e))!==void 0}function is(n,e){if(n===e)return 0;let t=ri(n),r=ri(e);if(t!==r)return de(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Re(s.integerValue||s.doubleValue),d=Re(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return Tw(n.timestampValue,e.timestampValue);case 4:return Tw(Bo(n),Bo(e));case 5:return de(n.stringValue,e.stringValue);case 6:return function(s,o){let c=dr(s),d=dr(o);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),d=o.split("/");for(let f=0;f<c.length&&f<d.length;f++){let y=de(c[f],d[f]);if(y!==0)return y}return de(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=de(Re(s.latitude),Re(o.latitude));return c!==0?c:de(Re(s.longitude),Re(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],d=o.values||[];for(let f=0;f<c.length&&f<d.length;++f){let y=is(c[f],d[f]);if(y)return y}return de(c.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ou.mapValue&&o===ou.mapValue)return 0;if(s===ou.mapValue)return 1;if(o===ou.mapValue)return-1;let c=s.fields||{},d=Object.keys(c),f=o.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let g=0;g<d.length&&g<y.length;++g){let b=de(d[g],y[g]);if(b!==0)return b;let N=is(c[d[g]],f[y[g]]);if(N!==0)return N}return de(d.length,y.length)}(n.mapValue,e.mapValue);default:throw Q()}}function Tw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);let t=Tn(n),r=Tn(e),i=de(t.seconds,r.seconds);return i!==0?i:de(t.nanos,r.nanos)}function ss(n){return df(n)}function df(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Tn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return dr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=df(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${df(t.fields[o])}`;return i+"}"}(n.mapValue):Q()}function bw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ff(n){return!!n&&"integerValue"in n}function Vp(n){return!!n&&"arrayValue"in n}function Aw(n){return!!n&&"nullValue"in n}function Sw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cu(n){return!!n&&"mapValue"in n}function Mo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ps(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mo(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ot=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mo(t)}setAll(e){let t=gt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=Mo(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());cu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ps(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Mo(this.value))}};function nv(n){let e=[];return ps(n.fields,(t,r)=>{let i=new gt([t]);if(cu(r)){let s=nv(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new tn(e)}var Vt=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),Ot.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),Ot.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),Ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var os=class{constructor(e,t){this.position=e,this.inclusive=t}};function Rw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),t.key):r=is(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!on(n.position[t],e.position[t]))return!1;return!0}var ii=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function QS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var gu=class{},Le=class n extends gu{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mf(e,t,r):t==="array-contains"?new wf(e,r):t==="in"?new vf(e,r):t==="not-in"?new _f(e,r):t==="array-contains-any"?new If(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gf(e,r):new yf(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(is(t,this.value)):t!==null&&ri(this.value)===ri(t)&&this.matchesComparison(is(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ft=class n extends gu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return rv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function rv(n){return n.op==="and"}function iv(n){return JS(n)&&rv(n)}function JS(n){for(let e of n.filters)if(e instanceof Ft)return!1;return!0}function pf(n){if(n instanceof Le)return n.field.canonicalString()+n.op.toString()+ss(n.value);if(iv(n))return n.filters.map(e=>pf(e)).join(",");{let e=n.filters.map(t=>pf(t)).join(",");return`${n.op}(${e})`}}function sv(n,e){return n instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&on(r.value,i.value)}(n,e):n instanceof Ft?function(r,i){return i instanceof Ft&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&sv(o,i.filters[c]),!0):!1}(n,e):void Q()}function ov(n){return n instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${ss(t.value)}`}(n):n instanceof Ft?function(t){return t.op.toString()+" {"+t.getFilters().map(ov).join(" ,")+"}"}(n):"Filter"}var mf=class extends Le{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},gf=class extends Le{constructor(e,t){super(e,"in",t),this.keys=av("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},yf=class extends Le{constructor(e,t){super(e,"not-in",t),this.keys=av("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function av(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var wf=class extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Vp(t)&&$o(t.arrayValue,this.value)}},vf=class extends Le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&$o(this.value.arrayValue,t)}},_f=class extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!$o(this.value.arrayValue,t)}},If=class extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$o(this.value.arrayValue,r))}};var Ef=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Pw(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Ef(n,e,t,r,i,s,o)}function Fp(n){let e=Y(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ss(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ss(r)).join(",")),e.ue=t}return e.ue}function Up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cw(n.startAt,e.startAt)&&Cw(n.endAt,e.endAt)}function Tf(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var fr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function YS(n,e,t,r,i,s,o,c){return new fr(n,e,t,r,i,s,o,c)}function qu(n){return new fr(n)}function Dw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cv(n){return n.collectionGroup!==null}function Lo(n){let e=Y(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(gt.comparator);return o.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ii(s,r))}),t.has(gt.keyField().canonicalString())||e.ce.push(new ii(gt.keyField(),r))}return e.ce}function rn(n){let e=Y(n);return e.le||(e.le=XS(e,Lo(n))),e.le}function XS(n,e){if(n.limitType==="F")return Pw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ii(i.field,s)});let t=n.endAt?new os(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new os(n.startAt.position,n.startAt.inclusive):null;return Pw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function bf(n,e){let t=n.filters.concat([e]);return new fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Af(n,e,t){return new fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zu(n,e){return Up(rn(n),rn(e))&&n.limitType===e.limitType}function uv(n){return`${Fp(rn(n))}|lt:${n.limitType}`}function Ji(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ov(i)).join(", ")}]`),ju(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ss(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ss(i)).join(",")),`Target(${r})`}(rn(n))}; limitType=${n.limitType})`}function Gu(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Lo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,d){let f=Rw(o,c,d);return o.inclusive?f<=0:f<0}(r.startAt,Lo(r),i)||r.endAt&&!function(o,c,d){let f=Rw(o,c,d);return o.inclusive?f>=0:f>0}(r.endAt,Lo(r),i))}(n,e)}function ZS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lv(n){return(e,t)=>{let r=!1;for(let i of Lo(n)){let s=eR(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eR(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,o,c){let d=o.data.field(s),f=c.data.field(s);return d!==null&&f!==null?is(d,f):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var pr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return ev(this.inner)}size(){return this.innerSize}};var tR=new Ce(z.comparator);function bn(){return tR}var hv=new Ce(z.comparator);function Oo(...n){let e=hv;for(let t of n)e=e.insert(t.key,t);return e}function dv(n){let e=hv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xr(){return Vo()}function fv(){return Vo()}function Vo(){return new pr(n=>n.toString(),(n,e)=>n.isEqual(e))}var nR=new Ce(z.comparator),rR=new tt(z.comparator);function ie(...n){let e=rR;for(let t of n)e=e.add(t);return e}var iR=new tt(de);function sR(){return iR}function pv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uo(e)?"-0":e}}function mv(n){return{integerValue:""+n}}function oR(n,e){return zS(e)?mv(e):pv(n,e)}var as=class{constructor(){this._=void 0}};function aR(n,e,t){return n instanceof cs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Mp(s)&&(s=Lp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof si?yv(n,e):n instanceof oi?wv(n,e):function(i,s){let o=gv(i,s),c=kw(o)+kw(i.Pe);return ff(o)&&ff(i.Pe)?mv(c):pv(i.serializer,c)}(n,e)}function cR(n,e,t){return n instanceof si?yv(n,e):n instanceof oi?wv(n,e):t}function gv(n,e){return n instanceof us?function(r){return ff(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var cs=class extends as{},si=class extends as{constructor(e){super(),this.elements=e}};function yv(n,e){let t=vv(e);for(let r of n.elements)t.some(i=>on(i,r))||t.push(r);return{arrayValue:{values:t}}}var oi=class extends as{constructor(e){super(),this.elements=e}};function wv(n,e){let t=vv(e);for(let r of n.elements)t=t.filter(i=>!on(i,r));return{arrayValue:{values:t}}}var us=class extends as{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function kw(n){return Re(n.integerValue||n.doubleValue)}function vv(n){return Vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof si&&i instanceof si||r instanceof oi&&i instanceof oi?rs(r.elements,i.elements,on):r instanceof us&&i instanceof us?on(r.Pe,i.Pe):r instanceof cs&&i instanceof cs}(n.transform,e.transform)}var Sf=class{constructor(e,t){this.version=e,this.transformResults=t}},lr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function uu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ls=class{};function _v(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yu(n.key,lr.none()):new ai(n.key,n.data,lr.none());{let t=n.data,r=Ot.empty(),i=new tt(gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new An(n.key,r,new tn(i.toArray()),lr.none())}}function lR(n,e,t){n instanceof ai?function(i,s,o){let c=i.value.clone(),d=xw(i.fieldTransforms,s,o.transformResults);c.setAll(d),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof An?function(i,s,o){if(!uu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=xw(i.fieldTransforms,s,o.transformResults),d=s.data;d.setAll(Iv(i)),d.setAll(c),s.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Fo(n,e,t,r){return n instanceof ai?function(s,o,c,d){if(!uu(s.precondition,o))return c;let f=s.value.clone(),y=Ow(s.fieldTransforms,d,o);return f.setAll(y),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof An?function(s,o,c,d){if(!uu(s.precondition,o))return c;let f=Ow(s.fieldTransforms,d,o),y=o.data;return y.setAll(Iv(s)),y.setAll(f),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,c){return uu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function hR(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=gv(r.transform,i||null);s!=null&&(t===null&&(t=Ot.empty()),t.set(r.field,s))}return t||null}function Nw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rs(r,i,(s,o)=>uR(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ai=class extends ls{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},An=class extends ls{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Iv(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function xw(n,e,t){let r=new Map;ye(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,cR(o,c,t[i]))}return r}function Ow(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,aR(s,o,e))}return r}var yu=class extends ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Rf=class extends ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cf=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&lR(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=fv();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let d=_v(o,c);d!==null&&r.set(i.key,d),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,(t,r)=>Nw(t,r))&&rs(this.baseMutations,e.baseMutations,(t,r)=>Nw(t,r))}},Pf=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ye(e.mutations.length===r.length);let i=function(){return nR}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Df=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var kf=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Oe,le;function dR(n){switch(n){default:return Q();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Ev(n){if(n===void 0)return En("GRPC error has no .code"),O.UNKNOWN;switch(n){case Oe.OK:return O.OK;case Oe.CANCELLED:return O.CANCELLED;case Oe.UNKNOWN:return O.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return O.INTERNAL;case Oe.UNAVAILABLE:return O.UNAVAILABLE;case Oe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Oe.NOT_FOUND:return O.NOT_FOUND;case Oe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Oe.ABORTED:return O.ABORTED;case Oe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Oe.DATA_LOSS:return O.DATA_LOSS;default:return Q()}}(le=Oe||(Oe={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var Mw=null;function fR(){return new TextEncoder}var pR=new ur([4294967295,4294967295],0);function Lw(n){let e=fR().encode(n),t=new zd;return t.update(e),new Uint8Array(t.digest())}function Vw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ur([t,r],0),new ur([i,s],0)]}var Nf=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zr(`Invalid padding: ${t}`);if(r<0)throw new Zr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ur.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ur.fromNumber(r)));return i.compare(pR)===1&&(i=new ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Lw(e),[r,i]=Vw(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=Lw(e),[r,i]=Vw(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Zr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wu=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new Ce(de),bn(),ie())}},jo=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var es=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},vu=class{constructor(e,t){this.targetId=e,this.me=t}},_u=class{constructor(e,t,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Iu=class{constructor(){this.fe=0,this.ge=Uw(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new jo(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=Uw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},xf=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=bn(),this.qe=Fw(),this.Qe=new Ce(de)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Tf(s))if(r===0){let o=new z(s.path);this.Ue(t,o,Vt.newNoDocument(o,X.min()))}else ye(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(t);let f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}Mw?.et(function(y,g,b,N,V){var B,x,F,W,te,J;let Ie={localCacheCount:y,existenceFilterCount:g.count,databaseId:b.database,projectId:b.projectId},se=g.unchangedNames;return se&&(Ie.bloomFilter={applied:V===0,hashCount:(B=se?.hashCount)!==null&&B!==void 0?B:0,bitmapLength:(W=(F=(x=se?.bits)===null||x===void 0?void 0:x.bitmap)===null||F===void 0?void 0:F.length)!==null&&W!==void 0?W:0,padding:(J=(te=se?.bits)===null||te===void 0?void 0:te.padding)!==null&&J!==void 0?J:0,mightContain:C=>{var _;return(_=N?.mightContain(C))!==null&&_!==void 0&&_}}),Ie}(o,e.me,this.Le.tt(),c,d))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=dr(r).toUint8Array()}catch(d){if(d instanceof pu)return ns("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Nf(o,i,s)}catch(d){return ns(d instanceof Zr?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Tf(c.target)){let d=new z(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Vt.newNoDocument(d,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=ie();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(d=>{let f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new wu(e,t,this.Qe,this.ke,r);return this.ke=bn(),this.qe=Fw(),this.Qe=new Ce(de),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Iu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tt(de),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Iu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Fw(){return new Ce(z.comparator)}function Uw(){return new Ce(z.comparator)}var mR={asc:"ASCENDING",desc:"DESCENDING"},gR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yR={and:"AND",or:"OR"},Of=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Mf(n,e){return n.useProto3Json||ju(e)?e:{value:e}}function Eu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wR(n,e){return Eu(n,e.toTimestamp())}function sn(n){return ye(!!n),X.fromTimestamp(function(t){let r=Tn(t);return new Ee(r.seconds,r.nanos)}(n))}function Bp(n,e){return Lf(n,e).canonicalString()}function Lf(n,e){let t=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function bv(n){let e=Ae.fromString(n);return ye(Pv(e)),e}function Vf(n,e){return Bp(n.databaseId,e.path)}function Yd(n,e){let t=bv(e);if(t.get(1)!==n.databaseId.projectId)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(Sv(t))}function Av(n,e){return Bp(n.databaseId,e)}function vR(n){let e=bv(n);return e.length===4?Ae.emptyPath():Sv(e)}function Ff(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Sv(n){return ye(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Bw(n,e,t){return{name:Vf(n,e),fields:t.value.mapValue.fields}}function _R(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,y){return f.useProto3Json?(ye(y===void 0||typeof y=="string"),rt.fromBase64String(y||"")):(ye(y===void 0||y instanceof Buffer||y instanceof Uint8Array),rt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(f){let y=f.code===void 0?O.UNKNOWN:Ev(f.code);return new $(y,f.message||"")}(o);t=new _u(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Yd(n,r.document.name),s=sn(r.document.updateTime),o=r.document.createTime?sn(r.document.createTime):X.min(),c=new Ot({mapValue:{fields:r.document.fields}}),d=Vt.newFoundDocument(i,s,o,c),f=r.targetIds||[],y=r.removedTargetIds||[];t=new es(f,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Yd(n,r.document),s=r.readTime?sn(r.readTime):X.min(),o=Vt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new es([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Yd(n,r.document),s=r.removedTargetIds||[];t=new es([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new kf(i,s),c=r.targetId;t=new vu(c,o)}}return t}function IR(n,e){let t;if(e instanceof ai)t={update:Bw(n,e.key,e.value)};else if(e instanceof yu)t={delete:Vf(n,e.key)};else if(e instanceof An)t={update:Bw(n,e.key,e.data),updateMask:DR(e.fieldMask)};else{if(!(e instanceof Rf))return Q();t={verify:Vf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof cs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof si)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof oi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof us)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(n,e.precondition)),t}function ER(n,e){return n&&n.length>0?(ye(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?sn(i.updateTime):sn(s);return o.isEqual(X.min())&&(o=sn(s)),new Sf(o,i.transformResults||[])}(t,e))):[]}function TR(n,e){return{documents:[Av(n,e.path)]}}function bR(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Av(n,i);let s=function(f){if(f.length!==0)return Cv(Ft.create(f,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(f){if(f.length!==0)return f.map(y=>function(b){return{field:Yi(b.field),direction:RR(b.dir)}}(y))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Mf(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:i}}function AR(n){let e=vR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ye(r===1);let y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];t.where&&(s=function(g){let b=Rv(g);return b instanceof Ft&&iv(b)?b.getFilters():[b]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(b=>function(V){return new ii(Xi(V.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(b))}(t.orderBy));let c=null;t.limit&&(c=function(g){let b;return b=typeof g=="object"?g.value:g,ju(b)?null:b}(t.limit));let d=null;t.startAt&&(d=function(g){let b=!!g.before,N=g.values||[];return new os(N,b)}(t.startAt));let f=null;return t.endAt&&(f=function(g){let b=!g.before,N=g.values||[];return new os(N,b)}(t.endAt)),YS(e,i,o,s,c,"F",d,f)}function SR(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Rv(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Xi(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xi(t.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Xi(t.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Xi(t.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return Le.create(Xi(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ft.create(t.compositeFilter.filters.map(r=>Rv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function RR(n){return mR[n]}function CR(n){return gR[n]}function PR(n){return yR[n]}function Yi(n){return{fieldPath:n.canonicalString()}}function Xi(n){return gt.fromServerFormat(n.fieldPath)}function Cv(n){return n instanceof Le?function(t){if(t.op==="=="){if(Sw(t.value))return{unaryFilter:{field:Yi(t.field),op:"IS_NAN"}};if(Aw(t.value))return{unaryFilter:{field:Yi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sw(t.value))return{unaryFilter:{field:Yi(t.field),op:"IS_NOT_NAN"}};if(Aw(t.value))return{unaryFilter:{field:Yi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yi(t.field),op:CR(t.op),value:t.value}}}(n):n instanceof Ft?function(t){let r=t.getFilters().map(i=>Cv(i));return r.length===1?r[0]:{compositeFilter:{op:PR(t.op),filters:r}}}(n):Q()}function DR(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pv(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var qo=class n{constructor(e,t,r,i,s=X.min(),o=X.min(),c=rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Uf=class{constructor(e){this.ct=e}};function kR(n){let e=AR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Af(e,e.limit,"L"):e}var Tu=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Uo(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Tn(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(dr(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?tv(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Q()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),z.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Tu.bt=new Tu;var Bf=class{constructor(){this._n=new $f}addToCollectionParentIndex(e,t){return this._n.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(ni.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},$f=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tt(Ae.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Ae.comparator)).toArray()}};var dN=new Uint8Array(0);var en=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var zo=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var jf=class{constructor(){this.changes=new pr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var zf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fo(r.mutation,i,tn.empty(),Ee.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Xr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Oo();return s.forEach((c,d)=>{o=o.insert(c,d.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Xr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=bn(),o=Vo(),c=function(){return Vo()}();return t.forEach((d,f)=>{let y=r.get(f.key);i.has(f.key)&&(y===void 0||y.mutation instanceof An)?s=s.insert(f.key,f):y!==void 0?(o.set(f.key,y.mutation.getFieldMask()),Fo(y.mutation,f,y.mutation.getFieldMask(),Ee.now())):o.set(f.key,tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((f,y)=>o.set(f,y)),t.forEach((f,y)=>{var g;return c.set(f,new qf(y,(g=o.get(f))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Vo(),i=new Ce((o,c)=>o-c),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(d=>{let f=t.get(d);if(f===null)return;let y=r.get(d)||tn.empty();y=c.applyToLocalView(f,y),r.set(d,y);let g=(i.get(c.batchId)||ie()).add(d);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let d=c.getNext(),f=d.key,y=d.value,g=fv();y.forEach(b=>{if(!s.has(b)){let N=_v(t.get(b),r.get(b));N!==null&&g.set(b,N),s=s.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(Xr()),c=-1,d=s;return o.next(f=>M.forEach(f,(y,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(y)?M.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{d=d.insert(y,b)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,d,f,ie())).next(y=>({batchId:c,changes:dv(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=Oo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Oo();return this.indexManager.getCollectionParents(e,s).next(c=>M.forEach(c,d=>{let f=function(g,b){return new fr(b,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(y=>{y.forEach((g,b)=>{o=o.insert(g,b)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((d,f)=>{let y=f.getKey();o.get(y)===null&&(o=o.insert(y,Vt.newInvalidDocument(y)))});let c=Oo();return o.forEach((d,f)=>{let y=s.get(d);y!==void 0&&Fo(y.mutation,f,tn.empty(),Ee.now()),Gu(t,f)&&(c=c.insert(d,f))}),c})}};var Gf=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return M.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:sn(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:kR(i.bundledQuery),readTime:sn(i.readTime)}}(t)),M.resolve()}};var Wf=class{constructor(){this.overlays=new Ce(z.comparator),this.hr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Xr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Xr(),s=t.length+1,o=new z(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ce((f,y)=>f-y),o=this.overlays.getIterator();for(;o.hasNext();){let f=o.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let y=s.get(f.largestBatchId);y===null&&(y=Xr(),s=s.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}let c=Xr(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,y)=>c.set(f,y)),!(c.size()>=i)););return M.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Df(t,r));let s=this.hr.get(t);s===void 0&&(s=ie(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}};var Go=class{constructor(){this.Pr=new tt(Me.Ir),this.Tr=new tt(Me.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new Me(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Me(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new z(new Ae([])),r=new Me(t,e),i=new Me(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new z(new Ae([])),r=new Me(t,e),i=new Me(t,e+1),s=ie();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Me(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Me=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return z.comparator(e.key,t.key)||de(e.pr,t.pr)}static Er(e,t){return de(e.pr,t.pr)||z.comparator(e.key,t.key)}};var Kf=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new tt(Me.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Cf(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.wr=this.wr.add(new Me(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Me(t,0),i=new Me(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let c=this.Sr(o.pr);s.push(c)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(de);return t.forEach(i=>{let s=new Me(i,0),o=new Me(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{r=r.add(c.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let o=new Me(new z(s),0),c=new tt(de);return this.wr.forEachWhile(d=>{let f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.pr)),!0)},o),M.resolve(this.Dr(c))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ye(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(t.mutations,i=>{let s=new Me(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new Me(t,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Hf=class{constructor(e){this.vr=e,this.docs=function(){return new Ce(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let r=bn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=bn(),o=t.path,c=new z(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){let{key:f,value:{document:y}}=d.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||$S(BS(y),r)<=0||(i.has(y.key)||Gu(t,y))&&(s=s.insert(y.key,y.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Q()}Fr(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Qf(this)}getSize(e){return M.resolve(this.size)}},Qf=class extends jf{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var Jf=class{constructor(e){this.persistence=e,this.Mr=new pr(t=>Fp(t),Up),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Go,this.targetCount=0,this.Lr=zo.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),M.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new zo(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.qn(t),M.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Nr.containsKey(t))}};var Yf=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new Zw(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Jf(this),this.indexManager=new Bf,this.remoteDocumentCache=function(i){return new Hf(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Uf(t),this.$r=new Gf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Kf(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new Xf(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},Xf=class extends lf{constructor(e){super(),this.currentSequenceNumber=e}},Zf=class n{constructor(e){this.persistence=e,this.zr=new Go,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw Q()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),M.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{let i=z.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,X.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return M.or([()=>M.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var ep=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=ie(),i=ie();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var tp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var np=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ty()?8:qS($e())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new tp;return this.Ji(e,t,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,t,o,c.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(xo()<=re.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Ji(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(xo()<=re.DEBUG&&j("QueryEngine","Query:",Ji(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(xo()<=re.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Ji(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rn(t))):M.resolve())}ji(e,t){if(Dw(t))return M.resolve(null);let r=rn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Af(t,null,"F"),r=rn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ie(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{let f=this.Zi(t,c);return this.Xi(t,f,o,d.readTime)?this.ji(e,Af(t,null,"F")):this.es(e,f,t,d)}))})))}Hi(e,t,r,i){return Dw(t)||i.isEqual(X.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(t,s);return this.Xi(t,o,r,i)?M.resolve(null):(xo()<=re.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ji(t)),this.es(e,o,t,US(i,-1)).next(c=>c))})}Zi(e,t){let r=new tt(lv(e));return t.forEach((i,s)=>{Gu(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return xo()<=re.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Ji(t)),this.zi.getDocumentsMatchingQuery(e,t,ni.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var rp=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Ce(de),this.rs=new pr(s=>Fp(s),Up),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function NR(n,e,t,r){return new rp(n,e,t,r)}function Dv(n,e){return E(this,null,function*(){let t=Y(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],d=ie();for(let f of i){o.push(f.batchId);for(let y of f.mutations)d=d.add(y.key)}for(let f of s){c.push(f.batchId);for(let y of f.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next(f=>({us:f,removedBatchIds:o,addedBatchIds:c}))})})})}function xR(n,e){let t=Y(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(c,d,f,y){let g=f.batch,b=g.keys(),N=M.resolve();return b.forEach(V=>{N=N.next(()=>y.getEntry(d,V)).next(B=>{let x=f.docVersions.get(V);ye(x!==null),B.version.compareTo(x)<0&&(g.applyToRemoteDocument(B,f),B.isValidDocument()&&(B.setReadTime(f.commitVersion),y.addEntry(B)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(d,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=ie();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kv(n){let e=Y(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function OR(n,e){let t=Y(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let c=[];e.targetChanges.forEach((y,g)=>{let b=i.get(g);if(!b)return;c.push(t.Qr.removeMatchingKeys(s,y.removedDocuments,g).next(()=>t.Qr.addMatchingKeys(s,y.addedDocuments,g)));let N=b.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?N=N.withResumeToken(rt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):y.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(y.resumeToken,r)),i=i.insert(g,N),function(B,x,F){return B.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(b,N,y)&&c.push(t.Qr.updateTargetData(s,N))});let d=bn(),f=ie();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),c.push(MR(s,o,e.documentUpdates).next(y=>{d=y.cs,f=y.ls})),!r.isEqual(X.min())){let y=t.Qr.getLastRemoteSnapshotVersion(s).next(g=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(y)}return M.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,f)).next(()=>d)}).then(s=>(t.ns=i,s))}function MR(n,e,t){let r=ie(),i=ie();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=bn();return t.forEach((c,d)=>{let f=s.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(X.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):j("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{cs:o,ls:i}})}function LR(n,e){let t=Y(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VR(n,e){let t=Y(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new qo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function ip(n,e,t){return E(this,null,function*(){let r=Y(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ea(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function $w(n,e,t){let r=Y(n),i=X.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(d,f,y){let g=Y(d),b=g.rs.get(y);return b!==void 0?M.resolve(g.ns.get(b)):g.Qr.getTargetData(f,y)}(r,o,rn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,c.targetId).next(d=>{s=d})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:X.min(),t?s:ie())).next(c=>(FR(r,ZS(e),c),{documents:c,hs:s})))}function FR(n,e,t){let r=n.ss.get(e)||X.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}var bu=class{constructor(){this.activeTargetIds=sR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var sp=class{constructor(){this.no=new bu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new bu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var op=class{io(e){}shutdown(){}};var Au=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var au=null;function Xd(){return au===null?au=function(){return 268435456+Math.round(2147483648*Math.random())}():au++,"0x"+au.toString(16)}var UR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ap=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var et="WebChannelConnection",cp=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){let c=Xd(),d=this.vo(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,s,o),this.Mo(t,d,f,i).then(y=>(j("RestConnection",`Received RPC '${t}' ${c}: `,y),y),y=>{throw ns("RestConnection",`RPC '${t}' ${c} failed with error: `,y,"url: ",d,"request:",i),y})}xo(t,r,i,s,o,c){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){let i=UR[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let s=Xd();return new Promise((o,c)=>{let d=new Gd;d.setWithCredentials(!0),d.listenOnce(Kd.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case No.NO_ERROR:let y=d.getResponseJson();j(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),o(y);break;case No.TIMEOUT:j(et,`RPC '${e}' ${s} timed out`),c(new $(O.DEADLINE_EXCEEDED,"Request time out"));break;case No.HTTP_ERROR:let g=d.getStatus();if(j(et,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);let N=b?.error;if(N&&N.status&&N.message){let V=function(x){let F=x.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(F)>=0?F:O.UNKNOWN}(N.status);c(new $(V,N.message))}else c(new $(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new $(O.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{j(et,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);j(et,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",f,r,15)})}Oo(e,t,r){let i=Xd(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jd(),c=Qd(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.xmlHttpFactory=new Wd({})),this.Fo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;let y=s.join("");j(et,`Creating RPC '${e}' stream ${i}: ${y}`,d);let g=o.createWebChannel(y,d),b=!1,N=!1,V=new ap({lo:x=>{N?j(et,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(b||(j(et,`Opening RPC '${e}' stream ${i} transport.`),g.open(),b=!0),j(et,`RPC '${e}' stream ${i} sending:`,x),g.send(x))},ho:()=>g.close()}),B=(x,F,W)=>{x.listen(F,te=>{try{W(te)}catch(J){setTimeout(()=>{throw J},0)}})};return B(g,Qi.EventType.OPEN,()=>{N||(j(et,`RPC '${e}' stream ${i} transport opened.`),V.mo())}),B(g,Qi.EventType.CLOSE,()=>{N||(N=!0,j(et,`RPC '${e}' stream ${i} transport closed`),V.po())}),B(g,Qi.EventType.ERROR,x=>{N||(N=!0,ns(et,`RPC '${e}' stream ${i} transport errored:`,x),V.po(new $(O.UNAVAILABLE,"The operation could not be completed")))}),B(g,Qi.EventType.MESSAGE,x=>{var F;if(!N){let W=x.data[0];ye(!!W);let te=W,J=te.error||((F=te[0])===null||F===void 0?void 0:F.error);if(J){j(et,`RPC '${e}' stream ${i} received error:`,J);let Ie=J.status,se=function(I){let A=Oe[I];if(A!==void 0)return Ev(A)}(Ie),C=J.message;se===void 0&&(se=O.INTERNAL,C="Unknown error status: "+Ie+" with message "+J.message),N=!0,V.po(new $(se,C)),g.close()}else j(et,`RPC '${e}' stream ${i} received:`,W),V.yo(W)}}),B(c,Hd.STAT_EVENT,x=>{x.stat===su.PROXY?j(et,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===su.NOPROXY&&j(et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.fo()},0),V}};function Zd(){return typeof document<"u"?document:null}function Wu(n){return new Of(n,!0)}var Su=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Ru=class{constructor(e,t,r,i,s,o,c,d){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Su(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return E(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return E(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return E(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(En(t.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new $(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>E(this,null,function*(){this.state=0,this.start()}))}c_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},up=class extends Ru{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=_R(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?sn(o.readTime):X.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=Ff(this.serializer),t.addTarget=function(s,o){let c,d=o.target;if(c=Tf(d)?{documents:TR(s,d)}:{query:bR(s,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Tv(s,o.resumeToken);let f=Mf(s,o.expectedCount);f!==null&&(c.expectedCount=f)}else if(o.snapshotVersion.compareTo(X.min())>0){c.readTime=Eu(s,o.snapshotVersion.toTimestamp());let f=Mf(s,o.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let r=SR(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=Ff(this.serializer),t.removeTarget=e,this.i_(t)}},lp=class extends Ru{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=ER(e.writeResults,e.commitTime),r=sn(e.commitTime);return this.listener.A_(r,t)}return ye(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Ff(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>IR(this.serializer,r))};this.i_(t)}};var hp=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Lf(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(O.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,Lf(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(O.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},dp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(En(t),this.y_=!1):j("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var fp=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>E(this,null,function*(){ci(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(d){return E(this,null,function*(){let f=Y(d);f.M_.add(4),yield ta(f),f.N_.set("Unknown"),f.M_.delete(4),yield Ku(f)})}(this))}))}),this.N_=new dp(r,i)}};function Ku(n){return E(this,null,function*(){if(ci(n))for(let e of n.x_)yield e(!0)})}function ta(n){return E(this,null,function*(){for(let e of n.x_)yield e(!1)})}function Nv(n,e){let t=Y(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),zp(t)?qp(t):ms(t).Xo()&&jp(t,e))}function $p(n,e){let t=Y(n),r=ms(t);t.F_.delete(e),r.Xo()&&xv(t,e),t.F_.size===0&&(r.Xo()?r.n_():ci(t)&&t.N_.set("Unknown"))}function jp(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ms(n).P_(e)}function xv(n,e){n.L_.xe(e),ms(n).I_(e)}function qp(n){n.L_=new xf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ms(n).start(),n.N_.w_()}function zp(n){return ci(n)&&!ms(n).Zo()&&n.F_.size>0}function ci(n){return Y(n).M_.size===0}function Ov(n){n.L_=void 0}function BR(n){return E(this,null,function*(){n.N_.set("Online")})}function $R(n){return E(this,null,function*(){n.F_.forEach((e,t)=>{jp(n,e)})})}function jR(n,e){return E(this,null,function*(){Ov(n),zp(n)?(n.N_.D_(e),qp(n)):n.N_.set("Unknown")})}function qR(n,e,t){return E(this,null,function*(){if(n.N_.set("Online"),e instanceof _u&&e.state===2&&e.cause)try{yield function(i,s){return E(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.F_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.F_.delete(c),i.L_.removeTarget(c))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cu(n,r)}else if(e instanceof es?n.L_.Ke(e):e instanceof vu?n.L_.He(e):n.L_.We(e),!t.isEqual(X.min()))try{let r=yield kv(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){let y=s.F_.get(f);y&&s.F_.set(f,y.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach((d,f)=>{let y=s.F_.get(d);if(!y)return;s.F_.set(d,y.withResumeToken(rt.EMPTY_BYTE_STRING,y.snapshotVersion)),xv(s,d);let g=new qo(y.target,d,f,y.sequenceNumber);jp(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield Cu(n,r)}})}function Cu(n,e,t){return E(this,null,function*(){if(!ea(e))throw e;n.M_.add(1),yield ta(n),n.N_.set("Offline"),t||(t=()=>kv(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Ku(n)}))})}function Mv(n,e){return e().catch(t=>Cu(n,t,e))}function Hu(n){return E(this,null,function*(){let e=Y(n),t=mr(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;zR(e);)try{let i=yield LR(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,GR(e,i)}catch(i){yield Cu(e,i)}Lv(e)&&Vv(e)})}function zR(n){return ci(n)&&n.v_.length<10}function GR(n,e){n.v_.push(e);let t=mr(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function Lv(n){return ci(n)&&!mr(n).Zo()&&n.v_.length>0}function Vv(n){mr(n).start()}function WR(n){return E(this,null,function*(){mr(n).V_()})}function KR(n){return E(this,null,function*(){let e=mr(n);for(let t of n.v_)e.d_(t.mutations)})}function HR(n,e,t){return E(this,null,function*(){let r=n.v_.shift(),i=Pf.from(r,e,t);yield Mv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Hu(n)})}function QR(n,e){return E(this,null,function*(){e&&mr(n).E_&&(yield function(r,i){return E(this,null,function*(){if(function(o){return dR(o)&&o!==O.ABORTED}(i.code)){let s=r.v_.shift();mr(r).t_(),yield Mv(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Hu(r)}})}(n,e)),Lv(n)&&Vv(n)})}function jw(n,e){return E(this,null,function*(){let t=Y(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=ci(t);t.M_.add(3),yield ta(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Ku(t)})}function JR(n,e){return E(this,null,function*(){let t=Y(n);e?(t.M_.delete(2),yield Ku(t)):e||(t.M_.add(2),yield ta(t),t.N_.set("Unknown"))})}function ms(n){return n.B_||(n.B_=function(t,r,i){let s=Y(t);return s.f_(),new up(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:BR.bind(null,n),To:$R.bind(null,n),Ao:jR.bind(null,n),h_:qR.bind(null,n)}),n.x_.push(e=>E(this,null,function*(){e?(n.B_.t_(),zp(n)?qp(n):n.N_.set("Unknown")):(yield n.B_.stop(),Ov(n))}))),n.B_}function mr(n){return n.k_||(n.k_=function(t,r,i){let s=Y(t);return s.f_(),new lp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:WR.bind(null,n),Ao:QR.bind(null,n),R_:KR.bind(null,n),A_:HR.bind(null,n)}),n.x_.push(e=>E(this,null,function*(){e?(n.k_.t_(),yield Hu(n)):(yield n.k_.stop(),n.v_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var pp=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Gp(n,e){if(En("AsyncQueue",`${e}: ${n}`),ea(n))return new $(O.UNAVAILABLE,`${e}: ${n}`);throw n}var Pu=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Oo(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Du=class{constructor(){this.q_=new Ce(z.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Q():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},hs=class n{constructor(e,t,r,i,s,o,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Pu.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var mp=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},gp=class{constructor(){this.queries=new pr(e=>uv(e),zu),this.onlineState="Unknown",this.z_=new Set}};function Wp(n,e){return E(this,null,function*(){let t=Y(n),r=3,i=e.query,s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new mp,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=Gp(o,`Initialization of query '${Ji(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&Hp(t)})}function Kp(n,e){return E(this,null,function*(){let t=Y(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function YR(n,e){let t=Y(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.U_)c.H_(i)&&(r=!0);o.K_=i}}r&&Hp(t)}function XR(n,e,t){let r=Y(n),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(t);r.queries.delete(e)}function Hp(n){n.z_.forEach(e=>{e.next()})}var yp,qw;(qw=yp||(yp={})).J_="default",qw.Cache="cache";var Wo=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new hs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=hs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==yp.Cache}};var ku=class{constructor(e){this.key=e}},Nu=class{constructor(e){this.key=e}},wp=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ie(),this.mutatedKeys=ie(),this.Ia=lv(e),this.Ta=new Pu(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new Du,i=t?t.Ta:this.Ta,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,g)=>{let b=i.get(y),N=Gu(this.query,g)?g:null,V=!!b&&this.mutatedKeys.has(b.key),B=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations),x=!1;b&&N?b.data.isEqual(N.data)?V!==B&&(r.track({type:3,doc:N}),x=!0):this.Ra(b,N)||(r.track({type:2,doc:N}),x=!0,(d&&this.Ia(N,d)>0||f&&this.Ia(N,f)<0)&&(c=!0)):!b&&N?(r.track({type:0,doc:N}),x=!0):b&&!N&&(r.track({type:1,doc:b}),x=!0,(d||f)&&(c=!0)),x&&(N?(o=o.add(N),s=B?s.add(y):s.delete(y)):(o=o.delete(y),s=s.delete(y)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let y=this.query.limitType==="F"?o.last():o.first();o=o.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{Ta:o,Aa:r,Xi:c,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((y,g)=>function(N,V){let B=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return B(N)-B(V)}(y.type,g.type)||this.Ia(y.doc,g.doc)),this.Va(r),i=i!=null&&i;let c=t&&!i?this.ma():[],d=this.Pa.size===0&&this.current&&!i?1:0,f=d!==this.ha;return this.ha=d,o.length!==0||f?{snapshot:new hs(this.query,e.Ta,s,o,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Du,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ie(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new Nu(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new ku(r))}),t}pa(e){this.la=e.hs,this.Pa=ie();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return hs.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},vp=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},_p=class{constructor(e){this.key=e,this.wa=!1}},Ip=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new pr(c=>uv(c),zu),this.Da=new Map,this.Ca=new Set,this.va=new Ce(z.comparator),this.Fa=new Map,this.Ma=new Go,this.xa={},this.Oa=new Map,this.Na=zo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function ZR(n,e,t=!0){return E(this,null,function*(){let r=qv(n),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield Fv(r,e,t,!0),i})}function eC(n,e){return E(this,null,function*(){let t=qv(n);yield Fv(t,e,!0,!1)})}function Fv(n,e,t,r){return E(this,null,function*(){let i=yield VR(n.localStore,rn(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield tC(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Nv(n.remoteStore,i),c})}function tC(n,e,t,r,i){return E(this,null,function*(){n.Ba=(g,b,N)=>function(B,x,F,W){return E(this,null,function*(){let te=x.view.da(F);te.Xi&&(te=yield $w(B.localStore,x.query,!1).then(({documents:C})=>x.view.da(C,te)));let J=W&&W.targetChanges.get(x.targetId),Ie=W&&W.targetMismatches.get(x.targetId)!=null,se=x.view.applyChanges(te,B.isPrimaryClient,J,Ie);return Gw(B,x.targetId,se.fa),se.snapshot})}(n,g,b,N);let s=yield $w(n.localStore,e,!0),o=new wp(e,s.hs),c=o.da(s.documents),d=jo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=o.applyChanges(c,n.isPrimaryClient,d);Gw(n,t,f.fa);let y=new vp(e,t,o);return n.ba.set(e,y),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),f.snapshot})}function nC(n,e,t){return E(this,null,function*(){let r=Y(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!zu(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ip(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$p(r.remoteStore,i.targetId),Ep(r,i.targetId)}).catch(Zo))):(Ep(r,i.targetId),yield ip(r.localStore,i.targetId,!0))})}function rC(n,e){return E(this,null,function*(){let t=Y(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$p(t.remoteStore,r.targetId))})}function iC(n,e,t){return E(this,null,function*(){let r=hC(n);try{let i=yield function(o,c){let d=Y(o),f=Ee.now(),y=c.reduce((N,V)=>N.add(V.key),ie()),g,b;return d.persistence.runTransaction("Locally write mutations","readwrite",N=>{let V=bn(),B=ie();return d.os.getEntries(N,y).next(x=>{V=x,V.forEach((F,W)=>{W.isValidDocument()||(B=B.add(F))})}).next(()=>d.localDocuments.getOverlayedDocuments(N,V)).next(x=>{g=x;let F=[];for(let W of c){let te=hR(W,g.get(W.key).overlayedDocument);te!=null&&F.push(new An(W.key,te,nv(te.value.mapValue),lr.exists(!0)))}return d.mutationQueue.addMutationBatch(N,f,F,c)}).next(x=>{b=x;let F=x.applyToLocalDocumentSet(g,B);return d.documentOverlayCache.saveOverlays(N,x.batchId,F)})}).then(()=>({batchId:b.batchId,changes:dv(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let f=o.xa[o.currentUser.toKey()];f||(f=new Ce(de)),f=f.insert(c,d),o.xa[o.currentUser.toKey()]=f}(r,i.batchId,t),yield na(r,i.changes),yield Hu(r.remoteStore)}catch(i){let s=Gp(i,"Failed to persist write");t.reject(s)}})}function Uv(n,e){return E(this,null,function*(){let t=Y(n);try{let r=yield OR(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Fa.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ye(o.wa):i.removedDocuments.size>0&&(ye(o.wa),o.wa=!1))}),yield na(t,r,e)}catch(r){yield Zo(r)}})}function zw(n,e,t){let r=Y(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let d=Y(o);d.onlineState=c;let f=!1;d.queries.forEach((y,g)=>{for(let b of g.U_)b.j_(c)&&(f=!0)}),f&&Hp(d)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sC(n,e,t){return E(this,null,function*(){let r=Y(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ce(z.comparator);o=o.insert(s,Vt.newNoDocument(s,X.min()));let c=ie().add(s),d=new wu(X.min(),new Map,new Ce(de),o,c);yield Uv(r,d),r.va=r.va.remove(s),r.Fa.delete(e),Qp(r)}else yield ip(r.localStore,e,!1).then(()=>Ep(r,e,t)).catch(Zo)})}function oC(n,e){return E(this,null,function*(){let t=Y(n),r=e.batch.batchId;try{let i=yield xR(t.localStore,e);$v(t,r,null),Bv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield na(t,i)}catch(i){yield Zo(i)}})}function aC(n,e,t){return E(this,null,function*(){let r=Y(n);try{let i=yield function(o,c){let d=Y(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,c).next(g=>(ye(g!==null),y=g.keys(),d.mutationQueue.removeMutationBatch(f,g))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(r.localStore,e);$v(r,e,t),Bv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield na(r,i)}catch(i){yield Zo(i)}})}function Bv(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function $v(n,e,t){let r=Y(n),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ep(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||jv(n,r)})}function jv(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&($p(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),Qp(n))}function Gw(n,e,t){for(let r of t)r instanceof ku?(n.Ma.addReference(r.key,e),cC(n,r)):r instanceof Nu?(j("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||jv(n,r.key)):Q()}function cC(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(j("SyncEngine","New document in limbo: "+t),n.Ca.add(r),Qp(n))}function Qp(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new z(Ae.fromString(e)),r=n.Na.next();n.Fa.set(r,new _p(t)),n.va=n.va.insert(t,r),Nv(n.remoteStore,new qo(rn(qu(t.path)),r,"TargetPurposeLimboResolution",Zw.oe))}}function na(n,e,t){return E(this,null,function*(){let r=Y(n),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((c,d)=>{o.push(r.Ba(d,e,t).then(f=>{if((f||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(d.targetId,f?.fromCache?"not-current":"current"),f){i.push(f);let y=ep.Ki(d.targetId,f);s.push(y)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(d,f){return E(this,null,function*(){let y=Y(d);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(f,b=>M.forEach(b.qi,N=>y.persistence.referenceDelegate.addReference(g,b.targetId,N)).next(()=>M.forEach(b.Qi,N=>y.persistence.referenceDelegate.removeReference(g,b.targetId,N)))))}catch(g){if(!ea(g))throw g;j("LocalStore","Failed to update sequence numbers: "+g)}for(let g of f){let b=g.targetId;if(!g.fromCache){let N=y.ns.get(b),V=N.snapshotVersion,B=N.withLastLimboFreeSnapshotVersion(V);y.ns=y.ns.insert(b,B)}}})}(r.localStore,s))})}function uC(n,e){return E(this,null,function*(){let t=Y(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield Dv(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(d=>{d.reject(new $(O.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield na(t,r.us)}})}function lC(n,e){let t=Y(n),r=t.Fa.get(e);if(r&&r.wa)return ie().add(r.key);{let i=ie(),s=t.Da.get(e);if(!s)return i;for(let o of s){let c=t.ba.get(o);i=i.unionWith(c.view.Ea)}return i}}function qv(n){let e=Y(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sC.bind(null,e),e.Sa.h_=YR.bind(null,e.eventManager),e.Sa.ka=XR.bind(null,e.eventManager),e}function hC(n){let e=Y(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aC.bind(null,e),e}var xu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return E(this,null,function*(){this.serializer=Wu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return NR(this.persistence,new np,e.initialUser,this.serializer)}createPersistence(e){return new Yf(Zf.Hr,this.serializer)}createSharedClientState(e){return new sp}terminate(){return E(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Tp=class{initialize(e,t){return E(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uC.bind(null,this.syncEngine),yield JR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new gp}()}createDatastore(e){let t=Wu(e.databaseInfo.databaseId),r=function(s){return new cp(s)}(e.databaseInfo);return function(s,o,c,d){return new hp(s,o,c,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,c){return new fp(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>zw(this.syncEngine,t,0),function(){return Au.D()?new Au:new op}())}createSyncEngine(e,t){return function(i,s,o,c,d,f,y){let g=new Ip(i,s,o,c,d,f);return y&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return E(this,null,function*(){var e;yield function(r){return E(this,null,function*(){let i=Y(r);j("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ta(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Ko=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var bp=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=hu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>E(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Gp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ef(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(this,null,function*(){r.isEqual(i)||(yield Dv(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Ww(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield fC(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jw(e.remoteStore,i)),n._onlineComponents=e})}function dC(n){return n.name==="FirebaseError"?n.code===O.FAILED_PRECONDITION||n.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function fC(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ef(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!dC(t))throw t;ns("Error using user provided cache. Falling back to memory cache: "+t),yield ef(n,new xu)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield ef(n,new xu);return n._offlineComponents})}function zv(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ww(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield Ww(n,new Tp))),n._onlineComponents})}function pC(n){return zv(n).then(e=>e.syncEngine)}function Ou(n){return E(this,null,function*(){let e=yield zv(n),t=e.eventManager;return t.onListen=ZR.bind(null,e.syncEngine),t.onUnlisten=nC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rC.bind(null,e.syncEngine),t})}function mC(n,e,t={}){let r=new Mt;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(s,o,c,d,f){let y=new Ko({next:b=>{o.enqueueAndForget(()=>Kp(s,g));let N=b.docs.has(c);!N&&b.fromCache?f.reject(new $(O.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&b.fromCache&&d&&d.source==="server"?f.reject(new $(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),g=new Wo(qu(c.path),y,{includeMetadataChanges:!0,ra:!0});return Wp(s,g)}(yield Ou(n),n.asyncQueue,e,t,r)})),r.promise}function gC(n,e,t={}){let r=new Mt;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(s,o,c,d,f){let y=new Ko({next:b=>{o.enqueueAndForget(()=>Kp(s,g)),b.fromCache&&d.source==="server"?f.reject(new $(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),g=new Wo(c,y,{includeMetadataChanges:!0,ra:!0});return Wp(s,g)}(yield Ou(n),n.asyncQueue,e,t,r)})),r.promise}function Gv(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Kw=new Map;function Wv(n,e,t){if(!t)throw new $(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yC(n,e,t,r){if(e===!0&&r===!0)throw new $(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Hw(n){if(!z.isDocumentKey(n))throw new $(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Qw(n){if(z.isDocumentKey(n))throw new $(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function Lt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Qu(n);throw new $(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Mu=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ds=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mu(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tf;switch(r.type){case"firstParty":return new of(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Kw.get(t);r&&(j("ComponentProvider","Removing Datastore"),Kw.delete(t),r.terminate())}(this),Promise.resolve()}};function Kv(n,e,t,r={}){var i;let s=(n=Lt(n,ds))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=He.MOCK_USER;else{c=Jg(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new $(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new He(f)}n._authCredentials=new nf(new lu(c,d))}}var gr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},nt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},hr=class n extends gr{constructor(e,t,r){super(e,t,qu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ju(n,e,...t){if(n=Ke(n),Wv("collection","path",e),n instanceof ds){let r=Ae.fromString(e,...t);return Qw(r),new hr(n,null,r)}{if(!(n instanceof nt||n instanceof hr))throw new $(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return Qw(r),new hr(n.firestore,null,r)}}function Jp(n,e,...t){if(n=Ke(n),arguments.length===1&&(e=hu.newId()),Wv("doc","path",e),n instanceof ds){let r=Ae.fromString(e,...t);return Hw(r),new nt(n,null,new z(r))}{if(!(n instanceof nt||n instanceof hr))throw new $(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return Hw(r),new nt(n.firestore,n instanceof hr?n.converter:null,new z(r))}}var Ap=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Su(this,"async_queue_retry"),this.hu=()=>{let t=Zd();t&&j("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=Zd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=Zd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new Mt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return E(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ea(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw En("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=pp.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Q()}verifyOperationInProgress(){}du(){return E(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function Jw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Sn=class extends ds{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Ap}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qv(this),this._firestoreClient.terminate()}};function Hv(n,e){let t=typeof n=="object"?n:$i(),r=typeof n=="string"?n:e||"(default)",i=Eo(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Qg("firestore");s&&Kv(i,...s)}return i}function Yu(n){return n._firestoreClient||Qv(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Qv(n){var e,t,r;let i=n._freezeSettings(),s=function(c,d,f,y){return new hf(c,d,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Gv(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new bp(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ho=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(rt.fromBase64String(e))}catch(t){throw new $(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Lu=class{constructor(e){this._methodName=e}};var Jo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}};var wC=/^__.*__$/,Sp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new An(e,this.data,this.fieldMask,t,this.fieldTransforms):new ai(e,this.data,t,this.fieldTransforms)}};function Jv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Rp=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Vu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Jv(this.fu)&&wC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Cp=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wu(e)}Fu(e,t,r,i=!1){return new Rp({fu:e,methodName:t,vu:r,path:gt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Yp(n){let e=n._freezeSettings(),t=Wu(n._databaseId);return new Cp(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yv(n,e,t,r,i,s={}){let o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);e_("Data must be an object, but it was:",o,r);let c=Xv(r,o),d,f;if(s.merge)d=new tn(o.fieldMask),f=o.fieldTransforms;else if(s.mergeFields){let y=[];for(let g of s.mergeFields){let b=_C(e,g,t);if(!o.contains(b))throw new $(O.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);EC(y,b)||y.push(b)}d=new tn(y),f=o.fieldTransforms.filter(g=>d.covers(g.field))}else d=null,f=o.fieldTransforms;return new Sp(new Ot(c),d,f)}function vC(n,e,t,r=!1){return Xp(t,n.Fu(r?4:3,e))}function Xp(n,e){if(Zv(n=Ke(n)))return e_("Unsupported field value:",e,n),Xv(n,e);if(n instanceof Lu)return function(r,i){if(!Jv(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let d=Xp(c,i.bu(o));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ee.fromDate(r);return{timestampValue:Eu(i.serializer,s)}}if(r instanceof Ee){let s=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Eu(i.serializer,s)}}if(r instanceof Jo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ho)return{bytesValue:Tv(i.serializer,r._byteString)};if(r instanceof nt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Bp(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Qu(r)}`)}(n,e)}function Xv(n,e){let t={};return ev(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(n,(r,i)=>{let s=Xp(i,e.pu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Zv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ee||n instanceof Jo||n instanceof Ho||n instanceof nt||n instanceof Lu)}function e_(n,e,t){if(!Zv(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Qu(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function _C(n,e,t){if((e=Ke(e))instanceof Qo)return e._internalPath;if(typeof e=="string")return t_(n,e);throw Vu("Field path arguments must be of type string or ",n,!1,void 0,t)}var IC=new RegExp("[~\\*/\\[\\]]");function t_(n,e,t){if(e.search(IC)>=0)throw Vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qo(...e.split("."))._internalPath}catch{throw Vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vu(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(s||o)&&(d+=" (found",s&&(d+=` in field ${r}`),o&&(d+=` in document ${i}`),d+=")"),new $(O.INVALID_ARGUMENT,c+n+d)}function EC(n,e){return n.some(t=>t.isEqual(e))}var Fu=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Pp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Pp=class extends Fu{data(){return super.data()}};function Zp(n,e){return typeof e=="string"?t_(n,e):e instanceof Qo?e._internalPath:e._delegate._internalPath}function n_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yo=class{},Uu=class extends Yo{};function Xu(n,e,...t){let r=[];e instanceof Yo&&r.push(e),r=r.concat(t),function(s){let o=s.filter(d=>d instanceof kp).length,c=s.filter(d=>d instanceof Dp).length;if(o>1||o>0&&c>0)throw new $(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Dp=class n extends Uu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return r_(e._query,t),new gr(e.firestore,e.converter,bf(e._query,t))}_parse(e){let t=Yp(e.firestore);return function(s,o,c,d,f,y,g){let b;if(f.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new $(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Xw(g,y);let N=[];for(let V of g)N.push(Yw(d,s,V));b={arrayValue:{values:N}}}else b=Yw(d,s,g)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Xw(g,y),b=vC(c,o,g,y==="in"||y==="not-in");return Le.create(f,y,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var kp=class n extends Yo{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ft.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let d of c)r_(o,d),o=bf(o,d)}(e._query,t),new gr(e.firestore,e.converter,bf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Np=class n extends Uu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ii(s,o)}(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new fr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Zu(n,e="asc"){let t=e,r=Zp("orderBy",n);return Np._create(r,t)}function Yw(n,e,t){if(typeof(t=Ke(t))=="string"){if(t==="")throw new $(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cv(e)&&t.indexOf("/")!==-1)throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ae.fromString(t));if(!z.isDocumentKey(r))throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bw(n,new z(r))}if(t instanceof nt)return bw(n,t._key);throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qu(t)}.`)}function Xw(n,e){if(!Array.isArray(n)||n.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r_(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xp=class{convertValue(e,t="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ps(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Jo(Re(e.latitude),Re(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Lp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bo(e));default:return null}}convertTimestamp(e){let t=Tn(e);return new Ee(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ae.fromString(e);ye(Pv(r));let i=new mu(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(t)||En(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function i_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ei=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bu=class extends Fu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ts(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ts=class extends Bu{data(e={}){return super.data(e)}},$u=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ts(this._firestore,this._userDataWriter,r.key,r,new ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let d=new ts(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let d=new ts(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ei(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,y=-1;return c.type!==0&&(f=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:TC(c.type),doc:d,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function TC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function em(n){n=Lt(n,nt);let e=Lt(n.firestore,Sn);return mC(Yu(e),n._key).then(t=>a_(e,n,t))}var Xo=class extends xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}};function el(n){n=Lt(n,gr);let e=Lt(n.firestore,Sn),t=Yu(e),r=new Xo(e);return n_(n._query),gC(t,n._query).then(i=>new $u(e,r,n,i))}function s_(n,e,t){n=Lt(n,nt);let r=Lt(n.firestore,Sn),i=i_(n.converter,e,t);return o_(r,[Yv(Yp(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,lr.none())])}function bC(n,e){let t=Lt(n.firestore,Sn),r=Jp(n),i=i_(n.converter,e);return o_(t,[Yv(Yp(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}function AC(n,...e){var t,r,i;n=Ke(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Jw(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Jw(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let d,f,y;if(n instanceof nt)f=Lt(n.firestore,Sn),y=qu(n._key.path),d={next:g=>{e[o]&&e[o](a_(f,n,g))},error:e[o+1],complete:e[o+2]};else{let g=Lt(n,gr);f=Lt(g.firestore,Sn),y=g._query;let b=new Xo(f);d={next:N=>{e[o]&&e[o](new $u(f,b,g,N))},error:e[o+1],complete:e[o+2]},n_(n._query)}return function(b,N,V,B){let x=new Ko(B),F=new Wo(N,x,V);return b.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return Wp(yield Ou(b),F)})),()=>{x.$a(),b.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return Kp(yield Ou(b),F)}))}}(Yu(f),y,c,d)}function o_(n,e){return function(r,i){let s=new Mt;return r.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return iC(yield pC(r),i,s)})),s.promise}(Yu(n),e)}function a_(n,e,t){let r=t.docs.get(e._key),i=new Xo(n);return new Bu(n,i,e._key,r,new ei(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){fs=i})(sr),ir(new Tt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Sn(new rf(r.getProvider("auth-internal")),new cf(r.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new $(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(f.options.projectId,y)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),je(Iw,"4.6.2",e),je(Iw,"4.6.2","esm2017")})();var ra=class{constructor(e){return e}},c_="firestore",tm=class{constructor(){return To(c_)}};var nm=new _e("angularfire2.firestore-instances");function SC(n,e){let t=Mc(c_,n,e);return t&&new ra(t)}function RC(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ra(r)}}var CC={provide:tm,deps:[[new at,nm]]},PC={provide:ra,useFactory:SC,deps:[[new at,nm],gn]},DC=(()=>{class n{constructor(){je("angularfire",Gr.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dn({type:n});static \u0275inj=hn({providers:[PC,CC]})}return n})();function Px(n,...e){return{ngModule:DC,providers:[{provide:nm,useFactory:RC(n),multi:!0,deps:[We,Jn,zi,Wr,[new at,ko],[new at,qi],...e]}]}}var an=xt(Jp,!0);var bt=xt(Hv,!0);var Rn=xt(s_,!0);var rm=Y_(Gg());var Ux=(()=>{let e=class e{constructor(){this.auth=G(Yr),this.utilsSvc=G(zg)}getAuth(){return this.auth}sigIn(r){return E(this,null,function*(){try{let i=Hi(),s=yield yw(i,r.email,r.password);if(yield rm.default.fire({icon:"success",title:"Inicio de sesi\xF3n exitoso",text:`Bienvenido, ${s.user.email}`}),s.user.email==="diegojabie@gmail.com"){let d=bt(),f=an(d,"users",s.user.uid);yield Rn(f,{role:"admin"},{merge:!0}),console.log("Rol de admin asignado correctamente.")}let o=bt(),c=an(o,"userLogs",s.user.uid);yield Rn(c,{email:r.email,loginDate:Ee.now()})}catch(i){throw yield rm.default.fire({icon:"error",title:"Error al iniciar sesi\xF3n",text:"Verifica tus credenciales o intenta m\xE1s tarde.",footer:`Detalles del error: ${i.message}`}),i}})}getUserRole(){let r=Hi().currentUser;if(r){let i=bt(),s=an(i,"users",r.uid);return new ln(o=>{em(s).then(c=>{if(c.exists()){let d=c.data();o.next(d?.role||null)}else o.next(null)}).catch(c=>{o.error(c)})})}return K(null)}signUp(r){return E(this,null,function*(){return gw(Hi(),r.email,r.password)})}updateUser(r){return E(this,null,function*(){return ww(Hi().currentUser,{displayName:r})})}signOut(){return E(this,null,function*(){Hi().signOut(),localStorage.removeItem("user")})}setDocument(r,i){return E(this,null,function*(){return Rn(an(bt(),r),i)})}saveGameAdivinaLaBandera(r,i){return E(this,null,function*(){let s=this.getAuth().currentUser;if(!s)throw new Error("No hay un usuario autenticado.");let o={usuario:s.email,fecha:Ee.fromDate(i),puntaje:r},c=`partidas-adivina-la-bandera/${s.uid}-${i.getTime()}`;try{yield Rn(an(bt(),c),o),console.log("Partida guardada exitosamente.")}catch(d){throw console.error("Error al guardar la partida:",d),d}})}saveGameAhorcado(r,i){return E(this,null,function*(){let s=this.getAuth().currentUser;if(!s)throw new Error("No hay un usuario autenticado.");let o={usuario:s.email,fecha:Ee.fromDate(i),puntaje:r},c=`partidas-ahorcado/${s.uid}-${i.getTime()}`;try{yield Rn(an(bt(),c),o),console.log("Partida guardada exitosamente.")}catch(d){throw console.error("Error al guardar la partida:",d),d}})}saveGameWordle(r,i){return E(this,null,function*(){let s=this.getAuth().currentUser;if(!s)throw new Error("No hay un usuario autenticado.");let o={usuario:s.email,fecha:Ee.fromDate(i),puntaje:r},c=`partidas-wordle/${s.uid}-${i.getTime()}`;try{yield Rn(an(bt(),c),o),console.log("Partida guardada exitosamente.")}catch(d){throw console.error("Error al guardar la partida:",d),d}})}saveGameMayorMenor(r,i){return E(this,null,function*(){let s=this.getAuth().currentUser;if(!s)throw new Error("No hay un usuario autenticado.");let o={usuario:s.email,fecha:Ee.fromDate(i),puntaje:r},c=`partidas-mayor-menor/${s.uid}-${i.getTime()}`;try{yield Rn(an(bt(),c),o),console.log("Partida guardada exitosamente.")}catch(d){throw console.error("Error al guardar la partida:",d),d}})}obtenerPartidasPorJuego(r){return E(this,null,function*(){let i=bt(),s=Ju(i,r),o=Xu(s,Zu("puntaje","desc")),c=[];try{(yield el(o)).forEach(f=>{c.push(xe(q({},f.data()),{juego:r.split("-")[1],fecha:f.data().fecha.toDate()}))})}catch(d){throw console.error("Error al obtener partidas:",d),d}return c})}saveEncuesta(r){return E(this,null,function*(){let i=this.getAuth().currentUser;if(!i)throw new Error("No hay un usuario autenticado.");let s={usuario:i.email,fecha:Ee.now(),resultado:r},o=`encuestas/${i.uid}-${new Date().getTime()}`;try{yield Rn(an(bt(),o),s),console.log("Encuesta guardada exitosamente.")}catch(c){throw console.error("Error al guardar la encuesta:",c),c}})}getEncuestas(){return E(this,null,function*(){let r=bt(),i=Ju(r,"encuestas"),s=Xu(i,Zu("fecha","desc")),o=[];try{(yield el(s)).forEach(d=>{o.push(xe(q({id:d.id},d.data()),{fecha:d.data().fecha.toDate()}))})}catch(c){throw console.error("Error al obtener encuestas:",c),c}return o})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ae({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();export{oI as a,KC as b,rg as c,pP as d,UI as e,mE as f,Cc as g,rD as h,Qg as i,Jg as j,mt as k,Ke as l,Tt as m,ir as n,Eo as o,sr as p,yy as q,$i as r,je as s,Gr as t,Mc as u,To as v,qi as w,zi as x,xt as y,gn as z,Wr as A,HD as B,jd as C,ko as D,Hk as E,Qk as F,Hi as G,zg as H,Ee as I,Ju as J,Hv as K,Xu as L,Zu as M,bC as N,AC as O,Px as P,bt as Q,Gg as R,Ux as S};
