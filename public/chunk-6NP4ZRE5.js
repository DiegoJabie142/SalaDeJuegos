import{E as Q,c as B,e as R,i as q,t as H,v as J}from"./chunk-RA5UQWQ2.js";import"./chunk-WXI33M2S.js";import{R as re,S as $,a as U}from"./chunk-EAWJ4BSG.js";import{Ca as W,Eb as f,Gb as y,Hb as G,Ib as T,Jb as E,Lb as v,Ob as V,Pb as z,Qb as A,Va as s,Wa as M,aa as P,e as te,fa as S,g as O,hb as g,hc as j,ic as k,jb as d,jc as D,ka as w,kb as F,lc as K,nc as N,ob as l,pb as a,qb as I,ta as x,tb as C,ua as _,vb as b,wb as p,z as L}from"./chunk-HPN74DU2.js";var ne=(r,n,i)=>[r,n,i];function oe(r,n){if(r&1){let i=C();l(0,"button",4),b("click",function(){let t=x(i).$implicit,o=p(2);return _(o.onLetterClick(t))}),f(1),a()}if(r&2){let i=n.$implicit,e=p(2);F("background-color",e.getLetterColor(i)),s(),y(" ",i.toUpperCase()," ")}}function ie(r,n){if(r&1&&(l(0,"div",2),g(1,oe,2,3,"button",3),a()),r&2){let i=n.$implicit;s(),d("ngForOf",i)}}var Y=(()=>{let n=class n{constructor(){this.guessedLetters=[],this.letterClicked=new W,this.letters="abcdefghijklmnopqrstuvwxyz".split("")}onLetterClick(e){this.letterClicked.emit(e)}getLetterColor(e){let t=this.guessedLetters.find(o=>o.letter===e);if(t)switch(t.status){case"correct":return"green";case"misplaced":return"yellow";case"incorrect":return"darkgray";default:return"white"}return"white"}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=w({type:n,selectors:[["app-keyboard"]],inputs:{guessedLetters:"guessedLetters"},outputs:{letterClicked:"letterClicked"},standalone:!0,features:[v],decls:2,vars:5,consts:[[1,"keyboard"],["class","keyboard-row",4,"ngFor","ngForOf"],[1,"keyboard-row"],["class","key",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"key",3,"click"]],template:function(t,o){t&1&&(l(0,"div",0),g(1,ie,2,1,"div",1),a()),t&2&&(s(),d("ngForOf",V(1,ne,o.letters.slice(0,10),o.letters.slice(10,20),o.letters.slice(20))))},dependencies:[k],styles:['@charset "UTF-8";.keyboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px}.keyboard-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:10px}.key[_ngcontent-%COMP%]{background-color:#ddd;border:2px solid #bbb;border-radius:5px;color:#333;font-size:20px;font-weight:700;width:50px;height:50px;margin:5px;transition:background-color .3s,transform .1s ease-in-out;cursor:pointer;text-transform:uppercase;outline:none}.key[_ngcontent-%COMP%]:active{transform:scale(.95)}.key.correct[_ngcontent-%COMP%]{background-color:#6aaa64;color:#fff}.key.misplaced[_ngcontent-%COMP%]{background-color:#c9b458;color:#fff}.key.incorrect[_ngcontent-%COMP%]{background-color:#161616;color:#fff}.key[_ngcontent-%COMP%]:hover{background-color:#a7a7a7}.key[_ngcontent-%COMP%]:focus{outline:none}.keyboard-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 2px;transition:background-color .2s ease-in-out}@media (max-width: 600px){.key[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px}}']});let r=n;return r})();var ee=te(re());var Z=(()=>{let n=class n{constructor(e){this.http=e,this.wordsUrl="assets/spanish_words.txt"}removeAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}getWords(){return this.http.get(this.wordsUrl,{responseType:"text"}).pipe(L(e=>e.split(`
`).map(t=>t.trim()).filter(t=>t.length===5).map(t=>this.removeAccents(t.toLowerCase()))))}};n.\u0275fac=function(t){return new(t||n)(S(U))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})();function ae(r,n){if(r&1&&(l(0,"div",11),f(1),z(2,"uppercase"),a()),r&2){let i=n.$implicit,e=n.index,t=p().index,o=p();d("ngClass",o.getLetterClass(o.guesses[t])[e]),s(),y(" ",A(2,2,i||"")," ")}}function ce(r,n){if(r&1&&(l(0,"div",9),g(1,ae,3,4,"div",10),a()),r&2){let i=n.index,e=p();s(),d("ngForOf",(e.guesses[i]==null?null:e.guesses[i].split(""))||e.emptyCells)}}function le(r,n){if(r&1){let i=C();l(0,"input",12),E("ngModelChange",function(t){x(i);let o=p();return T(o.userGuess,t)||(o.userGuess=t),_(t)}),b("keydown.enter",function(){x(i);let t=p();return _(t.checkGuess(t.userGuess))}),a()}if(r&2){let i=p();G("ngModel",i.userGuess)}}function de(r,n){if(r&1){let i=C();l(0,"button",13),b("click",function(){x(i);let t=p();return _(t.checkGuess(t.userGuess))}),f(1,"Adivinar"),a()}}function pe(r,n){if(r&1){let i=C();l(0,"button",13),b("click",function(){x(i);let t=p();return _(t.restartGame())}),f(1,"Reiniciar"),a()}}function ue(r,n){if(r&1&&(l(0,"div",14),f(1),a()),r&2){let i=p();s(),y(" Intentos restantes: ",i.attemptsLeft," ")}}function me(r,n){if(r&1&&(l(0,"div",14),f(1),a()),r&2){let i=p();s(),y(" ",i.victoryMessage," ")}}var Se=(()=>{let n=class n{constructor(e,t){this.wordleService=e,this.firebaseSvc=t,this.words=[],this.currentWord="",this.guesses=[],this.userGuess="",this.attemptsLeft=6,this.gameOver=!1,this.victoryMessage="",this.guessedLetters=[],this.emptyRows=new Array(6),this.emptyCells=new Array(5),this.letters="abcdefghijklmnopqrstuvwxyz".split(""),this.score=0}ngOnInit(){this.wordleService.getWords().subscribe(e=>{this.words=e,console.log("Palabras de 5 letras:",this.words),this.selectWord()},e=>{console.error("Error al obtener las palabras",e)})}getLetterStatus(e){let t=this.guesses.find(u=>u.includes(e));if(!t)return"";let o=t.indexOf(e);return this.currentWord[o]===e?"correct":this.currentWord.includes(e)?"misplaced":"incorrect"}updateKeyboardState(){this.guessedLetters=[],this.letters.forEach(e=>{let t=this.getLetterStatus(e);t&&this.guessedLetters.push({letter:e,status:t})})}onGameFinishedScore(e,t){return O(this,null,function*(){try{yield this.firebaseSvc.saveGameWordle(e,t)}catch(o){console.error("Error al guardar la partida:",o)}})}selectWord(){let e=Math.floor(Math.random()*this.words.length),t=this.words[e].toLowerCase();this.currentWord=this.removeAccents(t),console.log("Palabra seleccionada:",this.currentWord)}removeAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}checkGuess(e){return O(this,null,function*(){if(e=e.toLocaleLowerCase(),e=this.removeAccents(e),!this.words.includes(e)){ee.default.fire({icon:"error",title:"Palabra inv\xE1lida",text:"La palabra ingresada no es v\xE1lida.",allowEnterKey:!1});return}if(e=this.removeAccents(e.trim().toLowerCase()),this.guesses.push(e),this.attemptsLeft--,e===this.currentWord){this.calculateScore(),this.victoryMessage=`\xA1Ganaste! Tu puntuaci\xF3n es: ${this.score} puntos.`,this.gameOver=!0;let t=new Date;this.onGameFinishedScore(this.score,t)}else if(this.attemptsLeft===0){this.victoryMessage=`\xA1Perdiste! La palabra era '${this.currentWord}'. Tu puntuaci\xF3n es: ${this.score} puntos.`,this.gameOver=!0;let t=new Date;this.onGameFinishedScore(this.score,t)}this.updateKeyboardState()})}restartGame(){this.userGuess="",this.guesses=[],this.attemptsLeft=6,this.gameOver=!1,this.score=0,this.guessedLetters=[],this.selectWord(),this.updateKeyboardState(),console.log("Juego reiniciado")}getLetterClass(e){if(!e)return[];let t=this.removeAccents(this.currentWord.toLowerCase()),o=this.removeAccents(e.toLowerCase()),u=new Map;for(let c of t)u.set(c,(u.get(c)||0)+1);let h=new Array(e.length).fill("");for(let c=0;c<e.length;c++){let m=o[c];m===t[c]&&(h[c]="correct",u.set(m,u.get(m)-1))}for(let c=0;c<e.length;c++)if(h[c]===""){let m=o[c];u.get(m)&&u.get(m)>0?(h[c]="misplaced",u.set(m,u.get(m)-1)):h[c]="incorrect"}return h}onLetterClicked(e){this.gameOver||(this.userGuess+=e,this.userGuess.length===5&&this.checkGuess(this.userGuess))}calculateScore(){this.score=this.attemptsLeft*100+100}};n.\u0275fac=function(t){return new(t||n)(M(Z),M($))},n.\u0275cmp=w({type:n,selectors:[["app-wordle"]],standalone:!0,features:[v],decls:11,vars:10,consts:[[3,"back","whereToBack","title"],[1,"bg"],[1,"attempts"],["class","guess-row",4,"ngFor","ngForOf"],[1,"user-guess"],["type","text","maxlength","5",3,"ngModel","ngModelChange","keydown.enter",4,"ngIf"],[3,"click",4,"ngIf"],[3,"letterClicked","guessedLetters"],["class","attempts-left","style","color: white;",4,"ngIf"],[1,"guess-row"],["class","letter-box",3,"ngClass",4,"ngFor","ngForOf"],[1,"letter-box",3,"ngClass"],["type","text","maxlength","5",3,"ngModelChange","keydown.enter","ngModel"],[3,"click"],[1,"attempts-left",2,"color","white"]],template:function(t,o){t&1&&(I(0,"app-header",0),l(1,"div",1)(2,"div",2),g(3,ce,2,1,"div",3),a(),l(4,"div",4),g(5,le,1,1,"input",5)(6,de,2,0,"button",6)(7,pe,2,0,"button",6),a(),l(8,"app-keyboard",7),b("letterClicked",function(h){return o.onLetterClicked(h)}),a(),g(9,ue,2,1,"div",8)(10,me,2,1,"div",8),a()),t&2&&(d("back",!0)("whereToBack","main/home")("title","WORDLE"),s(3),d("ngForOf",o.emptyRows),s(2),d("ngIf",!o.gameOver),s(),d("ngIf",!o.gameOver),s(),d("ngIf",o.gameOver),s(),d("guessedLetters",o.guessedLetters),s(),d("ngIf",!o.gameOver),s(),d("ngIf",o.gameOver))},dependencies:[N,j,k,D,K,J,B,R,H,q,Q,Y],styles:['@charset "UTF-8";.attempts[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:30px}.guess-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:10px}.letter-box[_ngcontent-%COMP%]{width:45px;height:45px;display:flex;align-items:center;justify-content:center;margin:3px;font-size:22px;font-weight:700;border:2px solid #ccc;border-radius:5px;text-transform:uppercase;transition:background-color .3s ease,color .3s ease,transform .2s ease;box-shadow:0 2px 4px #0000001a}.letter-box.correct[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;transform:scale(1.1)}.letter-box.misplaced[_ngcontent-%COMP%]{background-color:#ffeb3b;color:#000;transform:scale(1.1)}.letter-box.incorrect[_ngcontent-%COMP%]{background-color:#9e9e9e;color:#fff}.letter-box[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.user-guess[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;align-items:center}input[type=text][_ngcontent-%COMP%]{padding:12px;font-size:20px;width:100px;text-align:center;margin-right:15px;border:2px solid #ccc;border-radius:5px;transition:border-color .3s ease,box-shadow .3s ease}input[type=text][_ngcontent-%COMP%]:focus{border-color:#4caf50;box-shadow:0 0 10px #4caf5080}button[_ngcontent-%COMP%]{padding:12px 20px;font-size:18px;cursor:pointer;background-color:#4caf50;color:#fff;border:none;border-radius:5px;transition:background-color .3s ease,transform .2s ease}button[_ngcontent-%COMP%]:hover{background-color:#45a049;transform:scale(1.05)}.attempts-left[_ngcontent-%COMP%]{margin-top:20px;text-align:center;font-size:20px;color:#333}.game-over-message[_ngcontent-%COMP%]{font-size:28px;text-align:center;font-weight:700;color:#d32f2f;margin-bottom:30px}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);height:93vh;padding-top:30px}.score[_ngcontent-%COMP%]{font-weight:700;text-shadow:1px 1px 4px rgba(0,0,0,.5);padding:10px}']});let r=n;return r})();export{Se as WordleComponent};
